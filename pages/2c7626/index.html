<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>🔀 JavaScript 可迭代对象 | notebook</title>
        <meta name="generator" content="VuePress 1.9.7" />
        <link rel="icon" href="/notebook/favicon.ico">
    <link rel="stylesheet" href="/notebook//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
    <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script> <meta name="description" content="a frontend notebook by Simon">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="个人学习笔记,前端学习笔记,前端学习,前端学习资源,前端学习路线,HTML,CSS,JavaScript,Vue,React">
    <meta name="theme-color" content="#204A7A">  <link rel="preload" href="/notebook/assets/css/0.styles.29a47cad.css" as="style"><link rel="preload" href="/notebook/assets/js/app.ab2a58ba.js" as="script"><link rel="preload" href="/notebook/assets/js/2.f4898154.js" as="script"><link rel="preload" href="/notebook/assets/js/3.c3838318.js" as="script"><link rel="preload" href="/notebook/assets/js/85.fe3d38ec.js" as="script"> <link rel="stylesheet" href="/notebook/assets/css/0.styles.29a47cad.css">
    </head>
    <body class="theme-mode-light">
        <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><img src="/notebook/assets/img/logo.png" alt="notebook" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/" class="nav-link">🌏 首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="☕️ 前端笔记" class="dropdown-title"><a href="/notebook/front-end/" class="link-title">☕️ 前端笔记</a> <span class="title" style="display:none;">☕️ 前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/front-end/roadmap/" class="nav-link">🗺 前端学习路线</a></li><li class="dropdown-item"><h4>分类</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/front-end/beginning/" class="nav-link">🚶 前端入门基础</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/stable/" class="nav-link">🚶🏻 前端巩固基础</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/core-frame/" class="nav-link">🏃 前端核心框架</a></li><li class="dropdown-subitem"><a href="/notebook/pages/2c7626/front-end/interview/" class="nav-link">🪞 前端面试题收集</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🚏 索引" class="dropdown-title"><a href="/notebook/archives/" class="link-title">🚏 索引</a> <span class="title" style="display:none;">🚏 索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/archives/" class="nav-link">🗄归档</a></li><li class="dropdown-item"><!----> <a href="/notebook/tags/" class="nav-link">🔖标签</a></li></ul></div></div><div class="nav-item"><a href="/notebook/about/" class="nav-link">🔖 关于</a></div> <a href="https://github.com/simon1uo/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
            🍞 GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/notebook/" class="nav-link">🌏 首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="☕️ 前端笔记" class="dropdown-title"><a href="/notebook/front-end/" class="link-title">☕️ 前端笔记</a> <span class="title" style="display:none;">☕️ 前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/front-end/roadmap/" class="nav-link">🗺 前端学习路线</a></li><li class="dropdown-item"><h4>分类</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/front-end/beginning/" class="nav-link">🚶 前端入门基础</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/stable/" class="nav-link">🚶🏻 前端巩固基础</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/core-frame/" class="nav-link">🏃 前端核心框架</a></li><li class="dropdown-subitem"><a href="/notebook/pages/2c7626/front-end/interview/" class="nav-link">🪞 前端面试题收集</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🚏 索引" class="dropdown-title"><a href="/notebook/archives/" class="link-title">🚏 索引</a> <span class="title" style="display:none;">🚏 索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/archives/" class="nav-link">🗄归档</a></li><li class="dropdown-item"><!----> <a href="/notebook/tags/" class="nav-link">🔖标签</a></li></ul></div></div><div class="nav-item"><a href="/notebook/about/" class="nav-link">🔖 关于</a></div> <a href="https://github.com/simon1uo/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
            🍞 GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 🍯 ES6 基本语法</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/notebook/pages/4e50dd/" class="sidebar-link">🌱 node.js 基本使用</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 📒 JavaScript 深入对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span> 📕 JavaScript 深入数据类型</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/pages/75d69a/" class="sidebar-link">⏺ JavaScript 原始类型的方法</a></li><li><a href="/notebook/pages/f89962/" class="sidebar-link">🔢 JavaScript 数字类型</a></li><li><a href="/notebook/pages/33f8b7/" class="sidebar-link">♒️ JavaScript 字符串</a></li><li><a href="/notebook/pages/e6c21b/" class="sidebar-link">🔃 JavaScript 数组</a></li><li><a href="/notebook/pages/2c7626/" aria-current="page" class="active sidebar-link">🔀 JavaScript 可迭代对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/notebook/pages/2c7626/#可迭代与类数组" class="sidebar-link">可迭代与类数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/2c7626/#array-from" class="sidebar-link">Array.from</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/2c7626/#可迭代对象总结" class="sidebar-link">可迭代对象总结</a></li></ul></li><li><a href="/notebook/pages/ca2625/" class="sidebar-link">🔂 JavaScript 映射与集合</a></li><li><a href="/notebook/pages/5de515/" class="sidebar-link">🔄 JavaScript 弱映射与弱集合</a></li><li><a href="/notebook/pages/aa670e/" class="sidebar-link">🔀 JavaScript 更多迭代方法</a></li><li><a href="/notebook/pages/62fb3f/" class="sidebar-link">📶 JavaScript 解构赋值</a></li><li><a href="/notebook/pages/3f5e62/" class="sidebar-link">🆕 JavaScript 日期和时间</a></li><li><a href="/notebook/pages/cf5da1/" class="sidebar-link">🈁 JavaScript 与 JSON</a></li><li><a href="/notebook/pages/cb7d78/" class="sidebar-link">🧭 JavaScript 数组方法应用实例</a></li><li><a href="/notebook/pages/183c8c/" class="sidebar-link">🖇 JavaScript 映射与集合应用实例</a></li><li><a href="/notebook/pages/b5e223/" class="sidebar-link">🗑 JavaScript 弱映射与弱集合应用实例</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 📗 JavaScript 深入函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 📘 JavaScript 原型与继承</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 📙 JavaScript 类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 📓 JavaScript DOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 🍯 JavaScript AJAX 网络请求</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 🚇 JavaScript Promise</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 📔 JavaScript 其他内容</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 🏃 JavaScript 进阶高级</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> ʦ TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 🚟 axios</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-16f6d530><div class="articleInfo" data-v-16f6d530><ul class="breadcrumbs" data-v-16f6d530><li data-v-16f6d530><a href="/notebook/" title="首页" class="iconfont icon-home router-link-active" data-v-16f6d530></a></li> <li data-v-16f6d530><a href="/notebook/front-end/stable/# 🚶🏻 前端巩固基础" data-v-16f6d530> 🚶🏻 前端巩固基础</a></li><li data-v-16f6d530><a href="/notebook/front-end/stable/# 📕 JavaScript 深入数据类型" data-v-16f6d530> 📕 JavaScript 深入数据类型</a></li></ul> <div class="info" data-v-16f6d530><div title="作者" class="author iconfont icon-touxiang" data-v-16f6d530><a href="https://github.com/simon1uo" target="_blank" title="作者" class="beLink" data-v-16f6d530>Simon Luo</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-16f6d530><a href="javascript:;" data-v-16f6d530>2022-05-05</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->🔀 JavaScript 可迭代对象<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p><strong>可迭代对象</strong> 是数组的泛化，任何对象都可以被定制为可在  <code>for..of</code> <strong>循环中使用的对象</strong>。许多内建对象都可迭代，除了数组，还有字符串。</p> <h3 id="symbol-iterator"><a href="#symbol-iterator" class="header-anchor">#</a> Symbol.iterator</h3> <p>🌰 例子：使自定义的对象可迭代：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">5</span>
<span class="token punctuation">}</span>
<span class="token comment">// 希望得到 for(let num of range) ... num=1,2,3,4,5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>为了让  <code>range</code>  可迭代， 需要为对象添加  <code>Symbol.iterator</code> （使对象可迭代的 <strong>内建 symbol</strong>）</p> <ul><li>当  <code>for..of</code>  循环启动时，它会调用这个方法（如果没找到，就会报错）。这个方法必须返回一个 <strong>迭代器（iterator）</strong> （ 一个有  <code>next</code>  方法的对象）。</li> <li>从此开始， <code>for..of</code> <strong>仅适用于这个被返回的对象</strong>。</li> <li>当  <code>for..of</code>  循环希望取得下一个数值，它就调用这个对象的  <code>next()</code>  方法。</li> <li><code>next()</code>  方法返回的结果的格式必须是  <code>{done: Boolean, value: any}</code> ，当  <code>done=true</code>  时，表示循环结束，否则  <code>value</code>  是下一个值。</li></ul></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.为 range 添加 Symbol.iterator</span>
range<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回一个迭代器对象</span>
  <span class="token comment">// 2. for...of 仅与希望的迭代器对象工作，要求它提供一个值</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
    <span class="token literal-property property">last</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>
    
    <span class="token comment">// 3. next() 在 for...of 每一轮循环迭代中被调用</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 4. 返回 {done: ..., value: ...} 格式的对象</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span>
        <span class="token punctuation">}</span> 
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// for...of循环</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>迭代器的核心功能：<strong>关注点分离</strong>：</p> <ul><li><code>range</code>  自身没有  <code>next()</code>  方法。</li> <li>相反，是通过调用  <code>range[Symbol.iterator]()</code>  创建了另一个对象，即所谓的「迭代器」对象，并且它的  <code>next</code>  会为迭代生成值。</li></ul> <p>进一步简化，将  <code>Symbol.iterator</code>  合并进对象，使用  <code>range</code>  自身作为迭代器。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  
  <span class="token punctuation">[</span>System<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p>现在  <code>range[Symbol.iterator]()</code>  返回的是  <code>range</code>  对象自身：它包括了必需的  <code>next()</code>  方法，并通过  <code>this.current</code>  记忆了当前的迭代进程。</p> <p>但是存在缺点：现在不可能 <strong>同时在对象上运行两个</strong> <code>for..of</code> <strong>循环</strong> 了：它们将 <strong>共享迭代状态</strong>，因为只有一个迭代器，即对象本身。但是两个并行的  <code>for..of</code>  是很 <strong>罕见</strong> 的，即使在异步情况下。</p></blockquote> <blockquote><p><strong>无穷的迭代器</strong>：将  <code>range</code>  设置为  <code>range.to = Infinity</code> ，这时  <code>range</code>  则成为了无穷迭代器。或者可以创建一个可迭代对象，它生成一个无穷伪随机数序列。</p> <p><code>next</code>  没有什么限制，它可以返回越来越多的值，这是正常的。</p> <p>迭代这种对象的  <code>for..of</code>  循环将不会停止。但是可以通过使用  <code>break</code>  来停止它。</p></blockquote> <h3 id="可迭代字符串"><a href="#可迭代字符串" class="header-anchor">#</a> 可迭代字符串</h3> <p><strong>数组和字符串</strong> 是使用最广泛的 <strong>内建可迭代对象</strong>。</p> <p>🌰 例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> char <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>🌰 例子 /  <code>for…of</code>  可处理代理对：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> smileString <span class="token operator">=</span> <span class="token string">'😀😃😄'</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> smile <span class="token keyword">of</span> smileString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>smile<span class="token punctuation">)</span> <span class="token comment">// &quot;😀&quot; &quot;😃&quot; &quot;😄&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="显式调用迭代器"><a href="#显式调用迭代器" class="header-anchor">#</a> 显式调用迭代器</h3> <p>使用 与  <code>for..of</code> <strong>完全相同</strong> 的方式遍历字符串，但是使用的是 <strong>直接调用</strong>。这段代码创建了一个字符串迭代器，并「手动」从中获取值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'Hello'</span>

<span class="token keyword">let</span> iterator <span class="token operator">=</span> str<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span>

<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>此过程，比  <code>for..of</code>  给了更多的控制权。例如，可以拆分迭代过程：迭代一部分，然后停止，做一些其他处理，然后再恢复迭代。</p> <h2 id="可迭代与类数组"><a href="#可迭代与类数组" class="header-anchor">#</a> 可迭代与类数组</h2> <ul><li>可迭代 Interable： 是实现了  <code>Symbol.iterator</code>  方法的对象。</li> <li>类数组 Array-like：是有索引和  <code>length</code>  属性的对象，所以它们看起来很像数组。</li></ul> <p>当将 JavaScript 用于编写 <strong>在浏览器或任何其他环境中</strong> 的实际任务时，可能会遇到 <strong>可迭代对象或类数组对象</strong>，或两者兼有。例如， <strong>字符串</strong> 既是可迭代的，又是类数组的。</p> <p>** 但是，一个可迭代对象也许不是类数组对象。反之亦然，类数组对象可能不可迭代。** 例如，第一个例子  <code>range</code>  对象，迭代的，但并非类数组对象，因为它没有索引属性，也没有  <code>length</code>  属性。</p> <p>🌰 例子 / 类数组但不可迭代：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// for (let item of arraylike) {}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="array-from"><a href="#array-from" class="header-anchor">#</a> <code>Array.from</code></h3> <p>对于可迭代对象和类数组对象通常都 <strong>不是数组</strong>，它们没有  <code>push</code>  和  <code>pop</code>  等方法。如果想引入数组的方法操作  <code>range</code>  对象：</p> <p>全局方法 <a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener noreferrer">Array.from<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以 <strong>接受一个可迭代或类数组的值</strong>，并从中获取一个「真正的」数组，然后就可以对其调用数组方法了。</p> <p>🌰 例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// world 数组方法有效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><code>Array.from</code>  方法接受对象，检查它是一个可迭代对象或类数组对象，然后创建一个新数组，并将该对象的所有元素 <strong>复制</strong> 到这个新数组。</p></blockquote> <p>🌰 例子 / 处理一个数组转换为单个字符的数组：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> smileString <span class="token operator">=</span> <span class="token string">'😀😃😄'</span>
<span class="token keyword">let</span> arraySmile <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>smileString<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arrayString<span class="token punctuation">)</span> <span class="token comment">// [&quot;😀&quot;, &quot;😃&quot;, &quot;😄&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>与  <code>str.split()</code>  方法不同，它依赖于字符串的可迭代特性，因此，就像  <code>for..of</code>  一样，可以正确地处理代理对（surrogate pair）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> splitSmile <span class="token operator">=</span> smile<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>splitSmile<span class="token punctuation">)</span> <span class="token comment">// [&quot;�&quot;, &quot;�&quot;, &quot;�&quot;, &quot;�&quot;, &quot;�&quot;, &quot;�&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>split</code>  无法处理代理对（surrogate pair）。</p> <p>实际上，可以看作  <code>for…of</code>  的工作：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arraySmile <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token punctuation">(</span>smile <span class="token keyword">of</span> smileString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arraySmile<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>smile<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></blockquote> <p>🌰 例子 / 基于  <code>Array.from</code>  创建代理感知（surrogate-aware）的 <code>slice</code>  方法，解决原生  <code>slice</code>  不支持识别代理对：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">slice</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'𝒳😂𩷶'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">slice</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;😂𩷶&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>🌰 例子 / 使用展开运算符也可转换为真正的数组：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;𝒳😂&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> chars <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>str<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chars<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𝒳</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chars<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 😂</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chars<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="可迭代对象总结"><a href="#可迭代对象总结" class="header-anchor">#</a> 可迭代对象总结</h2> <ul><li><p>🍎 可以应用  <code>for..of</code>  的对象被称为 <strong>可迭代的</strong>。</p> <ul><li>可迭代对象必须实现  <code>Symbol.iterator</code>  方法。</li> <li><code>obj[Symbol.iterator]()</code>  的结果被称为 <strong>迭代器（iterator）</strong>。由它处理进一步的迭代过程。</li> <li>一个迭代器必须有  <code>next()</code>  方法，它返回一个  <code>{done: Boolean, value: any}</code>  对象，这里  <code>done:true</code>  表明迭代结束，否则  <code>value</code>  就是下一个值。</li></ul></li> <li><p><code>Symbol.iterator</code>  方法会被  <code>for..of</code>  自动调用或者可以直接调用。</p></li> <li><p>内建的可迭代对象例如字符串和数组，都实现了  <code>Symbol.iterator</code> 。</p></li> <li><p>字符串迭代器能够 <strong>识别代理对</strong>（surrogate pair）。</p></li> <li><p><strong>类数组对象</strong>：有索引属性和  <code>length</code>  属性的对象，但是 <strong>没有数组的内建方法</strong>。</p> <p>大多数内建方法都假设它们需要处理的是可迭代对象或者类数组对象，而不是「真正的」数组，因为这样 <strong>抽象度更高</strong>。</p></li> <li><p>🍎  <code>Array.from(obj[, mapFn, thisArg])</code>  将可迭代对象或类数组对象  <code>obj</code> <strong>转化</strong> 为真正的数组  <code>Array</code> ，然后就可以对它 <strong>应用数组的方法</strong>。可选参数  <code>mapFn</code>  和  <code>thisArg</code>  允许我们将函数应用到每个元素。</p></li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/simon1uo/notebook/edit/master/docs/101. 🚶🏻 前端巩固基础/32. 📕 JavaScript 深入数据类型/25. 🔀 JavaScript 可迭代对象.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">📢 上次更新:</span> <span class="time">2022/08/31, 10:22:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/notebook/pages/e6c21b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">🔃 JavaScript 数组</div></a> <a href="/notebook/pages/ca2625/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">🔂 JavaScript 映射与集合</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
                    ←
                    <a href="/notebook/pages/e6c21b/" class="prev">🔃 JavaScript 数组</a></span> <span class="next"><a href="/notebook/pages/ca2625/">🔂 JavaScript 映射与集合</a>→
                </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
            Copyright © 2020-2022
            |
            <span>wrote with ❤️ by <a href="https://simon1uo.github.io">Simon</a></br></span>

        theme based on
        <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="theme">Vdoing</a> powered By Vuepress
    </div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
                        跟随系统
                    </li><li class="iconfont icon-rijianmoshi">
                        浅色模式
                    </li><li class="iconfont icon-yejianmoshi">
                        深色模式
                    </li><li class="iconfont icon-yuedu">
                        阅读模式
                    </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
        <script src="/notebook/assets/js/app.ab2a58ba.js" defer></script><script src="/notebook/assets/js/2.f4898154.js" defer></script><script src="/notebook/assets/js/3.c3838318.js" defer></script><script src="/notebook/assets/js/85.fe3d38ec.js" defer></script>
    </body>
</html>
