<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>ğŸ›  MyBatis é…ç½®æ–‡ä»¶ | notebook</title>
        <meta name="generator" content="VuePress 1.9.7" />
        <link rel="icon" href="/notebook/favicon.ico">
    <link rel="stylesheet" href="/notebook//at.alicdn.com/t/font_3114978_qe0b39no76.css"> <meta name="description" content="a frontend notebook by Simon">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="ä¸ªäººå­¦ä¹ ç¬”è®°,å‰ç«¯å­¦ä¹ ç¬”è®°,å‰ç«¯å­¦ä¹ ,å‰ç«¯å­¦ä¹ èµ„æº,å‰ç«¯å­¦ä¹ è·¯çº¿,HTML,CSS,JavaScript,Vue,React">
    <meta name="theme-color" content="#204A7A">  <link rel="preload" href="/notebook/assets/css/0.styles.e8c79dc0.css" as="style"><link rel="preload" href="/notebook/assets/js/app.6a815fb9.js" as="script"><link rel="preload" href="/notebook/assets/js/2.ddc7fe92.js" as="script"><link rel="preload" href="/notebook/assets/js/3.cf638cd2.js" as="script"><link rel="preload" href="/notebook/assets/js/239.a1ad0e83.js" as="script"> <link rel="stylesheet" href="/notebook/assets/css/0.styles.e8c79dc0.css">
    </head>
    <body class="theme-mode-light">
        <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><img src="/notebook/assets/img/logo.png" alt="notebook" class="logo"> <span class="site-name">&lt;notebook/&gt;</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/" class="nav-link">ğŸŒ é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â˜•ï¸ å‰ç«¯ç¬”è®°" class="dropdown-title"><a href="/notebook/front-end/" class="link-title">â˜•ï¸ å‰ç«¯ç¬”è®°</a> <span class="title" style="display:none;">â˜•ï¸ å‰ç«¯ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/front-end/roadmap/" class="nav-link">ğŸ—º å‰ç«¯å­¦ä¹ è·¯çº¿</a></li><li class="dropdown-item"><h4>åˆ†ç±»</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/front-end/beginning/" class="nav-link">ğŸš¶ å‰ç«¯å…¥é—¨åŸºç¡€</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/stable/" class="nav-link">ğŸš¶ğŸ» å‰ç«¯å·©å›ºåŸºç¡€</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/core-frame/" class="nav-link">ğŸƒ å‰ç«¯æ ¸å¿ƒæ¡†æ¶</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”– å…³äº" class="dropdown-title"><a href="/notebook/about/" class="link-title">ğŸ”– å…³äº</a> <span class="title" style="display:none;">ğŸ”– å…³äº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ğŸšç´¢å¼•</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/archives/" class="nav-link">ğŸ—„å½’æ¡£</a></li><li class="dropdown-subitem"><a href="/notebook/tags/" class="nav-link">ğŸ”–æ ‡ç­¾</a></li></ul></li></ul></div></div> <a href="https://github.com/simon1uo/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
        ğŸ GitHub
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/notebook/" class="nav-link">ğŸŒ é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â˜•ï¸ å‰ç«¯ç¬”è®°" class="dropdown-title"><a href="/notebook/front-end/" class="link-title">â˜•ï¸ å‰ç«¯ç¬”è®°</a> <span class="title" style="display:none;">â˜•ï¸ å‰ç«¯ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/front-end/roadmap/" class="nav-link">ğŸ—º å‰ç«¯å­¦ä¹ è·¯çº¿</a></li><li class="dropdown-item"><h4>åˆ†ç±»</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/front-end/beginning/" class="nav-link">ğŸš¶ å‰ç«¯å…¥é—¨åŸºç¡€</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/stable/" class="nav-link">ğŸš¶ğŸ» å‰ç«¯å·©å›ºåŸºç¡€</a></li><li class="dropdown-subitem"><a href="/notebook/front-end/core-frame/" class="nav-link">ğŸƒ å‰ç«¯æ ¸å¿ƒæ¡†æ¶</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”– å…³äº" class="dropdown-title"><a href="/notebook/about/" class="link-title">ğŸ”– å…³äº</a> <span class="title" style="display:none;">ğŸ”– å…³äº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ğŸšç´¢å¼•</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/archives/" class="nav-link">ğŸ—„å½’æ¡£</a></li><li class="dropdown-subitem"><a href="/notebook/tags/" class="nav-link">ğŸ”–æ ‡ç­¾</a></li></ul></li></ul></div></div> <a href="https://github.com/simon1uo/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
        ğŸ GitHub
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> ğŸ”‘ æ•°æ®åº“åŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span> ğŸ§‹ Java SSM ç›¸å…³</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span> ğŸ—º MyBatis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/pages/d16430/" class="sidebar-link">ğŸš€ Mybatis åŸºç¡€</a></li><li><a href="/notebook/pages/37eeab/" aria-current="page" class="active sidebar-link">ğŸ›  MyBatis é…ç½®æ–‡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/notebook/pages/37eeab/#mybatis-æ ¸å¿ƒç»„ä»¶å››ä¸ªéƒ¨åˆ†" class="sidebar-link">MyBatis æ ¸å¿ƒç»„ä»¶å››ä¸ªéƒ¨åˆ†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#æ„é€ å™¨-sqlsessionbuilder" class="sidebar-link">æ„é€ å™¨ SqlSessionBuilder</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#å·¥å‚-sqlsessionfactory" class="sidebar-link">å·¥å‚ SqlSessionFactory</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#ä¼šè¯-sqlsession" class="sidebar-link">ä¼šè¯ SqlSession</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#æ˜ å°„å™¨-sqlmapper" class="sidebar-link">æ˜ å°„å™¨ SqlMapper</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/37eeab/#mybatis-é…ç½®æ–‡ä»¶" class="sidebar-link">MyBatis é…ç½®æ–‡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#é…ç½®æ–‡ä»¶ç»“æ„é¡ºåº" class="sidebar-link">é…ç½®æ–‡ä»¶ç»“æ„é¡ºåº</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#properties-å…ƒç´ " class="sidebar-link">properties å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#settings-å…ƒç´ " class="sidebar-link">settings å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#typealiases-å…ƒç´ " class="sidebar-link">typeAliases å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#typehandlers-å…ƒç´ " class="sidebar-link">typeHandlers å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#objectfactory-å…ƒç´ " class="sidebar-link">objectFactory å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#plugins-å…ƒç´ " class="sidebar-link">plugins å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#environments-å…ƒç´ " class="sidebar-link">environments å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#databasedprovider-å…ƒç´ " class="sidebar-link">databasedProvider å…ƒç´ </a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/37eeab/#mappers-å…ƒç´ " class="sidebar-link">mappers å…ƒç´ </a></li></ul></li></ul></li><li><a href="/notebook/pages/269652/" class="sidebar-link">ğŸª MyBatis æ˜ å°„æ–‡ä»¶</a></li><li><a href="/notebook/pages/991773/" class="sidebar-link">ğŸ” MyBatis è¿›é˜¶æŸ¥è¯¢</a></li><li><a href="/notebook/pages/33f653/" class="sidebar-link">ğŸ”¦ MyBatis è·å–å‚æ•°</a></li><li><a href="/notebook/pages/4341f6/" class="sidebar-link">ğŸ’¾ MyBatis ç¼“å­˜</a></li><li><a href="/notebook/pages/a1647a/" class="sidebar-link">ğŸš² MyBatis åŠ¨æ€ SQL</a></li><li><a href="/notebook/pages/f27918/" class="sidebar-link">â›“ MyBatis å…³è”æ˜ å°„</a></li><li><a href="/notebook/pages/cf58e4/" class="sidebar-link">ğŸ’ˆ MyBatis å»¶è¿ŸåŠ è½½</a></li><li><a href="/notebook/pages/3b8955/" class="sidebar-link">ğŸ–‡ MyBatis æ‹“å±•åº”ç”¨</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span> ğŸƒ Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span> ğŸšSpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span> ğŸ¤– SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span> ğŸ’¡ Java è¡¥å……</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-16f6d530><div class="articleInfo" data-v-16f6d530><ul class="breadcrumbs" data-v-16f6d530><li data-v-16f6d530><a href="/notebook/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-16f6d530></a></li> <li data-v-16f6d530><a href="/notebook/categories/?category=%20%F0%9F%A7%B0%20%E5%85%B6%E4%BB%96%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="åˆ†ç±»" data-v-16f6d530> ğŸ§° å…¶ä»–å­¦ä¹ ç¬”è®°</a></li><li data-v-16f6d530><a href="/notebook/categories/?category=%20%F0%9F%A7%8B%20Java%20SSM%20%E7%9B%B8%E5%85%B3" title="åˆ†ç±»" data-v-16f6d530> ğŸ§‹ Java SSM ç›¸å…³</a></li><li data-v-16f6d530><a href="/notebook/categories/?category=%20%F0%9F%97%BA%20MyBatis" title="åˆ†ç±»" data-v-16f6d530> ğŸ—º MyBatis</a></li></ul> <div class="info" data-v-16f6d530><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-16f6d530><a href="https://github.com/simon1uo" target="_blank" title="ä½œè€…" class="beLink" data-v-16f6d530>Simon</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-16f6d530><a href="javascript:;" data-v-16f6d530>2022-03-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><!---->ğŸ›  MyBatis é…ç½®æ–‡ä»¶<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>MyBatis çš„æŒä¹…åŒ–è§£å†³æ–¹æ¡ˆå°†ç”¨æˆ·ä»åŸå§‹çš„ JDBC è®¿é—®ä¸­è§£æ”¾å‡ºæ¥ï¼Œç”¨æˆ·åªéœ€è¦å®šä¹‰ SQL è¯­å¥ï¼Œæ— éœ€å…³å¿ƒåº•å±‚çš„ JDBC æ“ä½œï¼Œå°±å¯ä»¥<strong>é¢å‘å¯¹è±¡</strong>çš„æ–¹å¼è¿›è¡ŒæŒä¹…å±‚æ“ä½œã€‚åº•å±‚æ•°æ®åº“è¿æ¥çš„è·å–ã€æ•°æ®è®¿é—®çš„å®ç°ã€äº‹åŠ¡æ§åˆ¶ç­‰éƒ½æ— é¡»ç”¨æˆ·å…³å¿ƒï¼Œä»è€Œå°†åº”ç”¨å±‚ä»åº•å±‚çš„ JDBC / JTA API ä¸­æŠ½å–å‡ºæ¥ã€‚</p> <h2 id="mybatis-æ ¸å¿ƒç»„ä»¶å››ä¸ªéƒ¨åˆ†"><a href="#mybatis-æ ¸å¿ƒç»„ä»¶å››ä¸ªéƒ¨åˆ†" class="header-anchor">#</a> MyBatis æ ¸å¿ƒç»„ä»¶å››ä¸ªéƒ¨åˆ†</h2> <ul><li>æ„é€ å™¨  <code>SqlSessionFactoryBuilder</code></li> <li>å·¥å‚  <code>SqlSessionFactory</code></li> <li>ä¼šè¯ <code>SqlSession</code> <ul><li>æ‰§è¡ŒæœŸ  <code>Executor</code></li> <li>å‚æ•°å¤„ç†å™¨  <code>ParameterHandler</code></li> <li>JDBC å°è£…å™¨  <code>StatementHandler</code></li> <li>ç»“æœå¤„ç†å™¨  <code>ResultSetHandler</code></li></ul></li> <li>æ˜ å°„å™¨  <code>SqlMapper</code></li></ul> <img src="https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/kYA7Fu.png" alt="image-20220307172802256" style="zoom:50%;"> <h3 id="æ„é€ å™¨-sqlsessionbuilder"><a href="#æ„é€ å™¨-sqlsessionbuilder" class="header-anchor">#</a> æ„é€ å™¨  <code>SqlSessionBuilder</code></h3> <p>MyBatis æä¾›äº†æ„é€ å™¨ SqlSessionFactoryBuilderï¼Œå®ƒä¼šæ ¹æ®å…¨å±€é…ç½®æ–‡ä»¶æ¥ç”Ÿæˆ SqlSessionFactoryï¼Œå®ƒé‡‡ç”¨çš„æ˜¯åˆ†æ­¥æ„å»ºçš„å»ºé€ è€…æ¨¡å¼æ¥å®Œæˆå·¥ä½œï¼Œå…¶ä¸­ä¹Ÿå½“ç„¶ä¼šåŒ…æ‹¬æ’ä»¶æ’å…¥ç­‰ã€‚é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨å®ƒçš„  <code>build</code>  æ–¹æ³•æ¥åˆ›å»º  <code>SqlSessionFactory</code>  çš„å¯¹è±¡ã€‚</p> <p>åˆ›å»º <code>SessionFactory</code>  æˆåŠŸåå®ƒå°±å¤±å»ä½œç”¨ï¼Œå› æ­¤<strong>å®ƒçš„å®ä¾‹ä¸åº”è¯¥é•¿æœŸå­˜åœ¨</strong>ã€‚</p> <p>åœ¨ MyBatis ä¸­ï¼Œæ—¢å¯ä»¥é€šè¿‡è¯»å–é…ç½®çš„ XML æ–‡ä»¶çš„å½¢å¼ç”Ÿæˆ  <code>SqlSessionFactory</code> ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Java ä»£ç ï¼ˆæ³¨è§£ï¼‰çš„å½¢å¼å»ç”Ÿæˆ  <code>SqlSessionFactory</code> ã€‚</p> <h3 id="å·¥å‚-sqlsessionfactory"><a href="#å·¥å‚-sqlsessionfactory" class="header-anchor">#</a> å·¥å‚ SqlSessionFactory</h3> <p>é€šå¸¸æ¯ä¸ªæ•°æ®åº“ä¼š<strong>åªå¯¹åº”ä¸€ä¸ª</strong> <code>SqlSessionFactory</code>  çš„å¯¹è±¡ï¼ˆå¦‚åˆ›å»ºå¤šä¸ªä¼šé€ æˆèµ„æºæµªè´¹)ï¼Œå®ƒå¯è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ã€‚ <code>SqlSessionFactory</code>  å”¯ä¸€çš„ä½œç”¨å°±æ˜¯ä»¥å·¥å‚æ¨¡å¼ç”Ÿäº§  <code>SqlSession</code>  çš„å¯¹è±¡ï¼Œé€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨å®ƒçš„  <code>openSession</code>  æ–¹æ³•æ¥åˆ›å»º  <code>SqlSession</code>  çš„å¯¹è±¡ã€‚</p> <p><code>SqlSessionFactory</code>  å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸé€šå¸¸æ˜¯æ•´ä¸ª MyBatis çš„åº”ç”¨ä¹‹ä¸­ï¼Œå› æ­¤ä¸€æ—¦åˆ›å»ºå°±é•¿æœŸä¿å­˜å®ƒï¼Œç›´åˆ°ä¸å†ä½¿ç”¨ MyBatisã€‚ æ³¨æ„ <code>SqlSessionFactory</code>  æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨ MyBatis ä¸­å®ƒå­˜åœ¨ä¸¤ä¸ªå®ç°ç±»ï¼š<br> <code>SqlSessionManager</code>  å’Œ  <code>DefaultSqlSessionFactory</code> ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå…·ä½“æ˜¯ç”±<br> <code>DefaultSqlSessionFactory</code>  å»å®ç°çš„ï¼Œè€Œ  <code>SqlSessionManager</code>  ä½¿ç”¨åœ¨å¤šçº¿ ç¨‹çš„ç¯å¢ƒä¸­ï¼Œå®ƒçš„å…·ä½“å®ç°ä¾é   <code>DefaultSqlSessionFactory</code> ã€‚</p> <h3 id="ä¼šè¯-sqlsession"><a href="#ä¼šè¯-sqlsession" class="header-anchor">#</a> ä¼šè¯  <code>SqlSession</code></h3> <p><code>SqlSession</code>  æ˜¯<strong>æ‰§è¡ŒæŒä¹…åŒ–æ“ä½œ</strong>çš„ï¼Œå®ƒçš„å¯¹è±¡æ˜¯åº”ç”¨ç¨‹åºä¸æŒä¹…å±‚ä¹‹é—´æ‰§è¡Œäº¤äº’æ“ä½œçš„ä¸€ä¸ªå•çº¿ç¨‹å¯¹è±¡ï¼Œç±»ä¼¼äº JDBC ä¸­çš„  <code>Connection</code>  å¯¹è±¡ï¼Œä»£è¡¨ç€ä¸€ä¸ªè¿æ¥èµ„æºçš„å¯ç”¨ã€‚<br> <code>SqlSession</code>  çš„ä¸»è¦ä½œç”¨æœ‰ï¼šä½¿ç”¨åŠ¨æ€ä»£ç†æ¨¡å¼è·å–  <code>Mapper</code>  æ¥å£ï¼Œå‘é€ SQL ç»™æ•™æ®åº“ï¼æ§åˆ¶æ•™æ®åº“äº‹åŠ¡ç­‰ã€‚åœ¨ MyBatis ä¸­ï¼Œ <code>SqlSession</code>  æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼Œ <code>DefaultSqlSession</code>  å’Œ  <code>SqlSessionManager</code>  ã€‚ <code>DefaultSqlSession</code>  æ˜¯å•çº¿ç¨‹ä½¿ç”¨çš„ï¼Œè€Œ  <code>SqlSessionManager</code>  åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p> <p>å¸¸ç”¨æ–¹æ³•ï¼š</p> <ul><li><p><code>getMapper(Class&lt;T&gt; type)</code> ï¼šè¿”å›  <code>Mapper</code>  æ¥å£ä»£ç†å¯¹è±¡</p></li> <li><p><code>void commit()</code> ï¼šæäº¤äº‹åŠ¡</p></li> <li><p><code>void rollback()</code> ï¼šå›æ»¾äº‹åŠ¡</p></li> <li><p><code>void clearCache()</code> ï¼šæ¸…é™¤ç¼“å­˜</p></li> <li><p><code>void close()</code> ï¼šå…³é—­  <code>SqlSession</code>  å¯¹è±¡</p> <p>ä½¿ç”¨å®Œåè¦åŠæ—¶å…³é—­ï¼Œé€šå¸¸å¯å°†å…¶æ”¾åœ¨  <code>finally</code>  ä¸­å…³é—­</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ­¤å¤„æ‰§è¡ŒæŒä¹…åŒ–æ“ä½œ </span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>SqlSession</code>  ä¸‹çš„å››å¤§å¯¹è±¡ï¼š</p> <ul><li><code>Executor</code>  ï¼ˆæ‰§è¡Œå™¨ï¼‰ï¼š <code>SqlSession</code>  ä¼šè¯å…¶å®æ˜¯ä¸€ä¸ªé—¨é¢ï¼ŒçœŸæ­£å¹²æ´»çš„æ˜¯æ‰§è¡Œå™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªçœŸæ­£æ‰§è¡Œ Java å’Œæ•°æ®åº“äº¤äº’çš„å¯¹è±¡ã€‚</li> <li><code>StatementHandler</code>  ï¼ˆ JDBC å°è£…å™¨ï¼‰ï¼šé¡¾åæ€ä¹‰ï¼Œ <code>StatementHandler</code>   ï¼ˆ JDBC å°è£…å™¨ï¼‰å°±æ˜¯ä¸“é—¨å¤„ç†æ•°æ®åº“ä¼šè¯çš„ã€‚</li> <li><code>ParameterHandler</code>  ï¼ˆå‚æ•°å¤„ç†å™¨ï¼‰ï¼šMyBatis é€šè¿‡  <code>ParameterHandler</code> ï¼ˆå‚æ•™å¤„ç†å™¨ï¼‰å¯¹é¢„ç¼–è¯‘è¯­å¥è¿›è¡Œå‚æ•™è®¾ç½®çš„ã€‚</li> <li><code>ResultSetHandler</code>  ï¼ˆç»“æœå¤„ç†å™¨ï¼‰:MyBatis é€šè¿‡  <code>ResultSetHandler</code>  ï¼ˆç»“æœå¤„ç†å™¨ï¼‰å¯¹è¿å›çš„ç»“æœé›†è¿›è¡Œç»„è£…ã€‚</li></ul> <h3 id="æ˜ å°„å™¨-sqlmapper"><a href="#æ˜ å°„å™¨-sqlmapper" class="header-anchor">#</a> æ˜ å°„å™¨  <code>SqlMapper</code></h3> <p>æ˜ å°„å™¨æ˜¯ MyBatis ä¸­æœ€é‡è¦ã€æœ€å¤æ‚çš„ç»„ä»¶ï¼Œå®ƒç”±ä¸€ä¸ªæ¥å£å’Œå¯¹åº”çš„ XML æ–‡ä»¶ï¼ˆæˆ–æ³¨è§£ï¼‰ç»„æˆã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸  <code>SqlSession</code>  ä¸€è‡´ï¼Œä¸€èˆ¬æ¥è¯´ç”Ÿå‘½å‘¨æœŸåº”è¯¥ç­‰äºæˆ–è€…å°äº  <code>SqlSession</code> ã€‚</p> <p>æ˜ å°„å™¨çš„ä¸»è¦ä½œç”¨å°±æ˜¯å°† SQL æŸ¥è¯¢åˆ°çš„ç»“æœæ˜ å°„ä¸ºä¸€ä¸ªæŒä¹…åŒ–ç±»ï¼Œæˆ–è€…å°†æŒä¹…åŒ–ç±»çš„æ•°æ®æ’å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶å®šä¹‰ä¸€äº›å…³äºç¼“å­˜ç­‰çš„é‡è¦å†…å®¹ã€‚å®ƒå¯ä»¥é…ç½®ä»¥ä¸‹å†…å®¹ï¼šæè¿°æ˜ å°„è§„åˆ™ï¼›æä¾› SQL è¯­å¥ï¼Œå¹¶å¯ä»¥é…ç½® SQL å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ã€ç¼“å­˜åˆ·æ–°ç­‰ä¿¡æ¯ï¼›é…ç½®ç¼“å­˜ï¼›æä¾›åŠ¨æ€ SQLã€‚</p> <p>æ³¨æ„ï¼Œ<strong>æ˜ å°„å™¨å¼€å‘åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®ç°ç±»</strong>ã€‚æ¥å£ä¸èƒ½ç›´æ¥è¿è¡Œã€‚MyBatis è¿ç”¨äº†<strong>åŠ¨æ€ä»£ç†æŠ€æœ¯</strong>ä½¿å¾—æ¥å£èƒ½è¿è¡Œèµ·æ¥ã€‚</p> <h2 id="mybatis-é…ç½®æ–‡ä»¶"><a href="#mybatis-é…ç½®æ–‡ä»¶" class="header-anchor">#</a> MyBatis é…ç½®æ–‡ä»¶</h2> <h3 id="é…ç½®æ–‡ä»¶ç»“æ„é¡ºåº"><a href="#é…ç½®æ–‡ä»¶ç»“æ„é¡ºåº" class="header-anchor">#</a> é…ç½®æ–‡ä»¶ç»“æ„é¡ºåº</h3> <p><strong>é…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»æŒ‰ç…§å›ºå®šçš„é¡ºåº</strong>ï¼š</p> <blockquote><p><code>properties</code>  -  <code>settings</code>   -  <code>typeAliases</code>  -  <code>typeHandlers</code>  -  <code>objectFactory</code>   -  <code>objectWrapperFactory</code>  -  <code>reflectorFactory</code>  -  <code>plugins</code>  -  <code>environments</code>  -   <code>databaseIdProvider</code>   -  <code>mappers</code></p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--é…ç½®--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--å±æ€§--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--è®¾ç½®--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--åˆ«å--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--ç±»å‹è½¬æ¢å™¨--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>objectFactory</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--å¯¹è±¡å·¥å‚ï¼ˆäº†è§£ï¼‰--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--æ’ä»¶ï¼ˆäº†è§£)--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--é€‚è¡Œç¯å¢ƒ--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--ç¯å¢ƒå˜é‡--&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--äº‹åŠ¡ç®¡ç†å™¨--&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>datasource</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--æ•°æ®æº--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>databaseldProvider</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆäº†è§£)--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--æ˜ å°„å™¨--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="properties-å…ƒç´ "><a href="#properties-å…ƒç´ " class="header-anchor">#</a> <code>properties</code>  å…ƒç´ </h3> <p>å¯ä»¥ç»™ç³»ç»Ÿé…ç½®ä¸€äº›è¿è¡Œå‚æ•°ã€‚</p> <ul><li>ä½¿ç”¨å…¶äºå…ƒç´   <code>&lt;property&gt;</code>  çš„  <code>name</code>  å’Œ  <code>value</code>  å±æ€§ï¼Œå»ºç«‹é”®å€¼å¯¹ã€‚ä¾‹å¦‚ï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysal.jdbc.Driver<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionlanager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionlanager</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${db.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ur1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/test<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">nane</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="settings-å…ƒç´ "><a href="#settings-å…ƒç´ " class="header-anchor">#</a> <code>settings</code>  å…ƒç´ </h3> <p><code>&lt;settings&gt;</code>  å¯ä»¥æ›´æ”¹ MyBatis æ¡†æ¶çš„ä¸€äº›é»˜è®¤å‚æ•°ï¼Œä»è€Œæ”¹å˜ MyBatis è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œå¦‚è‡ªåŠ¨æ˜ å°„ã€çº§è”è§„åˆ™ç­‰ã€‚</p> <p>ğŸŒ° ä¾‹å¦‚å¼€å¯è‡ªåŠ¨é©¼å³°è§„åˆ™ï¼ˆå°†è·å–åˆ°çš„å­—æ®µåè‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°è§„åˆ™å‘½åä»¥é€‚åº”å¯¹åº”å®ä½“ç±»ä¸­çš„å±æ€§åç§°ï¼‰ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapUnderscoreToCamelCase<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	&lt;/settingsï¼
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>settings</code>  å…ƒç´ çš„é…ç½®é¡¹å¾ˆå¤šï¼Œä½†æ˜¯çœŸæ­£ç”¨åˆ°çš„ä¸ä¼šå¤ªå¤šï¼Œæˆ‘ä»¬æŠŠå¸¸ç”¨çš„é…ç½®é¡¹ç ”ç©¶æ¸…æ¥šå°±å¯ä»¥äº†ã€‚</p> <h3 id="typealiases-å…ƒç´ "><a href="#typealiases-å…ƒç´ " class="header-anchor">#</a> <code>typeAliases</code>  å…ƒç´ </h3> <p><code>&lt;typeAliases&gt;</code>  å¦‚æœç±»çš„å…¨åå¾ˆé•¿ï¼Œåˆéœ€è¦å¤§é‡ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªç®€å†™æ¥ä»£æ›¿ï¼Œè¿™å°±æ˜¯åˆ«åã€‚MyBatis ä¸­åˆ«åä¸åŒºåˆ†å¤§å°å†™ã€‚</p> <p>MyBatis æ¡†æ¶å·±ç»é»˜è®¤ä¸ºè®¸å¤šå¸¸è§çš„ Java ç±»å‹æä¾›äº†ç›¸åº”çš„ç±»å‹åˆ«åä¸€äº›ç³»ç»Ÿå·²å®šä¹‰çš„åˆ«åï¼Œå¦‚  <code>String</code>  åˆ«å  <code>string</code>  ç­‰ã€‚</p> <p>å› ä¸º MyBatis ä¸­åˆ«åä¸åŒºåˆ†å¤§å°å†™ï¼Œæœ‰ä¸€äº›åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹çš„åç§°ä¸€æ ·ï¼ˆä¾‹å¦‚åŸºæœ¬æ•°æ®ç±»å‹  <code>byte</code>  å’ŒåŒ…è£…ç±»å‹  <code>java.lang.Byte</code>  ï¼‰ï¼Œæ‰€ä»¥åœ¨åŸºæœ¬çš„æ•°æ®ç±»å‹å‰é¢åŠ äº†ä¸‹åˆ’çº¿æ¥ä»¥æ­¤åŒºåˆ†ï¼ˆ  <code>byte</code>  åˆ«åå°±æ˜¯  <code>_byte</code>  ï¼Œ  <code>java.lang.Byte</code>  åˆ«åå°±æ˜¯  <code>byte</code>  ï¼‰ã€‚å¸¸è§çš„ç±»å‹å¯¹åº”åˆ«åå¦‚ä¸‹ï¼š</p> <p>è¯¦ç»†è®¾ç½®ï¼š</p> <p><code>typeAliases</code>  ï¼šè®¾ç½®æŸä¸ªå…·ä½“çš„ç±»å‹çš„åˆ«å</p> <p>ğŸŒ°ä¾‹å­ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mybatis.pojo.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶ååœ¨ mapper é…ç½®æ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨åˆ«åä»£è¡¨è¯¥ç±»å‹å…¨åï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--List&lt;User&gt; getAllUser();--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAllUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
select * from user
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>type</code> ï¼šéœ€è¦è®¾ç½®åˆ«åçš„ç±»å‹çš„å…¨ç±»åã€‚</li> <li><code>alias</code> ï¼šè®¾ç½®æ­¤ç±»å‹çš„åˆ«åã€‚è‹¥ä¸è®¾ç½®æ­¤å±æ€§ï¼Œè¯¥ç±»å‹æ‹¥æœ‰é»˜è®¤çš„åˆ«åï¼Œ<strong>å³ç±»åä¸”ä¸åŒºåˆ†å¤§å°å†™</strong>ï¼›è‹¥è®¾ç½®æ­¤å±æ€§ï¼Œæ­¤æ—¶è¯¥ç±»å‹çš„åˆ«ååªèƒ½ä½¿ç”¨  <code>alias</code>  æ‰€è®¾ç½®çš„å€¼</li></ul> <p>â­ï¸ æœ€å¸¸ç”¨ï¼šä»¥åŒ…ä¸ºå•ä½ï¼Œå°†åŒ…ä¸‹æ‰€æœ‰ç±»å‹è®¾ç½®é»˜è®¤çš„ç±»å‹åˆ«åï¼Œå³ç±»åä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mybatis.pojo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="typehandlers-å…ƒç´ "><a href="#typehandlers-å…ƒç´ " class="header-anchor">#</a> <code>typeHandlers</code>  å…ƒç´ </h3> <p><code>&lt;typeHandlers&gt;</code>  MyBatis æ ¹æ®æ•°æ®ç±»å‹é€šè¿‡ç±»å‹è½¬æ¢é€‚é…å™¨  <code>typeHandler</code>  æ¥å®ç°æ•°æ®ç±»å‹é—´çš„è½¬æ¢ã€‚</p> <ul><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ MyBatis ä¼šæ ¹æ®  <code>javaType</code>  å’Œæ•°æ®åº“çš„  <code>jdbcType</code>  æ¥å†³å®šé‡‡ç”¨å“ªä¸ª  <code>typeHandler</code>  å¤„ç†ç±»å‹è½¬æ¢ã€‚MyBatis å†…éƒ¨å·²ç»å®šä¹‰äº†è®¸å¤šæœ‰ç”¨çš„  <code>typeHandler</code> ï¼Œå®ç°å¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„è‡ªåŠ¨è½¬æ¢ã€‚</p></li> <li><p>å‚è€ƒï¼šè¡¨åˆ—å‡ºäº† MyBatis å†…ç½®çš„  <code>typeHandler</code>  å¤„ç†å™¨ã€‚</p></li> <li><p>ä½†æœ‰äº›åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚æ•°æ®åº“ä½¿ç”¨ç‰¹æ®Šç±»å‹ï¼Œä½¿ç”¨è‡ªå®šä¹‰æšä¸¾ç±»å‹ç­‰ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨è‡ªå®šä¹‰çš„ typeHandler æ¥å¤„ç†ç±»å‹ä¹‹é—´çš„è½¬æ¢é—®é¢˜ã€‚  <code>typeHandler</code>  å…ƒç´ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œè‡ªå®šä¹‰çš„ç±»å‹å¤„ç†å™¨ï¼Œå®ƒçš„ä½¿ç”¨æ–¹å¼å¯ä»¥ç”¨å®ƒçš„å­æ ‡ç­¾  <code>&lt;typeHandler&gt;</code>  æ³¨å†Œä¸€ä¸ªç±»çš„ç±»å‹å¤„ç†å™¨ã€‚</p></li></ul> <p>ğŸŒ° ä¾‹å¦‚æ•°æ®åº“ä¸­çš„  <code>user</code>  è¡¨æ€§åˆ«ä¸º M æˆ– F ï¼Œæˆ‘ä»¬åˆ©ç”¨è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨ä¸ç¨‹åºä¸­çš„ã€Œç”·ã€æˆ–ã€Œå¥³ã€ç›¸äº’è½¬æ¢ã€‚ï¼ˆè¯¦ç»†æ­¥éª¤å·²æŠ˜å ï¼‰</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹</summary> <ol><li>å…ˆå†™ä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢å™¨ MyTypeHandlerï¼Œè¿™ä¸ªç±»è¦å®ç°  <code>TypeHandler</code>  æ¥å£å¹¶å®ç°é‡Œé¢çš„å››ä¸ªè½¬æ¢æ–¹æ³•çš„å®šä¹‰ï¼ˆæˆ–è€…ç»§æ‰¿äº  <code>BaseTypeHandler</code>  åŸºç±»ï¼‰ã€‚</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SexTypeHandler</span> <span class="token keyword">implements</span> <span class="token class-name">TypeHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * æ ¹æ®Javaä¸­ç±»å‹ã€Œç”·ã€æˆ–è€…ã€Œå¥³ã€å‘æ•°æ®åº“å†™å…¥ã€ŒMã€æˆ–è€…ã€ŒFã€
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> preparedStatement<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">JdbcType</span> jdbcType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;M&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;N&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ ¹æ®æ•°æ®åº“åˆ—åç§°sæŸ¥æ‰¾åˆ°çš„ç»“æœä¸ºã€ŒMã€æˆ–è€…ã€ŒFã€ï¼Œè½¬ä¸ºJavaä¸­ä½¿ç”¨çš„ã€Œç”·ã€æˆ–è€…ã€Œå¥³ã€
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;M&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token string">&quot;æœªçŸ¥&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ ¹æ®æ•°æ®åº“åˆ—åºåˆ—å·æŸ¥æ‰¾åˆ°çš„ç»“æœä¸ºã€ŒMã€æˆ–è€…ã€ŒFã€ï¼Œè½¬ä¸ºJavaä¸­ä½¿ç”¨çš„ã€Œç”·ã€æˆ–è€…ã€Œå¥³ã€
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;M&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token string">&quot;æœªçŸ¥&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">CallableStatement</span> callableStatement<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> callableStatement<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;M&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token string">&quot;æœªçŸ¥&quot;</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><ol start="2"><li>åœ¨å…¨å±€é…ç½®æ–‡ä»¶  <code>mybatis-config.xml</code>  ä¸­ä½¿ç”¨  <code>typeHandler</code>  å­å…ƒç´ æ³¨å†Œè‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨ï¼š</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandler</span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CHAR<span class="token punctuation">&quot;</span></span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.simon.typeHandler.SexTypeHandler<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>æ³¨æ„ç‰¹å®šçš„å­—æ®µè¦ç¬¦åˆç‰¹å®šå­—æ®µçš„  <code>javaType</code>  ã€ <code>jdbcType</code>  ã€‚ä¸Šè¿°é…ç½®å¯¹äºæ•°æ®åº“çš„æ‰€æœ‰å­—æ®µèµ·ä½œç”¨ã€‚</p> <p>è¦å¯¹æŸä¸ªç‰¹å®šçš„å­—æ®µè¿›è¡Œè‡ªå®šä¹‰è½¬æ¢ï¼Œéœ€è¦é…åˆæ˜ å°„å™¨æ–‡ä»¶çš„ç›¸å…³æ³¨è§£ï¼ˆ[TODO]ï¼‰</p></div></details> <p>:::</p> <ul><li>ä¸  <code>&lt;typeAliases&gt;</code>  ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨  <code>&lt;typeHandlers&gt;</code>  çš„å­å…ƒç´   <code>&lt;package&gt;</code> <strong>å¯¼å…¥åŒ…ä¸­æ‰€æœ‰çš„è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨</strong>æ¥å®ç°ã€‚</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.simon.typeHandler<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeHandlers</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä½†æ˜¯è¿™æ ·æ²¡æ³•æŒ‡å®š  <code>jdbcType</code>  å’Œ  <code>javaType</code>  äº†ï¼Œæ­¤æ—¶å°±éœ€è¦åœ¨è‡ªå®šä¹‰çš„  <code>TypeHandler</code>  ç±»ä¸Š<strong>ä½¿ç”¨æ³¨è§£</strong>å£°æ˜ä¸€ä¸‹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@MappedTypes</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@MappedJdbcTypes</span><span class="token punctuation">(</span><span class="token class-name">JdbcType</span><span class="token punctuation">.</span>CHAR<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="objectfactory-å…ƒç´ "><a href="#objectfactory-å…ƒç´ " class="header-anchor">#</a> <code>objectFactory</code>  å…ƒç´ </h3> <p>MyBatis æ¯æ¬¡åˆ›å»ºç»“æœå¯¹è±¡çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚å®ä¾‹æ¥å®Œæˆã€‚å¦‚æœæƒ³è¦†ç›–å¯¹è±¡å·¥å‚çš„é»˜è®¤è¡Œä¸ºï¼Œåˆ™å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„å¯¹è±¡å·¥å‚æ¥å®ç°ã€‚</p> <p>ğŸŒ° ä¾‹å¦‚å…ˆå†™ä¸€ä¸ªè‡ªå®šä¹‰çš„å¯¹è±¡å·¥å‚  <code>MyObjectFactory</code>  ï¼Œè¿™ä¸ªç±»ç»§æ‰¿äº†   <code>DefaultObjectFactory</code> ã€‚</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹</summary> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>ç„¶åå†å…¨å±€é…ç½®æ–‡ä»¶  <code>mybatis-config.xml</code>  ä¸­æ³¨å†Œè‡ªå®šä¹‰å·¥å‚ï¼Œå¹¶ä¸”å…¶å­å…ƒç´   <code>&lt;property&gt;</code>  ä¸­è¿›è¡Œå¯¹è±¡å·¥å‚çš„åˆå§‹å€¼è®¾ç½®ï¼ˆä¸‹é¢å®ä¾‹å±æ€§  <code>prop</code>  ï¼‰ï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>objectFactory</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.simon.objectFactory.MyObjectFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prop<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>objectFactory</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>è¿è¡Œåçš„ç»“æœï¼Œå¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰å¯¹è±¡å·¥å‚èµ·ä½œç”¨äº†ï¼Œæœ‰ 1 ä¸ª users å’Œ 5 ä¸ªç›¸åŒçš„ userï¼š</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/9t2ev3.png" alt="image-20220322111229075"></p></details> <h3 id="plugins-å…ƒç´ "><a href="#plugins-å…ƒç´ " class="header-anchor">#</a> <code>plugins</code>  å…ƒç´ </h3> <p>MyBatis å…è®¸åœ¨å·²æ˜ å°„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸€ç‚¹è¿›è¡Œæ‹¦æˆªè°ƒç”¨ï¼Œè¿™ç§æ‹¦æˆªè°ƒç”¨æ˜¯é€šè¿‡æ’ä»¶æ¥å®ç°çš„ã€‚ <code>&lt;plugins&gt;</code>  å…ƒç´ çš„ä½œç”¨å°±æ˜¯é…ç½®ç”¨æˆ·æ‰€<br>
å¼€å‘çš„æ’ä»¶ã€‚</p> <p>å¦‚æœç”¨æˆ·æƒ³è¦è¿›è¡Œæ’ä»¶å¼€å‘ï¼Œå¿…é¡»è¦å…ˆäº†è§£å…¶å†…éƒ¨è¿è¡ŒåŸç†ï¼Œå› ä¸ºåœ¨è¯•å›¾ä¿®æ”¹æˆ–é‡å†™å·±æœ‰æ–¹æ³•çš„è¡Œä¸ºæ—¶ï¼Œå¾ˆå¯èƒ½ä¼šç ´å MyBatis åŸæœ‰çš„æ ¸å¿ƒæ¨¡å—ï¼Œæ‰€ä»¥åŠ¡å¿…å°å¿ƒã€‚</p> <p>ğŸŒ° ä¾‹å­ï¼šè‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼š</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹</summary> <ul><li>å…ˆå†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ï¼Œè¿™ä¸ªç±»è¦ç»§æ‰¿  <code>Interceptor</code> ã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ‹¦æˆªå™¨æ ‡è¯†æ³¨è§£</span>
<span class="token annotation punctuation">@Intercepts</span><span class="token punctuation">(</span>
        <span class="token comment">// æŒ‡æ˜è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦æ‹¦æˆªå“ªä¸€ä¸ªç±»å‹å“ªä¸€ä¸ªæ–¹æ³•</span>
        <span class="token annotation punctuation">@Signature</span><span class="token punctuation">(</span>
                type <span class="token operator">=</span> <span class="token class-name">StatementHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// éœ€è¦æ‹¦æˆªçš„ç±»</span>
                method <span class="token operator">=</span> <span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ç±»ä¸­çš„æ–¹æ³•</span>
                args <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Statement</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span> <span class="token comment">// å› æ–¹æ³•æœ‰é‡è½½éœ€è¦æŒ‡æ˜ç±»å‹</span>
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token keyword">implements</span> <span class="token class-name">Interceptor</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Properties</span> properties<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‹¦æˆªå™¨å‚æ•°ï¼š&quot;</span> <span class="token operator">+</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;prop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> target <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¢«ä»£ç†å¯¹è±¡</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»£ç†æ–¹æ³•</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•å‚æ•°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢æ‰§è¡Œæ‹¦æˆª&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•æ‹¦æˆªå‰æ‰§è¡Œä»£ç å—</span>
        <span class="token class-name">Object</span> proceed <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢æ‰§è¡Œåæ‹¦æˆª&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•æ‹¦æˆªåæ‰§è¡Œä»£ç å—</span>
        <span class="token keyword">return</span> proceed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">plugin</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Plugin</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤æ–¹æ³•ç”Ÿæˆä»£ç†å¯¹è±¡</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProperties</span><span class="token punctuation">(</span><span class="token class-name">Properties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span> <span class="token comment">// é…ç½®æ‹¦æˆªå™¨å˜é‡</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li>ğŸ”— ç›¸å…³é“¾æ¥ï¼šæ‹¦æˆªå™¨æ³¨è§£çš„è§„åˆ™</li></ul> <p><code>@Intercepts</code> ï¼šæ ‡è¯†è¯¥ç±»æ˜¯ä¸€ä¸ªæ‹¦æˆªå™¨</p> <p><code>@Signature</code> ï¼šæŒ‡æ˜è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦æ‹¦æˆªå“ªä¸€ä¸ªç±»å‹ï¼Œå“ªä¸€ä¸ªæ–¹æ³•ï¼›</p> <ul><li><code>type</code> ï¼šå¯¹åº”å››ç§ç±»å‹ä¸­çš„ä¸€ç§ï¼›</li> <li><code>method</code> ï¼šå¯¹åº”æ¥å£ä¸­çš„å“ªç±»æ–¹æ³•ï¼ˆå› ä¸ºå¯èƒ½å­˜åœ¨é‡è½½æ–¹æ³•ï¼‰ï¼›</li> <li><code>args</code> ï¼šå¯¹åº”å“ªä¸€ä¸ªæ–¹æ³•ï¼›</li></ul> <table><thead><tr><th>æ‹¦æˆªçš„ç±»</th> <th>æ‹¦æˆªçš„æ–¹æ³•</th></tr></thead> <tbody><tr><td>Executor</td> <td>update, query, flushStatements, commit, rollback,getTransaction, close, isClosed</td></tr> <tr><td>ParameterHandler</td> <td>getParameterObject, setParameters</td></tr> <tr><td>StatementHandler</td> <td>prepare, parameterize, batch, update, query</td></tr> <tr><td>ResultSetHandler</td> <td>handleResultSets, handleOutputParameters</td></tr></tbody></table> <ul><li>ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶å­å…ƒç´   <code>&lt;property&gt;</code>  ä¸­è¿›è¡Œæ‹¦æˆªå™¨çš„å‚æ•°è®¾ç½®ï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.simon.plugin.MyPlugin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prop<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>interceptor<span class="token punctuation">'</span>s parameter<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>è¿è¡Œåçš„ç»“æœï¼š<img src="https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/bk540j.png" alt="image-20220322113005849"></li></ul></details> <h3 id="environments-å…ƒç´ "><a href="#environments-å…ƒç´ " class="header-anchor">#</a> <code>environments</code>  å…ƒç´ </h3> <p>è¿è¡Œç¯å¢ƒç©ºé—´ï¼Œä¸»è¦æ˜¯é…ç½®æ•°æ®åº“ä¿¡æ¯ï¼Œç©ºé—´é‡Œå¯ä»¥é…ç½®å¤šä¸ªæ•°æ®åº“ï¼Œä¸€èˆ¬è€Œè¨€å¤§å¤šåªéœ€è¦é…ç½®ä¸€ä¸ªæ•°æ®åº“çš„è¿è¡Œç¯å¢ƒå°±å¯ä»¥äº†ã€‚è¿è¡Œç¯å¢ƒä¸‹é¢åˆåˆ†ä¸ºä¸¤ä¸ªå¯é…ç½®å…ƒç´ ï¼šäº‹åŠ¡ç®¡ç†å™¨ï¼ˆtransactionManagerï¼‰å’Œæ•°æ®æºï¼ˆdataSourceï¼‰ã€‚</p> <p>å…¶å®åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¹¶ä¸éœ€è¦åœ¨æ­¤å¤„é…ç½®æ•°æ®åº“ï¼Œå¤§éƒ¨åˆ†æ˜¯ä½¿ç”¨ Spring å¯¹æ•°æ®æºå’Œæ•°æ®åº“äº‹åŠ¡è¿›è¡Œç®¡ç†çš„ã€‚</p> <p>ğŸŒ° ä¾‹å­ï¼š</p> <p>é…ç½®å¤šä¸ªè¿æ¥æ•°æ®åº“çš„ç¯å¢ƒï¼Œ <code>defalut</code>  å±æ€§è®¾ç½®é»˜è®¤çš„ç¯å¢ƒæ ‡è¯†ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatis_demo?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>00000000<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><p><code>environment</code>  æ ‡ç­¾ä¸‹çš„æ ‡ç­¾ï¼Œé…ç½®æŸä¸ªå…·ä½“çš„é“¾æ¥æ•°æ®åº“ç¯å¢ƒï¼Œä½¿ç”¨  <code>id</code>  å”¯ä¸€æ ‡è¯†ã€‚</p> <ul><li><code>transactionManager</code>  è®¾ç½®äº‹åŠ¡ç®¡ç†çš„æ–¹å¼ï¼Œå±æ€§  <code>type=â€œJDBC | MANAGEDâ€</code>  ï¼š <code>JDBC</code>  è¡¨ç¤ºå½“å‰ç¯å¢ƒä¸­ï¼Œæ‰§è¡Œ SQL æ—¶ä½¿ç”¨ JDBC ä¸­çš„åŸç”Ÿäº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œäº‹åŠ¡çš„æäº¤æˆ–è€…å›æ»šéœ€è¦æ‰‹åŠ¨å¤„ç†ï¼› <code>MANAGED</code>  è¡¨ç¤ºäº‹åŠ¡è¢«ç®¡ç†ï¼ˆä¾‹å¦‚ Springï¼‰ã€‚</li> <li><code>dataSource</code>  é…ç½®æ•°æ®æºï¼Œå±æ€§  <code>type=&quot;POOLED|UNPOOLED|JNDI&quot;</code>  è®¾ç½®æ•°æ®æºçš„ç±»å‹ï¼š <code>POOLED</code>  è¡¨ç¤ºä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ç¼“å­˜æ•°æ®åº“è¿æ¥ï¼Œ <code>UNPOOLED</code>  è¡¨ç¤ºä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œ <code>JNDI</code>  è¡¨ç¤ºä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®æºã€‚ï¼ˆä¸ SSM æ•´åˆåï¼ŒMyBatis ä¸å†éœ€è¦è®¾ç½®æ•°æ®æºï¼‰</li></ul></li> <li><p><code>properties</code> ï¼šåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶å¤´å¼•å…¥ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>jdbc.properties</code>  æ–‡ä»¶åŒ…å« JDBC è¿æ¥ä¿¡æ¯ï¼š</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">jdbc.driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis_demo?useUnicode=true&amp;amp;characterEncoding=utf8</span>
<span class="token attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token attr-value">*******</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶  <code>dataSource</code>  ä¸­å°±å¯ä»¥è¯»å–  <code>.properties</code>  ä¸­çš„ä¿¡æ¯ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="databasedprovider-å…ƒç´ "><a href="#databasedprovider-å…ƒç´ " class="header-anchor">#</a> <code>databasedProvider</code>  å…ƒç´ </h3> <p>è½¯ä»¶å…¬å¸å¯ä»¥åŒæ—¶ä¸ºä¸åŒçš„å®¢æˆ·æä¾›ç³»ç»Ÿï¼Œä½¿ç”¨ä½•ç§æ•°æ®åº“æƒ…å†µä¸‹è¿è¡Œå“ªäº›è¯­å¥å¯ç”±å®¢æˆ·å†³å®šã€‚</p> <details class="custom-block details"><summary>ç‚¹å‡»æŸ¥çœ‹</summary> <p>ğŸŒ° ä¾‹å­ï¼š</p> <ul><li>åœ¨å…¨å±€é…ç½®æ–‡ä»¶  <code>mybatis-config.xml</code>  ä¸­ï¼šï¼ˆå…¶ä¸­  <code>name</code>  æ˜¯æ•¸æ®åº“åç§°ï¼Œ <code>value</code>  æ˜¯å®ƒçš„ä¸€ä¸ªåˆ«åï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨è¿™ä¸ªåˆ«åæ ‡è¯†ä¸€æ¡ SQL é€‚ç”¨äºå“ªä¸€ç§æ•°æ®åº“ä¸‹è¿è¡Œã€‚</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>databaseIdProvider</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DB_VENDOR<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MySQL<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Oracle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oracle<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>databaseIdProvider</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ä¿®æ”¹ Mapper æ–‡ä»¶ï¼ˆä»¥  <code>UserMapper.xml</code>  ä¸ºä¾‹å­ï¼‰ï¼Œæ ¹æ®ä¸åŒçš„æ•°æ®åº“è¿è¡Œä¸åŒçš„ SQL è¯­å¥ï¼š</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAllUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">databaseId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where sex = 'M'
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAllUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">databaseId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oracle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where sex = 'F'
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ­¤æ—¶ä»¥ä½¿ç”¨ MySQL æ•°æ®åº“çš„æœºå™¨ä¸ºä¾‹å­ï¼Œæ‰€ä»¥åªä¼šè¿è¡Œç¬¬ä¸€æ¡é…ç½®çš„ SQL è¯­å¥ã€‚</p></details> <h3 id="mappers-å…ƒç´ "><a href="#mappers-å…ƒç´ " class="header-anchor">#</a> <code>mappers</code>  å…ƒç´ </h3> <p>MyBatis éœ€è¦å¼€å‘è€…è‡ªå·±å†™ SQL è¯­å¥ï¼Œmapper æ˜ å°„å™¨æ­£æ˜¯å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ï¼Œè¿›è€Œæ‰¾åˆ°è¿™äº› SQL è¯­å¥ã€‚</p> <p>æœ‰å››ç§æ–¹æ³•å¯ä»¥å¼•å…¥ mapper æ˜ å°„æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--ä½¿ç”¨ç±»è·¯å¾„--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>simon/UserMapper.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token comment">&lt;!--ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼ˆç»å¯¹è·¯å¾„ï¼‰--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>/Users/Simon/*/src/main/resources/com/simon/mapper/UserMapper.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token comment">&lt;!--ä½¿ç”¨åŒ…å--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>myij<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token comment">&lt;!--ä½¿ç”¨æ¥å£ç±»--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>myj.UserMapper<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ï¼ˆå¯ä»¥ç›´æ¥ä»¥åŒ…ä¸ºå•ä½å¼•å…¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†è¦æ³¨æ„ä¸€è‡´é—®é¢˜ï¼‰</p> <p>ğŸŒ° ä¾‹å­ï¼šä»¥åŒ…ä¸ºå•ä½å¼•å…¥æ˜ å°„æ–‡ä»¶ï¼š</p> <ul><li><p><strong>è¦æ±‚ mapper æ¥å£çš„åŒ…ä¸æ˜ å°„æ–‡ä»¶æ‰€åœ¨çš„åŒ…ä¸€è‡´</strong>ã€‚</p></li> <li><p>**mapper æ¥å£è¦å’Œæ˜ å°„æ–‡ä»¶çš„åå­—ä¸€è‡´ **ã€‚</p> <img src="https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/414Gec.png" alt="image-20220303160137491" style="zoom:50%;"></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mybatis.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/simon1uo/notebook/edit/master/docs/300. ğŸ§° å…¶ä»–å­¦ä¹ ç¬”è®°/10. ğŸ§‹ Java SSM ç›¸å…³/01. ğŸ—º MyBatis/02. ğŸ›  MyBatis é…ç½®æ–‡ä»¶.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ğŸ“¢ ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/06/30, 22:33:11</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/notebook/pages/d16430/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">ğŸš€ Mybatis åŸºç¡€</div></a> <a href="/notebook/pages/269652/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">ğŸª MyBatis æ˜ å°„æ–‡ä»¶</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
                â†
                <a href="/notebook/pages/d16430/" class="prev">ğŸš€ Mybatis åŸºç¡€</a></span> <span class="next"><a href="/notebook/pages/269652/">ğŸª MyBatis æ˜ å°„æ–‡ä»¶</a>â†’
            </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
        Copyright Â© 2020-2022
        |
        <span></span>

    theme on based
    <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="theme">Vdoing</a> powered By Vuepress
</div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
                    è·Ÿéšç³»ç»Ÿ
                </li><li class="iconfont icon-rijianmoshi">
                    æµ…è‰²æ¨¡å¼
                </li><li class="iconfont icon-yejianmoshi">
                    æ·±è‰²æ¨¡å¼
                </li><li class="iconfont icon-yuedu">
                    é˜…è¯»æ¨¡å¼
                </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
        <script src="/notebook/assets/js/app.6a815fb9.js" defer></script><script src="/notebook/assets/js/2.ddc7fe92.js" defer></script><script src="/notebook/assets/js/3.cf638cd2.js" defer></script><script src="/notebook/assets/js/239.a1ad0e83.js" defer></script>
    </body>
</html>
