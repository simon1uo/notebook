---
title: ğŸš€ Mybatis åŸºç¡€
date: 2022-02-28 15:00:47
permalink: /pages/d16430/
categories: 
  - ğŸ§‹ JavaEE
  - MyBatis
tags: 
  - MyBatis
  - SSM
  - æ¡†æ¶
author: 
  name: Simon
  link: https://github.com/simon1uo
---
ğŸ”— **ç›¸å…³é“¾æ¥**ï¼š

+ ğŸ“‘ Mybatis æ–‡æ¡£ï¼š[mybatis â€“ MyBatis 3 | Getting started](https://mybatis.org/mybatis-3/getting-started.html)
  + ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£ï¼š[mybatis â€“ MyBatis 3 | å…¥é—¨](https://mybatis.org/mybatis-3/zh/getting-started.html)
+ ğŸ“¦ MyBatis Githubï¼š[mybatis/mybatis-3: MyBatis SQL mapper framework for Java (github.com)](https://github.com/mybatis/mybatis-3)
+ ğŸ¿ é…åˆæœ¬ç¬”è®°é£Ÿç”¨è§†é¢‘æ¨èï¼š[ã€å°šç¡…è°·ã€‘2022ç‰ˆMyBatisæ•™ç¨‹ï¼ˆç»†è‡´å…¨é¢ï¼Œå¿«é€Ÿä¸Šæ‰‹ï¼‰](https://www.bilibili.com/video/BV1VP4y1c7j7)

## Mybatis ç‰¹æ€§

+ æ˜¯æ”¯æŒ**å®šåˆ¶åŒ– SQL** ã€**å­˜å‚¨è¿‡ç¨‹**ä»¥åŠ**é«˜çº§æ˜ å°„**çš„ä¼˜ç§€æŒä¹…æ¡†æ¶ã€‚
+ é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚
+ å¯ä»¥ä½¿ç”¨ç®€å•çš„ XM L æˆ–è€…æ³¨è§£ç”¨äºé…åˆ¶å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’Œ Java çš„ POJO ï¼ˆ*æ™®é Java å¯¹è±¡*ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚
+ æ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨çš„ ORM æ¡†æ¶ã€‚

> ç›¸å…³æ¦‚å¿µï¼š
>
> + æŒä¹…åŒ–ï¼šå°†æ•°æ®ä¿å­˜åœ¨å¯æ‰ç”µçš„å­˜å‚¨ä»‹è´¨ä¸Šã€‚
> + æŒä¹…å±‚ï¼šå°†ä¸šåŠ¡æ•°æ®å­˜å‚¨åˆ°ç¡¬ç›˜ï¼Œå…·å¤‡é•¿æœŸå­˜å‚¨èƒ½åŠ›ï¼ˆåªè¦ç¡¬ç›˜ä¸æŸåï¼Œå¤§éƒ¨åˆ†é‡è¦æ•°æ®éƒ½æœ‰ç›¸å…³çš„å¤‡ä»½æœºåˆ¶ï¼‰ï¼Œæ–­ç”µæˆ–è€…å…¶ä»–æƒ…å†µé‡æ–°å¼€å¯ç³»ç»Ÿä»ç„¶å¯ä»¥è¯»å–æ•°æ®ã€‚



**ä¸å…¶ä»–æŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”**ï¼š

+ JDBCï¼šï¼ˆ*æ˜¯è§„èŒƒï¼Œä¸æ˜¯æ¡†æ¶ï¼‰
  + SQL å¤¹æ‚åœ¨ Java ä»£ç ä¸­**è€¦åˆåº¦é«˜**ï¼Œå¯¼è‡´ç¡¬ç¼–ç å†…ä¼¤ã€‚
  + ç»´æŠ¤ä¸æ˜“ä¸”å®é™…å¼€å‘éœ€æ±‚ä¸­ SQL æœ‰å˜åŒ–ï¼Œé¢‘ç¹ä¿®æ”¹çš„æƒ…å†µå¤šè§ã€‚
  + ä»£ç å†—é•¿ï¼Œå¼€å‘æ•ˆç‡ä½ã€‚
+ Hiberante å’Œ JPA
  + æ“ä½œç®€ä¾¿ï¼Œå¼€å‘æ•ˆç‡é«˜ã€‚
  + ç¨‹åºä¸­çš„é•¿éš¾å¤æ‚ SQL éœ€è¦ç»•è¿‡æ¡†æ¶ã€‚
  + å†…éƒ¨è‡ªåŠ¨ç”Ÿäº§çš„SQLï¼Œä¸å®¹æ˜“åšç‰¹æ®Šä¼˜åŒ–ã€‚
  + åŸºäºå…¨æ˜ å°„çš„**å…¨è‡ªåŠ¨æ¡†æ¶**ï¼Œå¤§é‡å­—æ®µçš„ POJO è¿›è¡Œéƒ¨åˆ†æ˜ å°„æ—¶æ¯”è¾ƒå›°éš¾ã€‚
  + åå°„æ“ä½œå¤ªå¤šï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™ã€‚
+ ğŸŒŸ **MyBatis**ï¼š
  + è½»é‡çº§ã€æ€§èƒ½å‡ºè‰²ã€‚
  + SQL å’Œ Java ç¼–ç åˆ†å¼€ï¼ŒåŠŸèƒ½è¾¹ç•Œæ¸…æ™°ï¼ŒJava ä»£ç ä¸“æ³¨ä¸šåŠ¡ã€SQLè¯­å¥ä¸“æ³¨æ•°æ®ã€‚
  + å¼€å‘æ•ˆç‡ç¨é€Šäº Hibernateï¼Œä½†å®Œå…¨èƒ½æ¥å—ã€‚



## My Batiste æ­å»ºã€ä½¿ç”¨ã€æµ‹è¯•


### ç¯å¢ƒæ­å»ºä¸é…ç½®

+ è®¾ç½® maven çš„æ‰“åŒ…æ–¹å¼ä¸º `jar` ï¼š

  ```xml
  <packaging>jar</packaging>
  ```

+ maven **å¼•å…¥ä¾èµ–**ï¼š

  ```xml
  <dependencies>
    <!-- Mybatisæ ¸å¿ƒ -->
    <dependency>
      <groupId>org.mybatis</groupId>
      <artifactId>mybatis</artifactId>
      <version>3.5.7</version>
    </dependency>
    <!-- junitæµ‹è¯• -->
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.12</version>
      <scope>test</scope>
    </dependency>
    <!-- MySQLé©±åŠ¨ -->
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.3</version>
    </dependency>
  </dependencies>
  ```

+ åˆ›å»º**æ ¸å¿ƒé…ç½®æ–‡ä»¶** ï¼ˆ**ä¸€èˆ¬åœ¨ Spring æ•´åˆæ—¶ï¼Œä¼šå¿½ç•¥ä»¥ä¸‹é…ç½®ï¼‰ï¼š

  + ç”¨äºé…åˆ¶è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒä»¥åŠ MyBatis çš„å…¨å±€é…ç½®ä¿¡æ¯
  + å­˜æ”¾çš„ä½ç½®ä¸º `src/main/resources`

  ```xml
  <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE configuration
          PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
          "http://mybatis.org/dtd/mybatis-3-config.dtd">
  <configuration>
      <!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ-->
      <environments default="development">
          <environment id="development">
              <transactionManager type="JDBC"/>
              <dataSource type="POOLED">
                  <property name="driver" value="com.mysql.jdbc.Driver"/>
                  <property name="url"
                            value="jdbc:mysql://localhost:3306/MyBatis"/>
                  <property name="username" value="root"/>
                  <property name="password" value="********"/>
              </dataSource>
          </environment>
      </environments>
      <!--å¼•å…¥æ˜ å°„æ–‡ä»¶-->
      <mappers>
          <mapper resource="mappers/UserMapper.xml"/>
      </mappers>
  </configuration>
  ```

+ ç¼–å†™ mapper æ¥å£ï¼š

  mapper æ¥å£ç›¸å½“äº DAOï¼Œä½†åŒºåˆ«æ˜¯ mapper ä¸éœ€è¦æä¾›å®ç°ç±»ã€‚ï¼ˆä¸ POJO å¯¹åº”çš„ mapperï¼‰

  ä¾‹å¦‚ï¼š

  ```java
  public interface UserMapper {
    // ...
  }
  ```

+ åˆ›å»º MyBatis æ˜ å°„æ–‡ä»¶ï¼šç”¨äºç¼–å†™ SQL è¯­å¥ï¼Œè®¿é—®ã€æ“ä½œè¡¨ä¸­çš„æ•°æ®ã€‚å­˜æ”¾ä½ç½®ï¼š`src/main/resources/mappers` ç›®å½•ä¸‹ã€‚

  > **ç›¸å…³æ¦‚å¿µ / è§„åˆ™**ï¼š
  >
  > + ORMï¼ˆObject Relationship Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ï¼›
  >
  >   å¯¹è±¡ï¼šå®ä½“ç±»å¯¹è±¡ 
  >
  >   å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“
  >
  >   æ˜ å°„ï¼šä¸¤è€…å¯¹åº”å…³ç³»
  >
  >   | Java ä¸­ | æ•°æ®åº“ä¸­  |
  >   | ------- | --------- |
  >   | ç±»      | æ•°æ®è¡¨    |
  >   | å±æ€§    | å­—æ®µ / åˆ— |
  >   | å¯¹è±¡    | è®°å½• / è¡Œ |
  >
  > + **æ˜ å°„æ–‡ä»¶å‘½åè§„åˆ™**ï¼šä»¥è¡¨å¯¹åº”çš„å®ä½“ç±»çš„ `ç±»å` + `Mapper.xml` ï¼Œä¾‹å¦‚è¡¨å `t_user` ï¼Œæ˜ å°„çš„å®ä½“ç±»ä¸º `User` åˆ™æ˜ å°„æ–‡ä»¶å‘½åä¸º `UserMapper.xml`ã€‚**ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªå®ä½“ç±»ï¼Œ å¯¹åº”ä¸€å¼ è¡¨çš„æ“ä½œ**ã€‚
  >
  > + MyBatis å¯ä»¥é¢å‘æ¥å£æ“ä½œæ•°æ®ï¼Œè¦ä¿æŒã€Œ**ä¸¤ä¸ªä¸€è‡´**ã€ï¼š
  >
  >   + mapper **æ¥å£çš„å…¨ç±»å**å’Œæ˜ å°„æ–‡ä»¶å‘½åç©ºé—´ï¼ˆ`namespace`ï¼‰ä¿æŒä¸€è‡´ã€‚
  >   + mapper æ¥å£ä¸­çš„æ–¹æ³•çš„æ–¹æ³•åå’Œæ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™ SQL çš„æ ‡ç­¾**idå±æ€§**ä¿æŒä¸€è‡´ã€‚

	ğŸŒ°ä¾‹å¦‚ï¼š

  1. é…ç½®æ–‡ä»¶ `UserMapper.xml` ï¼š

  ```xml
  <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE mapper
          PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.mybatis.mapper.UserMapper">
      <!--int insertUser();-->
      <insert id="insertUser">
          insert into user(username) values ('å¼ ä¸‰')
      </insert>
	</mapper>
  ```
  2. æ¥å£ `UserMapper`ï¼š

  ```java
  public interface UserMapper {
      int insertUser(); // æ·»åŠ ç”¨æˆ·ä¿¡æ¯
  }
  ```

### æµ‹è¯•

+ é€šè¿‡ junit æµ‹è¯•ï¼š

  > **ç›¸å…³æ¦‚å¿µ**ï¼š
  >
  > + `SqlSession`ï¼šä»£è¡¨ **Java ç¨‹åºå’Œæ•°æ®åº“**ä¹‹é—´çš„ä¼šè¯ã€‚ï¼ˆåŒºåˆ« `HttpSession` æ˜¯ Java ç¨‹åºä¸æµè§ˆå™¨ä¹‹é—´çš„ä¼šè¯ï¼‰ï¼›é»˜è®¤ä¸è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œé€šè¿‡è®¾ç½®å‚æ•° `OpenSession(true)` å®ç°è‡ªåŠ¨æäº¤äº‹åŠ¡ã€‚
  > + `SqlSessionFactory` ï¼šç”Ÿäº§ `SqlSession` çš„ã€Œå·¥å‚ã€ã€‚

  ğŸŒ°ï¼š ä¾‹å¦‚ï¼Œåœ¨ `src/test/java` ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±» `MyBatisTest`ï¼š

  ```java
  public class MyBatisTest {
      @Test
      public void testMyBatis() throws IOException {
          // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶
          InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
          // åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡
          SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();
          // é€šè¿‡æ ¸å¿ƒé…ç½®æ–‡ä»¶æ‰€å¯¹åº”çš„å­—èŠ‚è¾“å…¥æµåˆ›å»ºå·¥å‚ç±»SqlSessionFactoryï¼Œç”Ÿäº§SqlSessionå¯¹è±¡
          SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);
          // åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œæ·»åŠ trueå‚æ•°å®ç°è‡ªåŠ¨æäº¤
          SqlSession sqlSession = sqlSessionFactory.openSession(true);
          // é€šè¿‡ä»£ç†æ¨¡å¼åˆ›å»ºUserMapperæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡
          UserMapper mapper = sqlSession.getMapper(UserMapper.class); 
          // æµ‹è¯•åŠŸèƒ½
          int result = mapper.insertUser(); 
          // è°ƒç”¨UserMapperä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥æ ¹æ®UserMapperä¸­çš„å…¨ç±»ååŒ¹é…å…ƒç´ æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨çš„æ–¹æ³•ååŒ¹é…æ˜ å°„æ–‡ä»¶ä¸­çš„SQLæ ‡ç­¾ï¼Œå¹¶æ‰§è¡Œæ ‡ç­¾ä¸­çš„SQLè¯­å¥
          // æäº¤äº‹åŠ¡
          // sqlSession.commit();
          System.out.println(result);
      }
  }
  ```
  
  > MyBatis è¿è¡Œæµç¨‹ï¼š
  > <img src="https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/HskP9r.png" alt="image-20220307202719285" style="zoom:50%;" />
  >
  > ç›¸å…³é˜…è¯»ï¼š [ğŸš• Java ä»£ç†æ¨¡å¼](/pages/f43979/) | [ğŸ”§ MyBatis æ ¸å¿ƒç»„ä»¶](/pages/d36c99/) 

### æ—¥å¿—åŠŸèƒ½

+ åŠ å…¥ **log4j** æ—¥å¿—åŠŸèƒ½ï¼š

  1. æ·»åŠ  **maven** ä¾èµ–ï¼š

     ```xml
     <!-- log4j -->
     <dependency>
     	<groupId>log4j</groupId>
     	<artifactId>log4j</artifactId>
     	<version>1.2.17</version>
     </dependency>
     ```

  2. åœ¨ `src/main/resources` ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶ `log4j.xml`:

     ```xml
     <?xml version="1.0" encoding="UTF-8" ?>
     <!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
     <log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
         <appender name="STDOUT" class="org.apache.log4j.ConsoleAppender">
             <param name="Encoding" value="UTF-8" />
             <layout class="org.apache.log4j.PatternLayout">
                 <param name="ConversionPattern" value="%-5p %d{MM-dd HH:mm:ss,SSS}
     %m (%F:%L) \n" />
             </layout>
         </appender>
         <logger name="java.sql">
             <level value="debug" />
         </logger>
         <logger name="org.apache.ibatis">
             <level value="info" />
         </logger>
         <root>
             <level value="debug" />
             <appender-ref ref="STDOUT" />
         </root>
     </log4j:configuration>
     ```

     > æ—¥å¿—çº§åˆ«ï¼šï¼ˆ**ä»å·¦åˆ°å³**æ‰“å°çš„å†…å®¹è¶Šæ¥è¶Šè¯¦ç»†ï¼‰
     >
     > `fatal`ï¼ˆè‡´å‘½ï¼‰> `error`ï¼ˆé”™è¯¯ï¼‰> `warn`ï¼ˆè­¦å‘Šï¼‰> `info`ï¼ˆä¿¡æ¯ï¼‰> `debug`ï¼ˆè°ƒè¯•ï¼‰

ğŸŒ°ï¼š ä½¿ç”¨ log4j å¯ä»¥è®°å½• MyBatis è¿è¡Œçš„ SQL è¯­å¥å’Œä½¿ç”¨çš„å‚æ•°ï¼Œæ–¹ä¾¿ debugï¼š
![image-20220304145920433](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/ZdQGp6.png)

## MyBatis å¢åˆ æ”¹æŸ¥


ğŸŒ°ï¼šä»¥å¯¹ä¸€ä¸ª `User` è¡¨ä¸ºä¾‹ï¼š

+ `com.*.pojo.User` å®ä½“ç±»ï¼š

```java
public class User {

    private Integer id;
    private String username;
    private String password;
    private Integer age;
    private String sex;
    private String email;
  
  // ... getter and setter
}
```

+ `com.*.mapper.UserMapper` ï¼ˆmapper æ¥å£ï¼‰ï¼š

```java
public interface UserMapper {

    int insertUser(); // æ·»åŠ ç”¨æˆ·

    void updateUser(); // ä¿®æ”¹ç”¨æˆ·

    void deleteUser(); // åˆ é™¤ç”¨æˆ·

    User getUserById(); // é€šè¿‡idæŸ¥è¯¢ç”¨æˆ·
}
```

+ `src/main/resources/mappers` ç›®å½•ä¸‹çš„  `UserMapper.xml`ï¼ˆmapper é…ç½®ï¼‰ï¼š

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.UserMapper">
    <!--int insertUser();-->
    <insert id="insertUser">
        insert into user(username)
        values ('å¼ ä¸‰')
    </insert>

    <!--void updateUser();-->
    <update id="updateUser">
        update user
        set username = 'admin'
        where id = 2  </update>

    <!--void deleteUser();-->
    <delete id="deleteUser">
        delete from user where id = 4
    </delete>

    <!--User getUserById();-->
    <select id="getUserById" resultType="com.mybatis.pojo.User">
        select * from user where id = 3
    </select>
</mapper>
```

>æ³¨æ„ï¼š
>
>+ **æŸ¥è¯¢åŠŸèƒ½çš„æ ‡ç­¾å¿…é¡»è®¾ç½® `resultType` æˆ–è€… `resultMap`**ï¼š
>
>  + `resultType` ï¼šè®¾ç½®é»˜è®¤çš„æ˜ å°„å…³ç³»ï¼ˆè‡ªåŠ¨æ˜ å°„ï¼‰ï¼Œç”¨äº**å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸€è‡´**çš„æƒ…å†µã€‚
>
>  + `resultMap`ï¼šè®¾ç½®è‡ªå®šä¹‰çš„æ˜ å°„å…³ç³»ï¼Œç”¨äº**ä¸€å¯¹å¤šæˆ–è€…å¤šå¯¹å¤šå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ**ï¼›
>
>+ æŸ¥è¯¢çš„æ•°æ®è¾ƒå¤šæ¡æ—¶ï¼Œä¸åº”è¯¥ä½¿ç”¨å®ä½“ç±»ä½œä¸ºè¿”å›å€¼ï¼Œè€Œä½¿ç”¨ä»¥å®ä½“ç±»ä¸ºç±»å‹çš„é›†åˆï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ `TooManyResultException` ï¼›æŸ¥è¯¢çš„æ•°æ®åªæœ‰ä¸€æ¡æ—¶ï¼Œè¿”å›å€¼ä½¿ç”¨å®ä½“ç±»æˆ–è€…é›†åˆéƒ½å¯ã€‚

+ æµ‹è¯•ç±» `testCRUD`ï¼š

```java
    @Test
    public void testCRUD() throws IOException {
        InputStream inputStream = Resources.getResourceAsStream("mybatis-config.xml");
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession(true);
        UserMapper mapper = sqlSession.getMapper(UserMapper.class);
        // mapper.updateUser();
        // mapper.deleteUser();
        // User user = mapper.getUserById();
        List<User> list = mapper.getAllUser();
        System.out.println(list);
    }
```



## MyBatis é…ç½®/æ˜ å°„æ–‡ä»¶æ¨¡ç‰ˆ

+ é…ç½®æ–‡ä»¶æ¨¡ç‰ˆï¼šè¿›å…¥ IDEA Settingsï¼ˆPreferencesï¼‰ æœç´¢ `File and Code Templates` é…ç½®ï¼ŒæŒ‰ `+` æ·»åŠ æ¨¡ç‰ˆï¼Œæ·»åŠ  `Mybatis Config XML File` ï¼šï¼ˆæ³¨æ„ Extension æ–‡ä»¶æ‹“å±•åä¸º `xml`ï¼‰

![image-20220303164352687](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/QEbzOJ.png)

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    <properties resource="jdbc.properties"/>

    <typeAliases>
        <package name=""/>
    </typeAliases>

    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="${jdbc.driver}"/>
                <property name="url" value="${jdbc.url}"/>
                <property name="username" value="${jdbc.username}"/>
                <property name="password" value="${jdbc.password}"/>
            </dataSource>
        </environment>
    </environments>
    <mappers>
        <package name=""/>
    </mappers>
</configuration>
```



+ mapper é…ç½®æ–‡ä»¶åŒä¸Šè®¾ç½®ï¼š

![image-20220303164825180](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/rPJHJX.png)

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="">

</mapper>
```



+ å°è£… `SqlSessionUtils` å·¥å…·ç±»ï¼š

```java
public class SqlSessionUtils {
    public static SqlSession getSqlSession() {
        SqlSession sqlSession = null;
        try {
            InputStream is = Resources.getResourceAsStream("mybatis-config.xml");
            SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);
            sqlSession = sqlSessionFactory.openSession(true);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sqlSession;
    }
}
```



ğŸŒ° ä¾‹å­ï¼šæµ‹è¯•ä¸Šè¿°å·¥å…·ç±»ï¼š

```java
public class ParameterMapperTest {
    @Test
    public void testGetAllUser(){
        SqlSession sqlSession = SqlSessionUtils.getSqlSession();
        ParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);
        List<User> userList = mapper.getAllUser();
        userList.forEach(user -> System.out.println(user));
    }
}
```

