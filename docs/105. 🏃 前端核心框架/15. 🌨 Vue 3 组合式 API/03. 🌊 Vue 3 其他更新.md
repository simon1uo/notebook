---
title: ğŸŒŠ Vue 3 å…¶ä»–æ›´æ–°
date: 2022-04-14 13:10:12
permalink: /pages/f33531/
categories: 
  - ğŸ“š å‰ç«¯ç¬”è®°
  - ğŸƒ æ ¸å¿ƒæ¡†æ¶
  - ğŸŒ¨ Vue 3
tags: 
  - null
author: 
  name: Simon
  link: https://github.com/simon1uo
---
## Vue 3 æ–°å¢ç»„ä»¶åŠŸèƒ½

### `Fragment`

> + åœ¨ Vue2 ä¸­ï¼šç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾
> + åœ¨ Vue3 ä¸­ï¼š **ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾**ï¼Œå†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª `Fragment` è™šæ‹Ÿå…ƒç´ ä¸­ã€‚

ä½¿ç”¨ `Fragment` çš„å¥½å¤„ï¼š**å‡å°‘æ ‡ç­¾å±‚çº§ï¼Œå‡å°‘å†…å­˜å ç”¨**ã€‚



### `Teleport` 

+ å°†ç»„ä»¶ HTML ç»“æ„ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ã€‚

```vue
<teleport to="ç§»åŠ¨ä½ç½®">

	<div v-if="isShow" class="mask">
		<div class="dialog">
			<h3>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—</h3>
			<button @click="isShow = false">å…³é—­å¼¹çª—</button>
		</div>
	</div>
</teleport>
```

> `to` ä¸­çš„å‚æ•°å¯ä»¥æ˜¯ HTML æ ‡ç­¾ï¼Œä¾‹å¦‚ `body` ï¼Œ`@test`ï¼Œ`.test` ã€‚



### `Suspense`

> åœ¨ Vue ä¸­ç»„ä»¶æ¨¡ç‰ˆæ¸²æŸ“æ—¶ï¼Œé»˜è®¤ä¸€ä¸ªç»„ä»¶å¼•å…¥ä¸€ä¸ªç»„ä»¶æ˜¯ä¸€èµ·æ¸²æŸ“æ¨¡ç‰ˆå‡ºæ¥çš„ï¼ˆé™æ€å¼•å…¥ï¼Œå®¹æ˜“å¼•å‘å½“å¼•å…¥çš„ç»„ä»¶æœ‰é—®é¢˜ï¼Œå½“å‰ç»„ä»¶åŠ è½½è¿å¸¦å‡ºé”™å˜æ…¢åŠ è½½ï¼‰ã€‚å½“å¼‚æ­¥å¼•å…¥ç»„ä»¶æ—¶ï¼Œæ¨¡ç‰ˆåˆ†åˆ«æ¸²æŸ“ã€‚

+ ä½œç”¨ï¼šç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼ˆefæ’æ§½ï¼‰ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

+ ä½¿ç”¨æ­¥éª¤ï¼š

  + å¼‚æ­¥å¼•å…¥ç»„ä»¶ï¼š

    ```js
    import {defineAsyncComponent} from "vue";
    const Child = defineAsyncComponent(() => import('./components/Child')) // åŠ¨æ€ï¼ˆå¼‚æ­¥ï¼‰å¼•å…¥
    ```

  + ä½¿ç”¨ `Suspend` æ ‡ç­¾åŒ…è£¹ä¸¤ä¸ªæ’æ§½æ¨¡ç‰ˆï¼Œ`default` å’Œ `fallback`ï¼š

    ```vue
    <Suspense>
      <template v-slot:default>
        <Child/>
      </template>
      <template v-slot:fallback>
        <h3>åŠ è½½ä¸­...</h3>
      </template>
    </Suspense>
    ```





## Vue 3 å…¶ä»–æ›´æ–°

### å…¨å±€ API è½¬ç§»

- **Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®**ã€‚

  - ğŸŒ° ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚

    ```js
    //æ³¨å†Œå…¨å±€ç»„ä»¶
    Vue.component('MyButton', {
      data: () => ({
        count: 0
      }),
      template: '<button @click="count++">Clicked {{ count }} times.</button>'
    })
    
    //æ³¨å†Œå…¨å±€æŒ‡ä»¤
    Vue.directive('focus', {
      inserted: el => el.focus()
    }
    ```

- Vue3.0ä¸­å¯¹è¿™äº›APIåšå‡ºäº†è°ƒæ•´ï¼š

  - å°†å…¨å±€çš„ API è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ```app```ï¼‰ä¸Šï¼š

| 2.x å…¨å±€ APIï¼ˆ```Vue```ï¼‰  | 3.x å®ä¾‹ API (`app`)                        |
| -------------------------- | ------------------------------------------- |
| `Vue.config.xxxx`          | `app.config.xxxx`                           |
| `Vue.config.productionTip` | <strong style="color:#DD5145">ç§»é™¤</strong> |
| `Vue.component`            | `app.component`                             |
| `Vue.directive`            | `app.directive`                             |
| `Vue.mixin`                | `app.mixin`                                 |
| `Vue.use`                  | `app.use`                                   |
| `Vue.prototype`            | `app.config.globalProperties`               |



### å…¶ä»–æ”¹å˜

1. å¯¹äº `data` é…ç½®é¡¹åº”è¯¥å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ï¼ˆä¸èƒ½ä¸ºå¯¹è±¡ï¼‰ã€‚

2. åŠ¨ç”»ä¸è¿‡æ¸¡ç›¸å…³çš„ç±»åç§°æ›´æ”¹ï¼š

   Vue 2.x å†™æ³•ï¼š

   ```css
   .v-enter,
   .v-leave-to {
     opacity: 0;
   }
   .v-leave,
   .v-enter-to {
     opacity: 1;
   }
   ```

   Vue 3.x å†™æ³•ï¼š

   ```css
   .v-enter-from,
   .v-leave-to {
     opacity: 0;
   }
   
   .v-leave-from,
   .v-enter-to {
     opacity: 1;
   }
   ```

3. ç§»é™¤äº† `keyCode` ï¼ˆå…¼å®¹æ€§è¾ƒå·®ï¼‰ä½œä¸º `v-on` çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ `config.keyCodes`ï¼ˆæŒ‰é”®ç¼–ç ç›¸å…³ï¼‰

4. ç§»é™¤äº† `v-on.native` ä¿®é¥°ç¬¦ï¼ˆç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼Œä¿®æ”¹ä¸ºä»¥ä¸‹å†™æ³•ï¼šï¼ˆä¸å£°æ˜çš„è‡ªå®šä¹‰äº‹ä»¶å³ä¸ºåŸç”Ÿ DOM äº‹ä»¶ï¼‰

   çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶

   ```vue
   <my-component
     v-on:close="handleComponentEvent"
     v-on:click="handleNativeClickEvent"
   />
   ```

   å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶

   ```vue
   <script>
     export default {
       emits: ['close']
     }
   </script>
   ```

5. ç§»é™¤äº†è¿‡æ»¤å™¨ `filter` ï¼š

::: tip 

è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼**å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨**ã€‚

:::