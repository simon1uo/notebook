---
title:  ğŸ—½ JavaScript symbol ç±»å‹
date: 2022-05-05 10:00:05
permalink: /pages/a3e69b/
categories:
  -  ğŸ“’ JavaScript æ·±å…¥å¯¹è±¡
tags:
  - JavaScript æ·±å…¥éƒ¨åˆ†
author: 
  name: Simon
  link: https://github.com/simon1uo
---
åœ¨ JavaScript è§„èŒƒä¸­ï¼Œåªæœ‰ä¸¤ç§åŸå§‹ç±»å‹å¯ä»¥ä½œä¸ºå¯¹è±¡çš„**å±æ€§é”®**ï¼ˆkeyï¼‰ã€‚

+ å­—ç¬¦ä¸² ï¼ˆä½¿ç”¨å…¶ä»–çš„åŸå§‹ç±»å‹ï¼Œä¾‹å¦‚æ•°å­—æˆ–è€…å¸ƒå°”ç±»å‹ï¼Œéƒ½ä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼‰
+ symbol ç±»å‹



### symbol å”¯ä¸€æ ‡è¯†ç¬¦

è¯­æ³•ï¼šå¯ä»¥ä½¿ç”¨ `Symbol()` åˆ›å»º symbol ç±»å‹çš„å€¼ï¼Œè¿”å›ç»™å˜é‡ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦çš„å€¼ã€‚åœ¨æ‹¬å·ä¸­çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæè¿°ï¼ˆæè¿°å¯ä»¥ç›¸åŒï¼‰ã€‚

ğŸŒ° ä¾‹å­ï¼š`let id = Symbol() ` / ` let id = Symbol("id")`



symbol ä¿è¯æ˜¯å”¯ä¸€çš„ã€‚å³ä½¿åˆ›å»ºäº†è®¸å¤šå…·æœ‰**ç›¸åŒæè¿°**çš„ symbolï¼Œå®ƒä»¬çš„å€¼ä¹Ÿæ˜¯ä¸åŒã€‚æè¿°åªæ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œä¸å½±å“ä»»ä½•ä¸œè¥¿ã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
let id1 = Symbol("id");
let id2 = Symbol("id");

alert(id1 == id2); // false
```



> **symbol ç±»å‹ä¸ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²**ã€‚JavaScript ä¸­çš„å¤§å¤šæ•°å€¼éƒ½æ”¯æŒå­—ç¬¦ä¸²çš„éšå¼è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ `alert` ä»»ä½•å€¼ï¼ˆè‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡ºï¼‰ï¼Œéƒ½å¯ä»¥ç”Ÿæ•ˆã€‚symbol æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸ä¼šè¢«è‡ªåŠ¨è½¬æ¢ã€‚
>
> ğŸŒ° ä¾‹å­ï¼š
>
> ```javascript
> let id = Symbol("id");
> alert(id); // ç±»å‹é”™è¯¯ï¼šæ— æ³•å°† symbol å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚
> ```
>
> å¯ä»¥ä½¿ç”¨å¼ºåˆ¶è½¬æ¢è§£å†³ï¼šï¼ˆå°† symbol è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼‰
>```js
> alert(id.toString())
> ```
> 
> æˆ–è€…åªæ˜¾ç¤ºæè¿°ï¼š
>```js
> et id = Symbol("id");
>alert(id.description)
> ```



### symbol éšè—å±æ€§

symbol å…è®¸æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„ã€Œéšè—ã€å±æ€§ï¼Œ**ä»£ç çš„ä»»ä½•å…¶ä»–éƒ¨åˆ†éƒ½ä¸èƒ½æ„å¤–è®¿é—®æˆ–é‡å†™è¿™äº›å±æ€§ã€‚**



ğŸŒ° ä¾‹å­ï¼š

```js
let user {
  name = 'Simon'
}

let id = Sysbol('id')
user.[id] = 1 // æ·»åŠ æ–°çš„å±æ€§
alert(user[id])
```

`user` å¯¹è±¡å±äºå…¶ä»–çš„ä»£ç ï¼Œé‚£äº›ä»£ç ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸åº”è¯¥åœ¨å®ƒä¸Šé¢ç›´æ¥æ·»åŠ ä»»ä½•å­—æ®µï¼Œè¿™æ ·å¾ˆä¸å®‰å…¨ã€‚ä½†æ˜¯ä½ æ·»åŠ çš„ symbol å±æ€§ä¸ä¼šè¢«æ„å¤–è®¿é—®åˆ°ï¼Œç¬¬ä¸‰æ–¹ä»£ç æ ¹æœ¬ä¸ä¼šçœ‹åˆ°å®ƒï¼Œæ‰€ä»¥ä½¿ç”¨ symbol åŸºæœ¬ä¸Šä¸ä¼šæœ‰é—®é¢˜ã€‚



ğŸŒ° ä¾‹å­ï¼šå‡è®¾å¦ä¸€ä¸ªè„šæœ¬å¸Œæœ›åœ¨ `user` ä¸­æœ‰è‡ªå·±çš„æ ‡è¯†ç¬¦ï¼Œä»¥å®ç°è‡ªå·±çš„ç›®çš„ã€‚è¿™å¯èƒ½æ˜¯å¦ä¸€ä¸ª JavaScript åº“ï¼Œå› æ­¤è„šæœ¬ä¹‹é—´å®Œå…¨ä¸äº†è§£å½¼æ­¤ã€‚

ç„¶åè¯¥è„šæœ¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„ `Symbol("id")`ï¼Œåƒè¿™æ ·ï¼š

```js
let id = Symbol('id')
user[id] = 'their id value'
```

è™½ç„¶æœ‰ç›¸åŒçš„åç§°ï¼Œä½†æ˜¯ symbol ç±»å‹ä¿è¯äº†å”¯ä¸€æ€§ã€‚

> å¦‚æœä»…ä»…ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºå±æ€§åï¼š
>
> ```js
> let user = { 
>   // ... 
> }
> // ä¸€ä¸ªè„šæœ¬ä¸­
> user.id = 'id1'
> // å¦ä¸€ä¸ªè„šæœ¬ä¸­ä¹Ÿæ·»åŠ idï¼Œäº§ç”Ÿå†²çª
> user.id = 'id2'
> ```



### åœ¨å¯¹è±¡å­—é¢é‡ä¸­ä½¿ç”¨ symbol

åœ¨å¯¹è±¡ `{ â€¦ }` å­—é¢é‡ä¸­ä½¿ç”¨ symbol æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ–¹æ‹¬å·æŠŠå®ƒæ‹¬èµ·æ¥ã€‚



ğŸŒ° ä¾‹å­ï¼š

```js
let id = Symbol('id')
let user = {
  name: 'Simon',
  [id]: 123
}
```

> è¿™é‡Œéœ€è¦ symbol ç±»å‹çš„ `id` ä½œä¸ºå¯¹è±¡å±æ€§çš„é”®ï¼Œ æ‰€ä»¥éœ€è¦ä½¿ç”¨æ–¹æ‹¬å· `[]` åŒºåˆ†å¼€å­—ç¬¦ä¸² `â€˜idâ€™` ä¸ symbolã€‚



### åœ¨éå†å¾ªç¯ä¸­çš„ symbol

:star: **symbol å±æ€§ä¸å‚ä¸ `for..in` å¾ªç¯ã€‚**ï¼ˆåŒç†è¿˜æœ‰ `Object.keys()` ï¼‰è¿™æ˜¯ä¸€èˆ¬ã€Œéšè—ç¬¦å·å±æ€§ã€åŸåˆ™çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœå¦ä¸€ä¸ªè„šæœ¬æˆ–åº“éå†æˆ‘ä»¬çš„å¯¹è±¡ï¼Œå®ƒä¸ä¼šæ„å¤–åœ°è®¿é—®åˆ°ç¬¦å·å±æ€§ã€‚



ğŸŒ° ä¾‹å­ï¼š
```js
let id = Symbol('id')
let user = {
  name: 'Simon',
  [id]: 123
}

for (let key in user) alert(key) // åªæœ‰name

alert(user[id]) // å•ç‹¬å¯ä»¥ç›´æ¥è®¿é—®
```



ä½†æ˜¯åœ¨ `Object.assign()` ä¸­ï¼Œä¼šåŒæ—¶å¤åˆ¶å­—ç¬¦ä¸²å’Œ symbol å±æ€§ã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
let id = Symbol("id");
let user = {
  [id]: 123
};

let clone = Object.assign({}, user);

alert( clone[id] ); // 123
```



### å…¨å±€ symbol

å¦‚å‰æ‰€è¿°ï¼Œé€šå¸¸æ‰€æœ‰çš„ symbol éƒ½æ˜¯ä¸åŒçš„ï¼Œå³ä½¿å®ƒä»¬æœ‰ç›¸åŒçš„åå­—ã€‚ä½†æœ‰æ—¶æƒ³è¦åå­—ç›¸åŒçš„ symbol å…·æœ‰ç›¸åŒçš„å®ä½“æ—¶ï¼Œä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†æƒ³è¦è®¿é—®çš„ symbol `"id"` æŒ‡çš„æ˜¯å®Œå…¨ç›¸åŒçš„å±æ€§ã€‚

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ **å…¨å±€ symbol æ³¨å†Œè¡¨**ã€‚**å¯ä»¥åœ¨å…¶ä¸­åˆ›å»º symbol å¹¶åœ¨ç¨åè®¿é—®å®ƒä»¬ï¼Œå®ƒå¯ä»¥ç¡®ä¿æ¯æ¬¡è®¿é—®ç›¸åŒåå­—çš„ symbol æ—¶ï¼Œè¿”å›çš„éƒ½æ˜¯ç›¸åŒçš„ symbol**ã€‚



#### `Symbol.for(key)`

+ ä»æ³¨å†Œè¡¨è¯»å–ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ symbol ï¼Œä½¿ç”¨ `Symbol.for(key)`

  ï¼ˆè¯¥è°ƒç”¨ä¼šæ£€æŸ¥å…¨å±€æ³¨å†Œè¡¨ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæè¿°ä¸º `key` çš„ symbolï¼Œåˆ™è¿”å›è¯¥ symbolï¼Œå¦åˆ™å°†åˆ›å»ºä¸€ä¸ªæ–° symbolï¼ˆ`Symbol(key)`ï¼‰ï¼Œå¹¶é€šè¿‡ç»™å®šçš„ `key` å°†å…¶å­˜å‚¨åœ¨æ³¨å†Œè¡¨ä¸­ã€‚ï¼‰

+ æ³¨å†Œè¡¨ä¸­çš„ symbol è¢«ç§°ä¸º **å…¨å±€ symbol**ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªåº”ç”¨ç¨‹åºèŒƒå›´å†…çš„ symbolï¼Œå¯ä»¥åœ¨ä»£ç ä¸­éšå¤„è®¿é—® â€”â€” è¿™å°±æ˜¯å®ƒä»¬çš„ç”¨é€”ã€‚



ğŸŒ° ä¾‹å­ï¼š

```js
let id = Symbol.for('id')
let idAgain = Symbol.for('id')

alert(id === idAgain) // true
```



#### `Symbol.keyFor`

+ `Symbol.keyFor(symbol)`ï¼Œå®ƒçš„ä½œç”¨ä¸ `Symbol.for(key)` å®Œå…¨åè¿‡æ¥ï¼šé€šè¿‡å…¨å±€ symbol è¿”å›ä¸€ä¸ªåå­—ã€‚

+ ä½œç”¨æ˜¯æŸ¥æ‰¾ symbol çš„é”®ã€‚æ‰€ä»¥å®ƒä¸é€‚ç”¨äºéå…¨å±€ symbolã€‚å¦‚æœ symbol ä¸æ˜¯å…¨å±€çš„ï¼Œå®ƒå°†æ— æ³•æ‰¾åˆ°å®ƒå¹¶è¿”å› `undefined`ã€‚
+ ä»»ä½• symbol éƒ½å…·æœ‰ `description` å±æ€§ã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
// é€šè¿‡ name è·å– symbol
let sym = Symbol.for("name");
let sym2 = Symbol.for("id");

// é€šè¿‡ symbol è·å– name
alert( Symbol.keyFor(sym) ); // name
alert( Symbol.keyFor(sym2) ); // id
```



ğŸŒ° ä¾‹å­ï¼šï¼ˆéå…¨å±€ symbolï¼‰
```js
let globalSymbol = Symbol.for("name");
let localSymbol = Symbol("name");

alert( Symbol.keyFor(globalSymbol) ); // nameï¼Œå…¨å±€ symbol
alert( Symbol.keyFor(localSymbol) ); // undefinedï¼Œéå…¨å±€

alert( localSymbol.description ); // name
```



### JavaScript ç³»ç»Ÿ symbol

avaScript å†…éƒ¨æœ‰å¾ˆå¤šã€Œç³»ç»Ÿ symbolã€ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å¾®è°ƒå¯¹è±¡çš„å„ä¸ªæ–¹é¢ã€‚å®ƒä»¬éƒ½è¢«åˆ—åœ¨äº† [ä¼—æ‰€å‘¨çŸ¥çš„ symbol](https://tc39.github.io/ecma262/#sec-well-known-symbols) è¡¨çš„è§„èŒƒä¸­ï¼š

- `Symbol.hasInstance`
- `Symbol.isConcatSpreadable`
- `Symbol.iterator`
- `Symbol.toPrimitive`
- â€¦â€¦ç­‰ç­‰ã€‚



## symbol æ€»ç»“

+ `symbol` æ˜¯ **å”¯ä¸€æ ‡è¯†ç¬¦çš„åŸºæœ¬ç±»å‹**ï¼Œä½¿ç”¨å¸¦æœ‰å¯é€‰æè¿°ï¼ˆnameï¼‰çš„ `Symbol()` è°ƒç”¨åˆ›å»ºçš„ã€‚
+ symbol æ€»æ˜¯ **ä¸åŒçš„å€¼**ï¼Œå³ä½¿å®ƒä»¬æœ‰ç›¸åŒçš„åå­—ã€‚å¦‚æœå¸Œæœ›åŒåçš„ symbol ç›¸ç­‰ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨å…¨å±€æ³¨å†Œè¡¨ï¼š`Symbol.for(key)` è¿”å›ï¼ˆå¦‚æœéœ€è¦çš„è¯åˆ™åˆ›å»ºï¼‰ä¸€ä¸ªä»¥ `key` ä½œä¸ºåå­—çš„å…¨å±€ symbolã€‚ä½¿ç”¨ `Symbol.for` å¤šæ¬¡è°ƒç”¨ `key` ç›¸åŒçš„ symbol æ—¶ï¼Œè¿”å›çš„å°±æ˜¯åŒä¸€ä¸ª symbolã€‚
+ symbol ä¸æ˜¯ 100% éšè—çš„ã€‚æœ‰ä¸€ä¸ªå†…å»ºæ–¹æ³• [Object.getOwnPropertySymbols(obj)](https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols) å…è®¸æˆ‘ä»¬è·å–æ‰€æœ‰çš„ symbolã€‚è¿˜æœ‰ä¸€ä¸ªåä¸º [Reflect.ownKeys(obj)](https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Reflect/ownKeys) çš„æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„ **æ‰€æœ‰** é”®ï¼ŒåŒ…æ‹¬ symbolã€‚æ‰€ä»¥å®ƒä»¬å¹¶ä¸æ˜¯çœŸæ­£çš„éšè—ã€‚



ä½¿ç”¨ symbol çš„åœºæ™¯ï¼š

+ **éšè—å¯¹è±¡å±æ€§**ã€‚
+ JavaScript ä½¿ç”¨äº†è®¸å¤šç³»ç»Ÿ symbolï¼Œè¿™äº› symbol å¯ä»¥ä½œä¸º `Symbol.*` è®¿é—®ã€‚å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ”¹å˜ä¸€äº›å†…å»ºè¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ `Symbol.iterator` æ¥è¿›è¡Œ [è¿­ä»£](https://zh.javascript.info/iterable) æ“ä½œï¼Œä½¿ç”¨ `Symbol.toPrimitive` æ¥è®¾ç½® [å¯¹è±¡åŸå§‹å€¼çš„è½¬æ¢](https://zh.javascript.info/object-toprimitive) ç­‰ç­‰ã€‚



