---
title:  ğŸ§­ JavaScript æ•°ç»„æ–¹æ³•åº”ç”¨å®ä¾‹
date: 2022-05-06 22:47:57
permalink: /pages/cb7d78/
categories:
  -  ğŸš¶ğŸ» å‰ç«¯å·©å›ºåŸºç¡€
  -  ğŸ“• JavaScript æ·±å…¥æ•°æ®ç±»å‹
tags:
  - 
---

## `split()` / `join()`

### è½¬æ¢çŸ­åˆ’çº¿å‘½åä¸ºé©¼å³°å‘½å

> ç¼–å†™å‡½æ•° `camelize(str)` ã€‚å³ï¼šåˆ é™¤æ‰€æœ‰çŸ­æ¨ªçº¿ï¼Œå¹¶å°†çŸ­æ¨ªçº¿åçš„æ¯ä¸€ä¸ªå•è¯çš„é¦–å­—æ¯å˜ä¸ºå¤§å†™ã€‚ä¾‹å¦‚ `my-short-string` è½¬æ¢ä¸º `myShortString`ã€‚

ç›¸å…³ç”¨ä¾‹ï¼š

```js
camelize("background-color") == 'backgroundColor';
camelize("list-style-image") == 'listStyleImage';
camelize("-webkit-transition") == 'WebkitTransition';
```

::: details

```js
function camelize(str) {
    return str.split('-').map((item, index)=> index === 0 ? item : item[0].toUpperCase() + item.slice(1)).join('')
}
```

:::

æ¶‰åŠå…³é”®å­— `split` / `map` / `toUpperCase` / `join`



### æ‹“å±•çš„ Calculator

> å®ç°ä¸¤éƒ¨åˆ†åŠŸèƒ½ï¼š
>
> + ç° `calculate(str)` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—åƒ `"1 + 2"` è¿™æ ·æ ¼å¼ä¸ºâ€œæ•°å­— è¿ç®—ç¬¦ æ•°å­—â€ï¼ˆä»¥ç©ºæ ¼åˆ†éš”ï¼‰çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚è¯¥æ–¹æ³•éœ€è¦èƒ½å¤Ÿç†è§£åŠ å· `+` å’Œå‡å· `-`ã€‚
>
>   ```js
>   let calc = new Calculator;
>   console.log( calc.calculate("3 + 7") ); 
>   ```
>
> + æ·»åŠ æ–¹æ³• `addMethod(name, func)`ï¼Œè¯¥æ–¹æ³•æ•™ calculator è¿›è¡Œæ–°æ“ä½œã€‚å®ƒéœ€è¦è¿ç®—ç¬¦ `name` å’Œå®ç°å®ƒçš„åŒå‚æ•°å‡½æ•° `func(a,b)`ã€‚
>
>   ```js
>   let powerCalc = new Calculator;
>   powerCalc.addMethod("*", (a, b) => a * b);
>   powerCalc.addMethod("/", (a, b) => a / b);
>   powerCalc.addMethod("**", (a, b) => a ** b);
>         
>   let result = powerCalc.calculate("2 ** 3");
>   console.log(result); // 8
>   ```

::: details

```js
  function Calculator() {
    this.methods = {
      '+': (a ,b) => a + b,
      '-': (a, b) => a - b
    }

    this.calculate = function(str) {
      let arr = str.split(' ')
      let a = +arr[0]
      let operator = arr[1]
      let b = +arr[2]

      if(!this.methods[operator] || isNaN(a) || isNaN(b)) {
        return NaN
      }

      return this.methods[operator](a, b)
    }

    this.addMethod = function(name, func) {
      this.methods[name] = func
    }
  }
```

:::

å…³é”®è¯ï¼šå¯¹è±¡æ–¹æ³• ï½œ `split` 



## `filter()`

### è¿‡æ»¤èŒƒå›´

> å†™ä¸€ä¸ªå‡½æ•° `filterRange(arr, a, b)`ï¼Œè¯¥å‡½æ•°è·å–ä¸€ä¸ªæ•°ç»„ `arr`ï¼Œåœ¨å…¶ä¸­æŸ¥æ‰¾æ•°å€¼å¤§äºæˆ–ç­‰äº `a`ï¼Œä¸”å°äºæˆ–ç­‰äº `b` çš„å…ƒç´ ï¼Œå¹¶å°†ç»“æœä»¥æ•°ç»„çš„å½¢å¼è¿”å›ã€‚è¯¥å‡½æ•°ä¸åº”è¯¥ä¿®æ”¹åŸæ•°ç»„ã€‚å®ƒåº”è¯¥è¿”å›æ–°çš„æ•°ç»„ã€‚

ç›¸å…³ç”¨ä¾‹ï¼š

```js
let arr = [5, 3, 8, 1];
let filtered = filterRange(arr, 1, 4);
alert( filtered ); // 3,1ï¼ˆåŒ¹é…å€¼ï¼‰
alert( arr ); // 5,3,8,1ï¼ˆæœªä¿®æ”¹ï¼‰
```

::: details

```js
function filterRange(arr, a, b) {
    return arr.filter((item) => item >= a && item <= b)
  }
```

:::



### åŸä½è¿‡æ»¤èŒƒå›´

ä¸ä¸Šä¸€é¢˜ç±»ä¼¼ï¼Œåœ¨åŸæ•°ç»„ä¸­ï¼Œè¿‡æ»¤ï¼ˆåˆ é™¤ï¼‰ä¸åœ¨ `[a, b]` èŒƒå›´å†…çš„å…ƒç´ ã€‚è¯¥å‡½æ•°åº”è¯¥åªä¿®æ”¹æ•°ç»„ã€‚å®ƒä¸åº”è¯¥è¿”å›ä»»ä½•ä¸œè¥¿ã€‚

ç›¸å…³ç”¨ä¾‹ï¼š

```js
let arr = [5, 3, 8, 1];
filterRangeInPlace(arr, 1, 4); // åˆ é™¤äº†èŒƒå›´åœ¨ 1 åˆ° 4 ä¹‹å¤–çš„æ‰€æœ‰å€¼
alert( arr ); // [3, 1]
```

::: details

```js
function filterRangeInPlace(arr, a, b) {

  for (let i = 0; i < arr.length; i++) {
    let val = arr[i];

    // å¦‚æœè¶…å‡ºèŒƒå›´ï¼Œåˆ™åˆ é™¤
    if (val < a || val > b) {
      arr.splice(i, 1);
      i--;
    }
  }

}
```

:::



## `map()` æ˜ å°„

### æ˜ å°„åˆ° `names`

> `user` å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ `user.name`ï¼Œå°†å…¶è½¬æ¢ä¸º `names` æ•°ç»„çš„ä»£ç ã€‚

```js
let john = { name: "John", age: 25 };
let pete = { name: "Pete", age: 30 };
let mary = { name: "Mary", age: 28 };

let users = [ john, pete, mary ];
let names = /* ... your code */

console.log(names); // John, Pete, Mary
```

::: details

```js
let names = users.map((user) => user.name)
```

:::

### æ˜ å°„åˆ°å¯¹è±¡

> ä»¥æ•°ç»„ `users` ä¸ºåŸºç¡€ï¼Œåˆ›å»ºå¦ä¸€ä¸ªå…·æœ‰ `id` å’Œ `fullName` çš„å¯¹è±¡æ•°ç»„ï¼Œå…¶ä¸­ `fullName` ç”± `name` å’Œ `surname` ç”Ÿæˆã€‚

```js
let john = { name: "John", surname: "Smith", id: 1 };
let pete = { name: "Pete", surname: "Hunt", id: 2 };
let mary = { name: "Mary", surname: "Key", id: 3 };

let users = [ john, pete, mary ];

let usersMapped = /* ... your code ... */

/*
usersMapped = [
  { fullName: "John Smith", id: 1 },
  { fullName: "Pete Hunt", id: 2 },
  { fullName: "Mary Key", id: 3 }
]
*/
```



::: details

```js
let usersMapped = users.map((user) => ({
  fullName: `${user.name} ${user.surname}`,
  id: user.id
}))
```

:::

::: warning

æ³¨æ„ï¼Œåœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡éœ€è¦ä½¿ç”¨é¢å¤–çš„æ‹¬å·ã€‚å¦‚æœåªå†™ä¸€ä¸ª `{}` ï¼ŒJavaScript åœ¨è¿™é‡Œä¼šæŠŠ `{` è§†ä¸ºå‡½æ•°ä½“çš„å¼€å§‹ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„å¼€å§‹ã€‚è§£å†³æ–¹æ³•æ˜¯å°†å®ƒä»¬åŒ…è£…åœ¨æ™®é€šæ‹¬å· `()` ä¸­ã€‚

:::



## `sort()` æ•°ç»„æ’åº



### æ ¹æ®å¯¹è±¡ä¸­çš„æ•°æ®æ’åº

> ç¼–å†™å‡½æ•° `sortByAge(users)` è·å¾—å¯¹è±¡æ•°ç»„çš„ `age` å±æ€§ï¼Œå¹¶æ ¹æ® `age` å¯¹è¿™äº›å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºã€‚

```js
let john = { name: "John", age: 25 };
let pete = { name: "Pete", age: 30 };
let mary = { name: "Mary", age: 28 };

let arr = [ pete, john, mary ];

sortByAge(arr);
```

::: details

```js
function sortByAge(arr) {
  arr.sort((a, b) => a.age - b.age)
}
```

:::



### éšæœºæ’åº

> ç¼–å†™å‡½æ•° `shuffle(array)` å°† `let arr = [1, 2, 3]; `  éšæœºæ’åºã€‚æ‰€æœ‰å…ƒç´ é¡ºåºåº”è¯¥å…·æœ‰ç›¸ç­‰çš„æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°† `[1,2,3]` é‡æ–°æ’åºä¸º `[1,2,3]` æˆ– `[1,3,2]` æˆ– `[3,1,2]` ç­‰ï¼Œæ¯ç§æƒ…å†µçš„æ¦‚ç‡ç›¸ç­‰ã€‚

::: details

æ€è·¯ï¼šä½¿ç”¨ `Math.random()` ç”Ÿæˆä¸€ä¸ª **å¯èƒ½æ˜¯æ­£æ•°æˆ–è€…è´Ÿæ•°çš„** éšæœºæ•°ï¼Œè¿™æ · `sort()` æ‰èƒ½éšæœºå¯¹æ•°ç»„ä¸­çš„å…ƒç´ é‡æ–°æ’åºã€‚

ç®€å•çš„ä½¿ç”¨ `Math.random() - 0.5` ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¾—å‡ºæ‰€æœ‰çš„æ’åˆ—çš„æ¦‚ç‡ä¸ç›¸åŒã€‚

```js
function shuffle(array) {
  array.sort((a, b) => (Math.random() - 0.5))
}
```



èƒ½å®ç°çš„ä¸€ä¸ªç®—æ³•ã€Œ[Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisherâ€“Yates_shuffle)ã€ï¼Œé€†å‘éå†æ•°ç»„ï¼Œå¹¶å°†æ¯ä¸ªå…ƒç´ ä¸å‰é¢çš„éšæœºçš„ä¸€ä¸ªå…ƒç´ äº’æ¢ä½ç½®ã€‚èƒ½å®ç°å¾—å‡ºæ‰€æœ‰æ’åˆ—éƒ½ä»¥ç›¸åŒçš„æ¦‚ç‡å‡ºç°ï¼Œå¹¶ä¸”ä¸éœ€æ’åºå¢åŠ æ—¶é—´å¼€é”€ã€‚

```js
function shuffle(array) {
  for(let i = array.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1))
    
    // ä¸€èˆ¬äº¤æ¢
    let temp = array[i]
    array[i] = array[j]
    array[j] = array[i]
  }
}
```

> ä½¿ç”¨è§£æ„åˆ†é…äº¤æ¢ï¼š
> ```js
> [array[i], array[j]] = [array[j], array[i]]
> ```

:::

å…³é”®å­—ï¼š `Math.random()` | `sort()`



## `reduce()`

### è®¡ç®—å¹³å‡å€¼

> ç¼–å†™ `getAverageAge(users)` å‡½æ•°ï¼Œè¯¥å‡½æ•°è·å–ä¸€ä¸ªå…·æœ‰ `age` å±æ€§çš„å¯¹è±¡æ•°ç»„ï¼Œå¹¶è¿”å›å¹³å‡å¹´é¾„ã€‚

```js
let john = { name: "John", age: 25 };
let pete = { name: "Pete", age: 30 };
let mary = { name: "Mary", age: 29 };

let arr = [ john, pete, mary ];

alert( getAverageAge(arr) );
```

::: details

```js
function getAverageAge(arr) {
  return arr.reduce((sum, item) => sum + item.age, 0) / arr.length
}
```

:::



### ä»æ•°ç»„åˆ›å»ºå¯¹è±¡

> å‡è®¾æ”¶åˆ°äº†ä¸€ä¸ªç”¨æˆ·æ•°ç»„ï¼Œå½¢å¼ä¸ºï¼š`{id:..., name:..., age:... }`ã€‚
>
> åˆ›å»ºä¸€ä¸ªå‡½æ•° `groupById(arr)` ä»è¯¥æ•°ç»„åˆ›å»ºå¯¹è±¡ï¼Œä»¥ `id` ä¸ºé”®ï¼ˆkeyï¼‰ï¼Œæ•°ç»„é¡¹ä¸ºå€¼ã€‚

```js
let users = [
  {id: 'john', name: "John Smith", age: 20},
  {id: 'ann', name: "Ann Smith", age: 24},
  {id: 'pete', name: "Pete Peterson", age: 31},
];

let usersById = groupById(users);

// after: 
/* 
usersById = {
  john: {id: 'john', name: "John Smith", age: 20},
  ann: {id: 'ann', name: "Ann Smith", age: 24},
  pete: {id: 'pete', name: "Pete Peterson", age: 31},
}
*/
```

::: details

```js
function groupById(array) {
    return array.reduce((obj, item)=>{
      obj[item.id] = item
      return obj
    },{})
  }
```

> æ³¨æ„è¦å°†ç´¯åŠ å™¨çš„åˆå§‹å€¼è®¾ç½®ä¸º `{}` 

:::

## `includes()`

### æ•°ç»„å»é‡

> åˆ›å»ºä¸€ä¸ªå‡½æ•° `unique(arr)`ï¼Œè¿”å›å»é™¤é‡å¤å…ƒç´ åçš„æ•°ç»„ `arr`ã€‚

```js
function unique(arr) {
  /* your code */
}

let strings = ["Hare", "Krishna", "Hare", "Krishna",
  "Krishna", "Krishna", "Hare", "Hare", ":-O"
];
```

::: details

```js
function unique(arr){
  let res = []
  
  for (let item of arr) {
    if(!res.includes(item)){
      res.push(item)
    }
  }
  return res
}
```

:::
