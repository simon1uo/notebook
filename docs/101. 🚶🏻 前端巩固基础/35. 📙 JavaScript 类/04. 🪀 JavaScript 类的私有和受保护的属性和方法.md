---
title:  ğŸª€ JavaScript ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤çš„å±æ€§å’Œæ–¹æ³•
date: 2022-05-26 17:38:58
permalink: /pages/7154d4/
categories:
  -  ğŸ“™ JavaScript ç±»
tags:
  - JavaScript æ·±å…¥éƒ¨åˆ†
---
ä¸€èˆ¬åœ¨ **é¢å‘å¯¹è±¡ç¼–ç¨‹** ä¸­ï¼Œå±æ€§åº”è¯¥åˆ†ä¸ºä¸¤ç»„ï¼šå†…éƒ¨æ¥å£å’Œå¤–éƒ¨æ¥å£ï¼š

+ **å†…éƒ¨æ¥å£** ï¼šå¯ä»¥é€šè¿‡è¯¥ç±»çš„å…¶ä»–æ–¹æ³•è®¿é—®ï¼Œä½†ä¸èƒ½ä»å¤–éƒ¨è®¿é—®çš„æ–¹æ³•å’Œå±æ€§ã€‚å†…éƒ¨æ¥å£ç”¨äºå¯¹è±¡å·¥ä½œï¼Œä¸€èˆ¬å¤„ç†ç»†èŠ‚ã€‚
+ **å¤–éƒ¨æ¥å£** ï¼šå¯ä»¥ä»ç±»çš„å¤–éƒ¨è®¿é—®çš„ç±»çš„æ–¹æ³•å’Œå±æ€§ã€‚ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ—¶åªéœ€çŸ¥é“å®ƒçš„å¤–éƒ¨æ¥å£ï¼Œå¯èƒ½ä¸å¿…çŸ¥é“å†…éƒ¨å¦‚ä½•å·¥ä½œçš„ç»†èŠ‚ã€‚

æ‰€ä»¥åœ¨ JavaScript çš„ç±»ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„å¯¹è±¡å­—æ®µï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼š

+ å…¬å…±çš„å±æ€§å’Œæ–¹æ³•ï¼šå¯ä»ä»»ä½•åœ°æ–¹è®¿é—®ã€‚å®ƒä»¬æ„æˆäº†å¤–éƒ¨æ¥å£ã€‚
+ ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼šåªèƒ½ä»ç±»çš„å†…éƒ¨è®¿é—®ã€‚è¿™äº›ç”¨äºå†…éƒ¨æ¥å£ã€‚

+ å—ä¿æŠ¤çš„å±æ€§å’Œæ–¹æ³•ï¼šåªèƒ½ä»ç±»çš„å†…éƒ¨å’ŒåŸºäºå…¶æ‰©å±•çš„ç±»çš„å†…éƒ¨è®¿é—®ã€‚å®ƒä»¬å¯¹äºå†…éƒ¨æ¥å£ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ä»æŸç§æ„ä¹‰ä¸Šè®²ï¼Œå®ƒä»¬æ¯”ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•æ›´ä¸ºå¹¿æ³›ï¼Œé€šå¸¸å¸Œæœ›ç»§æ‰¿ç±»æ¥è®¿é—®å®ƒä»¬ã€‚

  >  å—ä¿æŠ¤çš„å­—æ®µä¸æ˜¯åœ¨è¯­è¨€çº§åˆ«çš„ Javascript ä¸­å®ç°çš„ã€‚å®ƒä»¬æ˜¯åœ¨ Javascript ä¸­æ¨¡æ‹Ÿçš„ç±»å®šä¹‰è¯­æ³•ã€‚



ğŸŒ° å’–å•¡æœºä¾‹å­ï¼š

+ å’–å•¡æœºç±»ï¼š

  ```js
  class CoffeeMachine {
    waterAmount = 0;
  
    constructor(power) {
      this.power = power;
      console.log( `Created a coffee-machine, power: ${power}` );
    }
  }
  ```

+ åˆ›å»ºå®ä¾‹ã€ä½¿ç”¨ï¼š
  ```js
  // åˆ›å»ºå’–å•¡æœº
  let coffeeMachine = new CoffeeMachine(100);
  
  // åŠ æ°´
  coffeeMachine.waterAmount = 200;
  ```

  > ç›®å‰ä¸ºæ­¢ï¼šå±æ€§ `waterAmount` å’Œ `power` æ˜¯å…¬å…±çš„ã€‚å¯ä»¥è½»æ¾åœ°ä»å¤–éƒ¨å°†å®ƒä»¬è·å–æˆ–è€…è®¾ç½®æˆä»»ä½•å€¼ã€‚



+ å°† `waterAmount` ä¿®æ”¹ä¸ºå—ä¿æŠ¤çš„å±æ€§ï¼š

  > **å—ä¿æŠ¤çš„å±æ€§é€šå¸¸ä»¥ä¸‹åˆ’çº¿ `_` ä½œä¸ºå‰ç¼€ã€‚**

  ```js
  class CoffeeMachine {
    _waterAmount = 0;
  
    set waterAmount(value) {
      if (value < 0) {
        value = 0;
      }
      this._waterAmount = value;
    }
  
    get waterAmount() {
      return this._waterAmount;
    }
  
    constructor(power) {
      this._power = power;
    }
  
  }
  ```

+ åˆ›å»ºå®ä¾‹ã€ä½¿ç”¨ï¼š

  ```js
  // åˆ›å»ºå’–å•¡æœº
  let coffeeMachine = new CoffeeMachine(100);
  
  // åŠ æ°´
  coffeeMachine.waterAmount = -10; // _waterAmount å°†å˜ä¸º 0ï¼Œè€Œä¸æ˜¯ -10
  ```

  > æ­¤æ—¶å› ä¸º `waterAmount` æ˜¯ã€Œå—ä¿æŠ¤çš„å±æ€§ã€ï¼Œè®¾å€¼æˆ–æˆç»è¿‡ `set` æ–¹æ³•æ§åˆ¶ã€‚

+ ä»¤  `power`  ä¸ºåªè¯»å±æ€§ï¼š

  ```js
  class CoffeeMachine {
    // ...
  
    constructor(power) {
      this._power = power;
    }
  
    get power() {
      return this._power;
    }
  
  }
  ```

  > æ­¤æ—¶ï¼Œè¯•å›¾ä¿®æ”¹ `power` çš„æ“ä½œéƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰å¯¹åº”çš„ `set` æ–¹æ³•ã€‚



::: tip

**`getter` å’Œ `setter` å‡½æ•°**çš„ç”¨æ³•ï¼š

```js
class CoffeeMachine {
  _waterAmount = 0;

  setWaterAmount(value) {
    if (value < 0) value = 0;
    this._waterAmount = value;
  }

  getWaterAmount() {
    return this._waterAmount;
  }

}

```

å‡½æ•°æ›´çµæ´»ã€‚å®ƒä»¬å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ã€‚

ä½†æ˜¯ `set` / `get` çš„ç®€åŒ–æ–¹æ³•ä¹Ÿå¯ç”¨ã€‚

:::

::: tip

å› ä¸º ã€Œå—ä¿æŠ¤çš„å±æ€§ã€åªæ˜¯ä¸€ä¸ªåˆ©ç”¨ä»£ç é€»è¾‘å®ç°çš„å­—æ®µï¼Œæ‰€ä»¥å®ƒæ˜¯å¯ä»¥ **è¢«ç»§æ‰¿çš„**ã€‚

:::

## ç§æœ‰å±æ€§

æ–°æ·»åŠ çš„ JavaScript ç‰¹æ€§ï¼šä½¿ç”¨ `#` å¼€å¤´å®šä¹‰ ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚**å®ƒä»¬åªèƒ½åœ¨ç±»çš„å†…éƒ¨å¯ä»¥è¢«è®¿é—®**ã€‚

> + åœ¨è¯­è¨€çº§åˆ«ï¼Œ`#` æ˜¯è¯¥å­—æ®µä¸ºç§æœ‰çš„ç‰¹æ®Šæ ‡å¿—ã€‚
> + ç§æœ‰å­—æ®µä¸å…¬å…±å­—æ®µä¸ä¼šå‘ç”Ÿå†²çªã€‚å¯ä»¥åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªåŒåçš„ å…¬å…±å­—æ®µå’Œç§æœ‰å­—æ®µã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
class CoffeeMachine {
  #waterLimit = 200;

  #fixWaterAmount(value) {
    if (value < 0) return 0;
    if (value > this.#waterLimit) return this.#waterLimit;
  }

  setWaterAmount(value) {
    this.#waterLimit = this.#fixWaterAmount(value);
  }
}

let coffeeMachine = new CoffeeMachine();

// ä¸èƒ½ä»ç±»çš„å¤–éƒ¨è®¿é—®ç±»çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•
coffeeMachine.#fixWaterAmount(123); // Error
coffeeMachine.#waterLimit = 1000; // Error
```

+ ä½¿å¤–éƒ¨èƒ½è®¿é—®ç§æœ‰å±æ€§ï¼Œåˆ©ç”¨ `getter` å’Œ `setter` è®¿é—®å™¨æ–¹æ³•ï¼š

  ```js
  class CoffeeMachine {
  
    #waterAmount = 0;
  
    get waterAmount() {
      return this.#waterAmount;
    }
  
    set waterAmount(value) {
      if (value < 0) value = 0;
      this.#waterAmount = value;
    }
  }
  ```

  

::: tip

ä¸å—ä¿æŠ¤çš„å­—æ®µä¸åŒï¼Œç§æœ‰å­—æ®µæ˜¯è¯­è¨€çº§åˆ«çš„ã€‚æ‰€ä»¥ç§æœ‰å­—æ®µå¹¶ä¸èƒ½ç›´æ¥ç»§æ‰¿ï¼Œåªèƒ½é€šè¿‡è®¿é—®å™¨è®¿é—®ã€‚

ğŸŒ° ä¾‹å­ï¼š
```js
class MegaCoffeeMachine extends CoffeeMachine {
  method() {
    console.log(this.#waterAmount); // Error: can only access from CoffeeMachine
  }
}
```

:::



::: warning

ç§æœ‰å­—æ®µä¸èƒ½é€šè¿‡ `this[name]` æ–¹å¼è®¿é—®ã€‚

é€šå¸¸æ™®é€šçš„å­—æ®µå¯ä»¥é€šè¿‡ `this[name]`è®¿é—®ï¼š

```js
class User {
  ...
  sayHi() {
    let fieldName = "name";
    console.log(`Hello, ${this[fieldName]}`);
  }
}
```

> å‡å¦‚æœ‰ç§æœ‰å­—æ®µ `#name` ï¼Œ`this['#name']` ä¸èµ·ä½œç”¨ã€‚

:::



## æ€»ç»“

+ éšè—å†…éƒ¨æ¥å£ï¼Œä¿æŠ¤äº†å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œæœ‰æ•ˆé™åˆ¶äº†æ¥è‡ªå¤–éƒ¨çš„æ“ä½œã€‚å¯ä»¥éšè—å†…éƒ¨çš„å¤æ‚å®ç°ç»†èŠ‚ï¼Œåªæä¾›ç»™å¤–éƒ¨ **æ–¹ä¾¿ç®€æ´çš„è®¿é—®æ–¹å¼**ã€‚

+ éšè—å†…éƒ¨æ¥å£ä½¿ç”¨ å—ä¿æŠ¤çš„å­—æ®µ æˆ–è€… ç§æœ‰å­—æ®µï¼š
  + å—ä¿æŠ¤çš„å­—æ®µä»¥ `_` å¼€å¤´ã€‚è¿™æ˜¯ä¸€ä¸ªçº¦å®šï¼Œä¸æ˜¯åœ¨è¯­è¨€çº§åˆ«å¼ºåˆ¶æ‰§è¡Œçš„ã€‚ç¨‹åºå‘˜åº”è¯¥åªé€šè¿‡å®ƒçš„ç±»å’Œä»å®ƒç»§æ‰¿çš„ç±»ä¸­è®¿é—®ä»¥ `_` å¼€å¤´çš„å­—æ®µã€‚
  + ç§æœ‰å­—æ®µä»¥ `#` å¼€å¤´ã€‚æ˜¯ JavaScript è¯­è¨€çº§åˆ«çš„å¼ºåˆ¶æ‰§è¡Œçš„ã€‚



