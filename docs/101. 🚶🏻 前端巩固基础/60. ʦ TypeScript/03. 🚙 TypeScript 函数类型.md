---
title:  ğŸš™ TypeScript å‡½æ•°ç±»å‹
date: 2022-04-28 11:06:46
permalink: /pages/47c91c/
categories:
  -  ğŸš¶ğŸ» å‰ç«¯å·©å›ºåŸºç¡€
  -  Ê¦ TypeScript
tags:
  - 
---

## å‡½æ•°çš„ç±»å‹

åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°æ˜¯é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå¹¶ä¸”å‡½æ•°å¯ä»¥ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼ˆ**å¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼è¿›è¡Œä¼ é€’**ï¼‰

+ åœ¨ä½¿ç”¨å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ç±»å‹ï¼Œå¯ä»¥ç¼–å†™**å‡½æ•°å‡½æ•°ç±»å‹çš„è¡¨è¾¾å¼**ï¼ˆFunction Type Expressionsï¼‰ï¼Œæ¥è¡¨ç¤ºå‡½æ•°ç±»å‹ï¼›

```typescript
type CalcFunc = (num1: number, num2: number) => void 

function calc(fn: CalcFunc) {
	console.log(fn(20, 30))
}

function sum(num1: number, num2: number) {
	return num1 + num2
}

function mul(num1: number, num2: number) {
	return num1 * num2
}

calc(sum)
calc(mul)
```

> + ä¸Šé¢ `(num1: number, num2: number) => void ` ä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ã€‚
>   + æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼š `num1` å’Œ `num2`ï¼Œå¹¶ä¸”éƒ½æ˜¯ `number` ç±»å‹ã€‚
>   + å¹¶ä¸”è¿™ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€æœ‰æ˜¯ `void`ã€‚
> + æŸäº›è¯­è¨€ä¸­ï¼Œ `num1` å’Œ `num2` å¯ä»¥çœç•¥ï¼Œä½†æ˜¯ TypeScript **ä¸å¯ä»¥çœç•¥**ã€‚



## å‚æ•°çš„å¯é€‰ç±»å‹

å‡½æ•°çš„æŸä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼š
```typescript
function foo(x: number, y?: number) {
  console.log(x,y)
}
```

è¿™ä¸ªæ—¶å€™å‚æ•° `x` ä¾ç„¶æ˜¯æœ‰ç±»å‹çš„ï¼Œå®ƒçš„ç±»å‹æ˜¯ `number | undefined` ã€‚

å¦å¤–å¯é€‰ç±»å‹éœ€è¦åœ¨å¿…ä¼ å‚æ•°çš„åé¢å¦åˆ™æŠ¥é”™ï¼Œå¦‚ä¸‹é”™è¯¯ç¤ºèŒƒï¼š

```typescript
function foo(x?: number, y: number) {
  // A required parameter cannot follw an optional parameter.
  console.log(x,y)
}
```



## é»˜è®¤å‚æ•°

ä» ES6 å¼€å§‹ï¼ŒJavaScript æ˜¯æ”¯æŒé»˜è®¤å‚æ•°çš„ï¼ŒTypeScript ä¹Ÿæ˜¯æ”¯æŒé»˜è®¤å‚æ•°çš„ã€‚

ä¾‹å­ï¼š

```typescript
function foo(x: number, y: number = 6) {
  console.log(x, y)
}

foo(10)
```

> æ­¤æ—¶çš„ `y` æ˜¯ `undefined` å’Œ `number` çš„**è”åˆç±»å‹**ã€‚



## å‰©ä½™å‚æ•°

ä» ES6 å¼€å§‹ï¼ŒJavaScript ä¹Ÿæ”¯æŒå‰©ä½™å‚æ•°ï¼Œ**å‰©ä½™å‚æ•°è¯­æ³•å…è®¸å°†ä¸€ä¸ªä¸å®šæ•°é‡çš„å‚æ•°æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­**ã€‚

```typescript
function sum(...nums: number[]) {
  let total = 0
  for (const num of nums){
    total += num
  }
  return total
}

const result1 = sum(10, 20, 30)
console.log(result1)
const result2 = sum(10, 20, 30, 40)
console.log(result2)
```



## `this` 

### å¯æ¨å¯¼çš„ `this` ç±»å‹

å…ˆè§‚å¯Ÿä¸€ä¸ªä¾‹å­ï¼š
```typescript
const info = {
  name: 'simon',
  sayHello() {
    console.log(this.name)
  }
}
info.sayhello()
```

è¿™ä¸ªä¾‹å­å¯ä»¥æ­£å¸¸è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ TypeScript åœ¨ç¼–è¯‘æ—¶ï¼Œè®¤ä¸º `this` æ˜¯å¯ä»¥æ­£ç¡®å»ä½¿ç”¨çš„ã€‚**TypeScript è®¤ä¸ºå‡½æ•° `sayHello` æœ‰ä¸€ä¸ªå¯¹åº”çš„ `this` çš„å¤–éƒ¨å¯¹è±¡ `info`ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶ï¼Œå°±ä¼šæŠŠ `this` å½“åšè¯¥å¯¹è±¡ã€‚**



### ä¸ç¡®å®šçš„ `this` ç±»å‹

ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¹¶ä¸æ¸…æ¥š `this` çš„æŒ‡å‘ï¼š
```typescript
function sayHello(){
  console.log(this.name)
}

const info = {
  name: 'simon',
  sayHello
}

info.sayHello() // error ç¼–è¯‘å™¨æŠ¥é”™
```

+ TypeScriptè¿›è¡Œç±»å‹æ£€æµ‹çš„ç›®çš„æ˜¯**è®©ä»£ç æ›´åŠ çš„å®‰å…¨**ï¼› 
+ æ‰€ä»¥è¿™é‡Œå¯¹äº `sayHello` çš„è°ƒç”¨æ¥è¯´ï¼Œè™½ç„¶å°†å…¶æ”¾åˆ°äº† `info` ä¸­ï¼Œé€šè¿‡ `info` å»è°ƒç”¨ï¼Œ`this` ä¾ç„¶æ˜¯æŒ‡å‘ `info` å¯¹è±¡çš„ï¼›
+ **ä½†æ˜¯å¯¹äºTypeScriptç¼–è¯‘å™¨æ¥è¯´ï¼Œè¿™ä¸ªä»£ç æ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼Œå› ä¸ºä¹Ÿæœ‰å¯èƒ½ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…é€šè¿‡åˆ«çš„å¯¹è±¡æ¥è°ƒç”¨å‡½æ•°**ã€‚æ‰€ä»¥ TypeScript ä¸å…è®¸ `this` çš„ä¸ç¡®å®šæƒ…å†µå‘ç”Ÿï¼Œæ‰€ä»¥è¦æŒ‡å®š `this` çš„ç±»å‹ã€‚



### æŒ‡å®šçš„ `this` ç±»å‹

å½“ `this` çš„ç±»å‹ä¸ç¡®å®šæ—¶ï¼ŒTypeScript éœ€è¦æŒ‡å®š `this` çš„ç±»å‹ï¼š

```typescript
type NameType = {
  name: string
}

function sayHello(this: nameType){
  console.log(this.name)
}
```



## å‡½æ•°çš„é‡è½½

ğŸŒ° ä¾‹å­ï¼šå½“å†™äº†ä¸€ä¸ª `add`å‡½æ•°ï¼Œå¸Œæœ›å¯ä»¥å¯¹å­—ç¬¦ä¸²å’Œæ•°å­—è¿›è¡Œç›¸åŠ ï¼š

```typescript
function sum(a1: number | string, a2: number | string): number | string {
  return a1 + a2 // æŠ¥é”™ï¼Œä¸èƒ½å®ç°è”åˆç±»å‹çš„ç›¸åŠ 
}
```



**å¯ä»¥ç¼–å†™ä¸åŒçš„é‡è½½ç­¾åï¼ˆoverload signaturesï¼‰æ¥è¡¨ç¤ºå‡½æ•°å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚**ä¸€èˆ¬æ˜¯ç¼–å†™ä¸¤ä¸ªæˆ–è€…ä»¥ä¸Šçš„é‡è½½ç­¾åï¼Œå†å»ç¼–å†™ä¸€ä¸ªé€šç”¨çš„å‡½æ•°ä»¥åŠå®ç°ã€‚

å¯¹äº `sum` å‡½æ•°çš„é‡è½½ï¼š

+ åœ¨è°ƒç”¨ `sum` å‡½æ•°æ—¶ï¼Œä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°ç±»å‹å†³å®šæ‰§è¡Œå‡½æ•°ä½“æ—¶ï¼Œåˆ°åº•æ‰§è¡Œå“ªä¸€ä¸ªå‡½æ•°çš„é‡è½½ç­¾åï¼š

```typescript
function sum(a1: number, a2: number): number;
function sum(a1: string, a2: string): string;
function sum(a1: any, a2: any): any {
  return a1 + a2
}

console.log(sum(1,1))
console.log(sum('aaa', 'bbb'))

// æ³¨æ„ä¸‹é¢ï¼šæœ‰çš„å®ç°ä½“å‡½æ•°ä¸èƒ½ç›´æ¥è¢«è°ƒç”¨
sum({name: 'simon'}, {age: 18})
```



### è”åˆç±»å‹çš„é‡è½½

ğŸŒ° ä¾‹å­ï¼šéœ€æ±‚ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼Œè·å–å®ƒä»¬çš„é•¿åº¦ã€‚æœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š

+ ä½¿ç”¨è”åˆç±»å‹ï¼š

  ```typescript
  function getLength(a: stirng|any[]){
    return a.length
  }
  ```

+ å®ç°å‡½æ•°çš„é‡è½½ï¼š

  ```typescript
  function getLength(a: string): number;
  function getLength(a: any[]): number;
  function getLength(a: any) {
    return a.length
  }
  ```

åœ¨å®é™…å¼€å‘ä¸­ï¼Œå°½é‡ä½¿ç”¨**è”åˆç±»å‹**å®ç°ã€‚
