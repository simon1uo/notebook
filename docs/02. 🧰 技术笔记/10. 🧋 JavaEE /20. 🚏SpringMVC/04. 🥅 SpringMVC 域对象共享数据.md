---
title: 🥅 SpringMVC 域对象共享数据
date: 2022-03-20 11:14:58
permalink: /pages/f633c8/
categories: 
  - _pages
  - 🧋 JavaEE
  - 🚏SpringMVC
tags: 
  - SpringMVC
author: 
  name: Simon
  link: https://github.com/simon1uo
---



> 域对象不能选择太小，要选择能实现功能范围最小的域对象。



## 向 `request` 域对象共享数据

### 使用 Servlet API 向 `request` 域对象共享数据



🌰 例子：

+ 在 `ScopeController` 中：

```java
@RequestMapping("/testRequestByServletAPI")
public String testRequestByServletAPI(HttpServletRequest request){
    request.setAttribute("testRequestScope", "Hello, Servlet API");
    return "success";
}
```

+ `success` 页面中获取域对象共享数据：

```html
<body>
<h1>success</h1>
<p th:text="${testRequestScope}"></p>
</body>
```



### 使用 `ModelAndView` 向 `request` 域对象共享数据

> `ModelAndView` ：模型和视图，
>
> 不管最后用的是哪种方式，最后都会封装到 `ModelAndView`。



🌰 例子：测试通过 `ModelAndView` 向 `Request` 域对象共享数据：

```java
@RequestMapping("/testModelAndView")
public ModelAndView testModelAndView(){
    ModelAndView modelAndView = new ModelAndView();
    // 处理模型数据，即向请求域request共享数据
    modelAndView.addObject("testRequestScope", "hello from ModelAndView");
    // 设置视图名称
    modelAndView.setViewName("success");
    return modelAndView; // 必须作为返回值
}
```



另外可以通过在形参中添加 `Model`，用`Model` 向域对象共享数据：

🌰 例子：

```java
@RequestMapping("/testModel")
public String testModel(Model model){
    model.addAttribute("testRequestScope", "hello from Model");
    return "success";
}
```



### 使用 Map 向`request` 域对象共享数据

通过在形参中添加 `Map` 类型，以实现键与值的关系向域对象共享数据。

🌰 例子：

```java
@RequestMapping("/testMap")
public String testMap(Map<String, Object> map){
    map.put("testRequestScope", "hello From Map");
    return "success";
}
```

### 使用 ModelMap 向`request` 域对象共享数据

通过在形参中添加 `ModelMap` 类型向 `request` 域对象共享数据：

🌰 例子：

```Java
@RequestMapping("/testModelMap")
public String testModelMap(ModelMap modelMap){
    modelMap.addAttribute("testRequestScope", "Hello from ModelMap");
    return "success";
}
```

### `Model`、`ModelMap`、`Map`的关系

**本质上，三者都是 `BindingAwareModelMap` 类型的。**不管使用哪种方法，最终数据其实都是被封装到 `ModelAndView` 类型的对象当中。

## 向 Session 域共享数据

建议使用原生 Servlet API `HttpSession` 调用 Session 会话 （SpringMVC 其实有提供相关 Session 的注解，但不太好用）。

通过在控制器方法中设置 `HttpSession` 类型的形参向 Session 域共享数据。

🌰 例子：

```java
@RequestMapping("/testSession")
public String testSession(HttpSession session){
    session.setAttribute("testSesionScope", "Hello From testSession");
    return "success";
}
```

```html
<p th:text="${session.testSessionScope}"></p>
```

## 向 application 域共享数据

通过在控制器方法中设置 `HttpSession` 类型的形参，然后从 session 中获取 application 对象，向 Application 域共享数据。



🌰 例子：

```java
@RequestMapping("/testApplication")
public String testApplication(HttpSession session){
    ServletContext application = session.getServletContext();
    application.setAttribute("testApplicationScope", "Hello from testApplication");
    return "success";
}
```

```html
<p th:text="${application.testApplicationScope}"></p>
```
