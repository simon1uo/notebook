---
title: 🎠 关系数据库
date: 2021-04-21 14:52:34
permalink: /pages/dab3cc/
categories: 
  - 数据库基础
tags: 
  - null
author: 
  name: Simon
  link: https://github.com/simon1uo
---

## 关系模型概述

## :one: 关系的数据结构

### 关系的定义

+ **域**： 一组具有相同数据类型的集合；

+ **笛卡尔积**
  + 元组
  + 分量
+ 关系：

### 关系模型的相关概念

+ **属性**：对关系中**元组的分量**的描述，用**属性名**表示，与定义关系的一组域对应；

  > 统一关系中，**属性名不能相同**；

  > 例如：
  >
  > 1. `学生`关系可以用`姓名`、`性别`、`年龄`等属性描述；
  > 2. `图书关系`可以用`图书编号`、`书名`、`出版社`、`价格`等属性描述；

+ **域**：属性的**取值范围**；

  > 统一关系中的，**两个属性名称不能相通**；

+ **关系模式**：关系的描述；指出**关系的结构，由哪些属性构成、属性来自哪些域、属性与域之间的影响**；

  > 例如：
  >
  > 1. **学生的关系模式可以表示为**
  >
  >    **$学生(姓名,性别,年龄)$**

+ 关系实例：一个给定关系的某一时刻的元组的集合，即**当前关系的值**；记为$r(R)$；



+ 键：

  + **候选键** / 候选码：关系中某一属性或属性集能**唯一标识**一个元组，而其任意一个真子集无此性质；
    
    + 保证关系实例上任意两个元组的值在候选键的属性上不同；（对于关系上的所有实例都具有**唯一性**）；
    + 通常在关系模式中的属性**下划线**表示该属性为候选键。例如：学生(<u>姓名</u>,性别,年龄)​
  
  + **主键** / 主码：每个关系**至少存在一个候选键**，若一个关系有多个候选键，则选择其中一个为主键。
  
  + **外键** / 外码：**关系$R$的一个属性$F$** 与 **关系$S$的主键$K~s~$** (值)对应，则该属性为**关系$R$的外键**；
  
    > 参照关系$R$；被参照关系(目标关系)$S$；
    >
    > + 关系$R$与关系$S$可以是同一个关系。
    > + 主键$Ks$与外键$F$的命名可以**不同**，但必须定义在同一域（组）上

***

### **关系的性质**

+ **元组个数的有限性**；
+ **属性名的唯一性**，关系中不能有重名的属性；
+ **属性的次序无关性**；
+ **元组的唯一性**，关系中不能出现完全相同的两个元组；
+ **元组的次序无关性**；
+ **远足分量的原子性**，每个分量都必须是不可分割的数据项；
+ **分量值**域统一性。每个属性列中的元组分量是统一数据类型、来自同一个域；



## :two: 关系的完整性约束

三类完整性：**实体完整性、参照完整性、用户定义完整性；**

+ **实体完整性和参照完整性是关系模型必须满足的完整性约束条件**；
+ **用户定义的完整性是应用领域需要遵循的条件，体现在具体领域中的语义约束**；

### 实体完整性

+ 实体：用关系描述；
+ 关系：是元组的集合；

为了候选键能唯一标识一个元组，则需要对候选键的每个主属性进行约束：

​	**实体完整性约束**：若属性$A$是关系$R$的主属性，则属性$A$不能为**空值**；

### 参照完整性

​	**参照完整性约束**：若属性$F$是关系$R$中的**外键**，与关系$S$中的**主键**$Ks$对应，则$F$**的取值**只能为空值或者为关系$S$中某个元组的$Ks$值；

> 例如：学生实体 / 专业实体 的关系：
>
> 1. 学生(<u>学号</u>,姓名,性别)
>
> 2. 专业(<u>专业号</u>,专业名)
>
>    若`专业号`是学生关系的外键，又是专业关系的主键，则取值只能是：
>
>    1. 空值，表示给学生未分配专业；
>    2. 非空值，必须是专业关系中某个元组存在的`专业号`值，表示学生只能就读于某个存在的专业；

说明：

1. 可以是同一个关系之间不同元组之间的参照关系；

   > 例如：
   >
   > 关系：课程(<u>课程号</u>,课程名,先修课程号)
   >
   > 如果规定每门课的直接先修课程只能是所开设课程的一门，则`先修课程号`就是课程关系中的外键，对应的主键为`课程号`；

2. 外键不一定要与对应的主键同名；

   > 例如：`课程号`与`先修课程号`，但是必须要在同一个**值域**；

   实际应用中，为了方便识别，当外键与主键属于不同关系时，往往取相同的名字；

3. 若外键$F$为属性集且为**空值**，则$F$中的每个属性值均为空值。$F$是否能为空值要视实际情况而定；

   > 如果被定义为为主键，则根据实体完整性规则不能取空值；

### 用户自定义完整性

是用户定义的一些特殊的约束条件，反映某一具体应用所涉及的数据必须满足的语义要求；

> 例如：
>
> 1. 属性的取值：“只能取整数”、“字符串的最大长度为30”
> 2. 取值范围：“取值在某个数与某个数之间”、“取值大于某个数”
> 3. 各属性间的关系约束：“某属性与某属性存在算术关系”



### 完整性控制机制

DBMS必须提供：

1. 定义功能，提供定义完整性约束条件
2. 检查功能，查看是否违背完整性约束条件
3. 保护功能，保护数据完整性



## :three:关系代数

是一种过程化的查询语言，用对**关系的运算**表达**关系操作**；

**关系代数的原子操作数包括**：

+ **代表关系的变量**；
+ **代表关系的常量**；

**关系代数的运算符包括两类**：

![image-20210704002816839](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/NJHKoQ.png)

+ 传统的集合运算：并、差、交、广义笛笛卡儿积；
+ 专门的关系运算：投影、选择、连接、除；

