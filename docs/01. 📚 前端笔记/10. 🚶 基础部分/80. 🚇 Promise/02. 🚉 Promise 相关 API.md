---
title: ğŸš‰ Promise ç›¸å…³ API
date: 2022-04-20 23:35:30
permalink: /pages/f629e5/
categories: 
  - ğŸ“š å‰ç«¯ç¬”è®°
  - ğŸš¶ åŸºç¡€éƒ¨åˆ†
  - ğŸš‡ Promise
tags: 
  - null
author: 
  name: Simon
  link: https://github.com/simon1uo
---
### Promise æ„é€ å‡½æ•°

`Promise (excutor) {}`

+ `executor` å‡½æ•°ï¼š æ‰§è¡Œå™¨ `(resolve, reject) => {}`
+ `resolve` å‡½æ•°ï¼šå†…éƒ¨å®šä¹‰æˆåŠŸæ—¶æˆ‘ä»¬è°ƒç”¨çš„å‡½æ•° `value => {}` 
+ `reject` å‡½æ•°ï¼šå†…éƒ¨å®šä¹‰å¤±è´¥æ—¶æˆ‘ä»¬è°ƒç”¨çš„å‡½æ•° `reason => {}` 

è¯´æ˜ï¼š`executor` ä¼šåœ¨ `Promise` å†…éƒ¨**ç«‹å³åŒæ­¥è°ƒç”¨**ï¼ˆâš ï¸ï¼‰ï¼Œå¼‚æ­¥æ“ä½œåœ¨æ‰§è¡Œå™¨ä¸­æ‰§è¡Œã€‚



### `Promise.prototype.then` æ–¹æ³•

`(onResolved, onRejected) => {}` 

+ onResolved å‡½æ•°ï¼šæˆåŠŸçš„å›è°ƒå‡½æ•° `(value) => {} `
+ onRejected å‡½æ•°ï¼šå¤±è´¥çš„å›è°ƒå‡½æ•° `(reason) => {} `

è¯´æ˜ï¼šæŒ‡å®šç”¨äºå¾—åˆ°æˆåŠŸ `value` çš„**æˆåŠŸå›è°ƒ**å’Œç”¨äºå¾—åˆ°å¤±è´¥ `reason` çš„å¤±è´¥å›è°ƒï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ã€‚



### `Promise.prototype.catch` æ–¹æ³• 

`(onRejected) => {} `

+ `onRejected` å‡½æ•°ï¼šå¤±è´¥çš„å›è°ƒå‡½æ•° `(reason) => {} `

è¯´æ˜ï¼š`then()` çš„è¯­æ³•ç³–, ç›¸å½“äºï¼š `then(undefined, onRejected)` 



ğŸŒ° ä¾‹å­ï¼š

::: details

```js
let p = new Promise((resolve, reject)=>{
  reject('error')
})

p.catch(reason => {
  console.log(reason)
})
```

:::



### `Promise.resolve` æ–¹æ³•

`(value) => {}`

+ `value`ï¼šæˆåŠŸçš„æ•°æ®æˆ– Promise å¯¹è±¡

è¯´æ˜ï¼šè¿”å›ä¸€ä¸ªæˆåŠŸ/å¤±è´¥çš„ Promise å¯¹è±¡



ğŸŒ° ä¾‹å­ï¼š

```js
let p1 = Promise.resolve(111)
console.log(p1) // ä¼ å…¥çš„å‚æ•°ä¸ºéPromiseç±»å‹çš„å¯¹è±¡ï¼Œåˆ™è¿”å›çš„ç»“æœä¸ºæˆåŠŸçš„Promiseå¯¹è±¡

// å¦‚æœä¼ å…¥çš„å‚æ•°ä¸ºPromiseå¯¹è±¡ï¼Œå‚æ•°çš„ç»“æœå†³å®šäº†resolveçš„ç»“æœ
let p2 = Promise.resolve(new Promise((resolve, reject)=>{
  // resolve("success")
  reject("Error")
}))
// console.log(p2);
p2.catch(reason => {
  console.log(reason)
})
```



### `Promise.reject` æ–¹æ³•

`(reason) => {}`

+ `reason`ï¼šå¤±è´¥çš„åŸå› ã€‚

è¯´æ˜ï¼š**è¿”å›ä¸€ä¸ªå¤±è´¥çš„ Promise å¯¹è±¡**ã€‚



ğŸŒ° ä¾‹å­ï¼š
```js
let p = Promise.reject(666) // æ— è®ºä¼ å…¥ä»€ä¹ˆç±»å‹çš„å€¼éƒ½è¿”å›å¤±è´¥çš„Promiseå¯¹è±¡
let p2 = Promise.reject(new Promise((resolve, reject)=>{
  resolve("success")
}))
console.log(p2) // p2çš„çŠ¶æ€ä¸ºå¤±è´¥ï¼Œå€¼ä¸ºä¼ å…¥Promiseå¯¹è±¡çš„å€¼
```



### `Promise.all` æ–¹æ³•

`(promises) => {}`

+ `promises` ï¼šåŒ…å« n ä¸ª Promiseçš„æ•°ç»„

è¯´æ˜ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œ**åªæœ‰æ‰€æœ‰çš„ Promise éƒ½æˆåŠŸæ‰æˆåŠŸ**ï¼Œ**åªè¦æœ‰ä¸€ä¸ªå¤±è´¥äº†å°±ç›´æ¥å¤±è´¥**ã€‚

```js
let p1 = new Promise((resolve, reject) => {
  resolve('OK');
})
// let p2 = Promise.resolve('Success');
let p2 = Promise.reject('Error');
let p3 = Promise.resolve('Oh Yeah');

//
const result = Promise.all([p1, p2, p3]);
console.log(result);
```



### `Promise.race` æ–¹æ³•

` (promises) => {}` 

+ `promises` ï¼šåŒ…å« n ä¸ª Promise å¯¹è±¡çš„æ•°ç»„ã€‚

è¯´æ˜ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œ**ç¬¬ä¸€ä¸ªå®Œæˆçš„ Promise çš„ç»“æœçŠ¶æ€å°±æ˜¯æœ€ç»ˆçš„ç»“æœçŠ¶æ€ã€‚**



ğŸŒ° ä¾‹å­ï¼š

```js
let p1 = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve('OK');
  }, 1000);})
let p2 = Promise.resolve('Success');
let p3 = Promise.resolve('Oh Yeah');

const result = Promise.race([p1,p2,p3])
console.log(result) // p2çš„ç»“æœçŠ¶æ€
```



