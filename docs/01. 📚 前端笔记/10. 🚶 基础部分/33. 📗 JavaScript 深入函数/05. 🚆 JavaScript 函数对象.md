---
title:  ğŸš† JavaScript å‡½æ•°å¯¹è±¡
date: 2022-05-10 00:40:22
permalink: /pages/5b86ee/
categories:
  -  ğŸ“š å‰ç«¯ç¬”è®°
  -  ğŸš¶ åŸºç¡€éƒ¨åˆ†
  -  ğŸ“— JavaScript æ·±å…¥å‡½æ•°
tags:
  - 
---
JavaScript ä¸­å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ç±»å‹ã€‚å¯ä»¥æŠŠ å‡½æ•° ç†è§£ä¸ºå¯ä»¥è¢«è°ƒç”¨çš„ **è¡Œä¸ºå¯¹è±¡**ï¼ˆAction Objectï¼‰ï¼Œä¸ä»…å¯ä»¥è°ƒç”¨å®ƒä»¬ï¼Œè¿˜å¯ä»¥å½“ä½œå¯¹è±¡æ¥å¤„ç†ï¼šå¢ / åˆ å±æ€§ã€æŒ‰å¼•ç”¨ä¼ é€’ç­‰ã€‚

## å‡½æ•°å±æ€§

### `name` å‡½æ•°åç§°

å‡½æ•°å¯¹è±¡ä¸­åŒ…å«ä¸€äº›å®ç”¨çš„å±æ€§ã€‚

ğŸŒ° ä¾‹å­ / é€šè¿‡å±æ€§ `name` è®¿é—®å‡½æ•°çš„åå­—ï¼š
```js
function sayHi() {
  alert("Hi");
}

console.log(sayHi.name)
```

> å¯¹äºå‡½æ•°çš„åå­—å¤åˆ¶ï¼šå³ä¾¿å‡½æ•°åˆ›å»ºæ—¶æ²¡æœ‰åå­—ï¼Œåç§°èµ‹å€¼çš„é€»è¾‘ä¹Ÿèƒ½ç»™å®ƒèµ‹äºˆä¸€ä¸ªæ­£ç¡®çš„åå­—ï¼Œç„¶åè¿›è¡Œèµ‹å€¼ã€‚
>
> ```js
> let sayHi = function() {
>   alert("Hi");
> };
> 
> console.log(sayHi.name) // sayHi
> ```
>
> ä»¥é»˜è®¤å€¼æ–¹å¼å®Œæˆèµ‹å€¼æ—¶ä¹Ÿä¼šè‡ªåŠ¨èµ‹äºˆæ­£ç¡®çš„å‡½æ•°åå­—ï¼š
> ```js
> function f(sayHi = function() {}) {
>   console.log(sayHi.name); // sayHi
> }
> 
> ```

è¿™ç§å‡½æ•°å‘½åæ–¹å¼ä¸ºã€Œ**ä¸Šä¸‹æ–‡å‘½å**ã€ã€‚å¦‚æœå‡½æ•°è‡ªå·±æ²¡æœ‰æä¾›ï¼Œé‚£ä¹ˆåœ¨èµ‹å€¼ä¸­ï¼Œä¼šæ ¹æ®ä¸Šä¸‹æ–‡æ¥æ¨æµ‹ä¸€ä¸ªã€‚



ğŸŒ° ä¾‹å­ / å¯¹äºå¯¹è±¡ä¸­çš„å‡½æ•°ä¹Ÿé€‚ç”¨ ä¸Šä¸‹æ–‡å‘½åï¼š

```js
let user = {

  sayHi() {
    // ...
  },

  sayBye: function() {
    // ...
  }

}

console.log(user.sayHi.name)
console.log(user.sayBye.name)
```



ğŸŒ° ä¾‹å­ / æ— æ³•æ¨æµ‹å‡ºå‡½æ•°åå­—çš„æƒ…å†µï¼Œå‡½æ•°æ˜¯åœ¨æ•°ç»„ä¸­åˆ›å»ºçš„ï¼š

```js
let arr = [function() {}];
console.log(arr[0].name) // ''
```

> ç”±äºå¼•æ“æ— æ³•è®¾ç½®æ­£ç¡®çš„å‡½æ•°åå­—ï¼Œæ‰€ä»¥æ²¡æœ‰å€¼ã€‚

å®é™…åº”ç”¨ä¸­ï¼Œå‡½æ•°ä¸€èˆ¬æ˜¯ç”±åå­—ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚



### `length`

ğŸŒ° ä¾‹å­ / å‡½æ•°çš„ `length` å±æ€§è¿”å›å‡½æ•°å…¥å‚çš„ä¸ªæ•°ï¼š

```js
function f1(a) {}
function f2(a, b) {}
function many(a, b, ...more) {}

console.log(f1.length) // 1
console.log(f2.length) // 2
console.log(many.length) // 2
```

::: tip

å¯ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­çœ‹å‡ºï¼ŒRest è¯­æ³•çš„å‚æ•°ä¸è®¡å…¥å‚æ•°çš„ä¸ªæ•°ã€‚

:::



ğŸŒ° ä¾‹å­ / å±æ€§ `length` æœ‰æ—¶åœ¨æ“ä½œå…¶å®ƒå‡½æ•°çš„å‡½æ•°ä¸­ç”¨äºåš [å†…çœ/è¿è¡Œæ—¶æ£€æŸ¥ï¼ˆintrospectionï¼‰](https://zh.wikipedia.org/wiki/å†…çœ_(è®¡ç®—æœºç§‘å­¦))ã€‚

```js
function ask(question, ...handlers) {
  let isYes = confirm(question);

  for(let handler of handlers) {
    if (handler.length == 0) {
      if (isYes) handler();
    } else {
      handler(isYes);
    }
  }

}

// å¯¹äºç§¯æçš„å›ç­”ï¼Œä¸¤ä¸ª handler éƒ½ä¼šè¢«è°ƒç”¨
// å¯¹äºè´Ÿé¢çš„å›ç­”ï¼Œåªæœ‰ç¬¬äºŒä¸ª handler è¢«è°ƒç”¨
ask("Question?", () => alert('You said yes'), result => alert(result));
```

>  [å¤šæ€æ€§](https://en.wikipedia.org/wiki/Polymorphism_(computer_science)) â€”â€” æ ¹æ®å‚æ•°çš„ç±»å‹ï¼Œæˆ–è€…æ ¹æ®åœ¨å…·ä½“æƒ…æ™¯ä¸‹çš„ `length` æ¥åšä¸åŒçš„å¤„ç†ã€‚è¿™ç§æ€æƒ³åœ¨ JavaScript çš„åº“é‡Œæœ‰åº”ç”¨ã€‚



### è‡ªå®šä¹‰å±æ€§

åœ¨å‡½æ•°å¯¹è±¡ä¸­å¯ä»¥æ·»åŠ è‡ªå·±çš„å±æ€§ã€‚

ğŸŒ° ä¾‹å­ï¼š 

```js
function sayHi() {
  console.log("Hi");

  // è®¡ç®—è°ƒç”¨æ¬¡æ•°
  sayHi.counter++;
}
sayHi.counter = 0; 

sayHi(); // Hi
sayHi(); // Hi
console.log(`called ${sayHi.counter} times`) // called 2 times
```



::: warning 

**å‡½æ•°ä¸­çš„å±æ€§ä¸æ˜¯å˜é‡**ã€‚è¢«èµ‹å€¼ç»™å‡½æ•°çš„å±æ€§ï¼Œæ¯”å¦‚ `sayHi.counter = 0`ï¼Œ**ä¸ä¼š** åœ¨å‡½æ•°å†…å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ `counter`ã€‚æ¢å¥è¯è¯´ï¼Œå±æ€§ `counter` å’Œå˜é‡ `let counter` æ˜¯æ¯«ä¸ç›¸å…³çš„ä¸¤ä¸ªä¸œè¥¿ã€‚

å¯ä»¥æŠŠå‡½æ•°å½“ä½œå¯¹è±¡ï¼Œåœ¨å®ƒé‡Œé¢å­˜å‚¨å±æ€§ï¼Œä½†æ˜¯è¿™å¯¹å®ƒçš„æ‰§è¡Œæ²¡æœ‰ä»»ä½•å½±å“ã€‚å˜é‡ä¸æ˜¯å‡½æ•°å±æ€§ï¼Œåä¹‹äº¦ç„¶ã€‚å®ƒä»¬ä¹‹é—´æ˜¯å¹³è¡Œçš„ã€‚

:::



ğŸŒ° ä¾‹å­ / å‡½æ•°å¯¹è±¡ä¸­çš„å±æ€§å¯ä»¥ç”¨æ¥æ›¿ä»£ **é—­åŒ…**ï¼š

```js
function makeCounter() {
  // let count = 0
  
  function counter() {
    return counter.count++
  }
  
  counter.count = 0
	return counter
}

let counter = makeCounter()
console.log(counter()) // 0
console.log(counter()) // 1
```

> ç°åœ¨ `count`è¢«ç›´æ¥å­˜å‚¨åœ¨å‡½æ•°é‡Œï¼Œè€Œä¸æ˜¯å®ƒå¤–éƒ¨çš„è¯æ³•ç¯å¢ƒã€‚
>
> **å¯¹æ¯” é—­åŒ… å’Œ å‡½æ•°å±æ€§**ï¼šä¸¤è€…æœ€å¤§çš„ä¸åŒå°±æ˜¯å¦‚æœ `count` çš„å€¼ä½äºå¤–å±‚ï¼ˆå‡½æ•°ï¼‰å˜é‡ä¸­ï¼Œé‚£ä¹ˆå¤–éƒ¨çš„ä»£ç æ— æ³•è®¿é—®åˆ°å®ƒï¼Œåªæœ‰åµŒå¥—çš„å‡½æ•°å¯ä»¥ä¿®æ”¹å®ƒã€‚è€Œå¦‚æœå®ƒæ˜¯ç»‘å®šåˆ°å‡½æ•°çš„ï¼Œé‚£ä¹ˆå°±å¾ˆå®¹æ˜“ï¼š
>
> ```js
> let counter = makeCounter();
> 
> counter.count = 10;
> console.log(counter()); // 10
> ```
>
> æ‰€ä»¥é€‰æ‹©å“ªä¸€ç§æ–¹æ³•ä¾ç…§å®é™…æƒ…å†µé€‰æ‹©ã€‚



### å‘½åå‡½æ•°è¡¨è¾¾å¼

å‘½åå‡½æ•°è¡¨è¾¾å¼ï¼ˆNFEï¼ŒNamed Function Expressionï¼‰ï¼šæŒ‡ **å¸¦æœ‰åå­—** çš„å‡½æ•°è¡¨è¾¾å¼çš„æœ¯è¯­ã€‚

ğŸŒ° ä¾‹å­ï¼š
```js
let sayHi = function func(who) {
  console.log(`Hello, ${who}`);
};
```

> åŠ äº† `func` åå­—åä»ç„¶æ˜¯ä¸€ä¸ª **å‡½æ•°è¡¨è¾¾å¼**ï¼Œåœ¨ `function` åé¢åŠ ä¸€ä¸ªåå­— `func` æ²¡æœ‰ä½¿å®ƒæˆä¸ºä¸€ä¸ª **å‡½æ•°å£°æ˜**ï¼Œå› ä¸ºå®ƒä»ç„¶æ˜¯ä½œä¸ºèµ‹å€¼è¡¨è¾¾å¼ä¸­çš„ä¸€éƒ¨åˆ†è¢«åˆ›å»ºçš„ã€‚æ·»åŠ è¿™ä¸ªåå­—å½“ç„¶ä¹Ÿæ²¡æœ‰æ‰“ç ´ä»»ä½•ä¸œè¥¿ã€‚

å‡½æ•°ä»ç„¶å¯ä»¥é€šè¿‡ `sayHi` è°ƒç”¨ï¼š
```js
sayHi('Simon')
```



å…³äºåå­— `func` æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼Œè¿™å°±æ˜¯æ·»åŠ å®ƒçš„åŸå› ï¼š

1. **å®ƒå…è®¸å‡½æ•°åœ¨å†…éƒ¨å¼•ç”¨è‡ªå·±**ã€‚
2. **å®ƒåœ¨å‡½æ•°å¤–æ˜¯ä¸å¯è§çš„**ã€‚

ğŸŒ° ä¾‹å­ / å½“å‡½æ•°æ²¡æœ‰å¸¦å‚æ•°å…è®¸è°ƒç”¨è‡ªèº«ï¼š

```js
let sayHi = function func(who) {
  if (who) {
    console.log(`Hello, ${who}`);
  } else {
    func("Guest"); // ä½¿ç”¨ func å†æ¬¡è°ƒç”¨å‡½æ•°è‡ªèº«
  }
};

sayHi() // Hello, Guest

func() // åœ¨å‡½æ•°å¤–ä¸å¯è§
```



> å¦‚æœä»…ä»…ä½¿ç”¨ `sayHi` çš„å‘½ååµŒå¥—è°ƒç”¨ï¼š
> ```js
> let sayHi = function(who) {
>   if (who) {
>     console.log(`Hello, ${who}`);
>   } else {
>     sayHi("Guest");
>   }
> };
> ```
>
> å½“å‡½æ•°çš„å‘½åæ›´æ¢åï¼š
>
> ```js
> let welcome = sayHi
> sayHi = null
> 
> welcome() // Error
> ```
>
> ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¯¥å‡½æ•°ä»å®ƒçš„å¤–éƒ¨è¯æ³•ç¯å¢ƒè·å– `sayHi`ã€‚æ²¡æœ‰å±€éƒ¨çš„ `sayHi` äº†ï¼Œæ‰€ä»¥ä½¿ç”¨å¤–éƒ¨å˜é‡ã€‚è€Œå½“è°ƒç”¨æ—¶ï¼Œå¤–éƒ¨çš„ `sayHi` æ˜¯ `null`ã€‚
>
> æ‰€ä»¥ç»™å‡½æ•°è¡¨è¾¾å¼å‘½åå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼š
>
> ```js
> let sayHi = function func(who) {
>   if (who) {
>     console.log(`Hello, ${who}`);
>   } else {
>     func("Guest"); // ç°åœ¨ä¸€åˆ‡æ­£å¸¸
>   }
> };
> 
> let welcome = sayHi;
> sayHi = null;
> 
> welcome();
> ```
>
> æ­¤æ—¶å¯ç”¨äº†ï¼Œåå­— `func` æ˜¯å‡½æ•°å±€éƒ¨åŸŸçš„ã€‚å®ƒä¸æ˜¯ä»å¤–éƒ¨è·å–çš„ï¼ˆè€Œä¸”å®ƒå¯¹å¤–éƒ¨ä¹Ÿæ˜¯ä¸å¯è§çš„ï¼‰ã€‚è§„èŒƒç¡®ä¿å®ƒåªä¼šå¼•ç”¨å½“å‰å‡½æ•°ã€‚
>
> å¤–éƒ¨ä»£ç ä»ç„¶æœ‰è¯¥å‡½æ•°çš„ `sayHi` æˆ– `welcome` å˜é‡ã€‚è€Œä¸” `func` æ˜¯ä¸€ä¸ªã€Œå†…éƒ¨å‡½æ•°åã€ï¼Œå¯ç”¨äºå‡½æ•°åœ¨è‡ªèº«å†…éƒ¨è¿›è¡Œè‡ªè°ƒç”¨ã€‚

::: warning

å¯¹äº **å‡½æ•°å£°æ˜** ä¸­æ²¡æœ‰æ·»åŠ ã€Œå†…éƒ¨ã€åçš„è¯­æ³•ã€‚ã€Œå†…éƒ¨åã€ç‰¹æ€§åªé’ˆå¯¹ **å‡½æ•°è¡¨è¾¾å¼**ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜ã€‚å½“éœ€è¦ä¸€ä¸ªå¯é çš„å†…éƒ¨åæ—¶ï¼Œå°±å¯ä»¥ **æŠŠå‡½æ•°å£°æ˜é‡å†™æˆå‡½æ•°è¡¨è¾¾å¼** äº†ã€‚

:::



## æ€»ç»“

+ å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚
+ å‡½æ•°æœ‰å±æ€§ï¼š
  + `name` ï¼š**å‡½æ•°çš„åå­—**ã€‚é€šå¸¸å–è‡ªå‡½æ•°å®šä¹‰ï¼Œä½†å¦‚æœå‡½æ•°å®šä¹‰æ—¶æ²¡è®¾å®šå‡½æ•°åï¼ŒJavaScript ä¼šå°è¯•é€šè¿‡å‡½æ•°çš„ä¸Šä¸‹æ–‡çŒœä¸€ä¸ªå‡½æ•°åï¼ˆä¾‹å¦‚æŠŠèµ‹å€¼çš„å˜é‡åå–ä¸ºå‡½æ•°åï¼‰ã€‚
  + `length` ï¼šå‡½æ•°å®šä¹‰æ—¶çš„ **å…¥å‚çš„ä¸ªæ•°**ã€‚Rest å‚æ•°ä¸å‚ä¸è®¡æ•°ã€‚
+ å‡½æ•°çš„è‡ªå®šä¹‰å±æ€§ï¼šå‡½æ•°å¯ä»¥å¸¦æœ‰é¢å¤–çš„å±æ€§ã€‚å¾ˆå¤šçŸ¥åçš„ JavaScript åº“éƒ½å……åˆ†åˆ©ç”¨äº†è¿™ä¸ªåŠŸèƒ½ã€‚
  + å¯ä»¥åˆ›å»ºåˆ›å»ºä¸€ä¸ªã€Œä¸»ã€å‡½æ•°ï¼Œç„¶åç»™å®ƒé™„åŠ å¾ˆå¤šå…¶å®ƒã€Œè¾…åŠ©ã€å‡½æ•°ã€‚[jQuery](https://jquery.com/) åº“åˆ›å»ºäº†ä¸€ä¸ªåä¸º `$` çš„å‡½æ•°ã€‚[lodash](https://lodash.com/) åº“åˆ›å»ºä¸€ä¸ª `_` å‡½æ•°ï¼Œç„¶åä¸ºå…¶æ·»åŠ äº† `_.add`ã€`_.keyBy` ä»¥åŠå…¶å®ƒå±æ€§ã€‚
  + å®é™…ä¸Šï¼Œå®ƒä»¬è¿™ä¹ˆåšæ˜¯ä¸ºäº†å‡å°‘å¯¹å…¨å±€ç©ºé—´çš„æ±¡æŸ“ï¼Œè¿™æ ·ä¸€ä¸ªåº“å°±åªä¼šæœ‰ä¸€ä¸ªå…¨å±€å˜é‡ã€‚è¿™æ ·å°±é™ä½äº†å‘½åå†²çªçš„å¯èƒ½æ€§ã€‚
+ å‘½åå‡½æ•°è¡¨è¾¾å¼ NFE ï¼šå‡½æ•°æ˜¯é€šè¿‡å‡½æ•°è¡¨è¾¾å¼çš„å½¢å¼è¢«å£°æ˜çš„ï¼ˆä¸æ˜¯åœ¨ä¸»ä»£ç æµé‡Œï¼‰ï¼Œå¹¶ä¸”é™„å¸¦äº†åå­—ã€‚è¿™ä¸ªåå­—å¯ä»¥ç”¨äºè¯¥å‡½æ•°å†…éƒ¨è‡ªæˆ‘è°ƒç”¨ï¼Œå¹¶ä¸”å¤–éƒ¨ä¸å¯è§ã€‚



## å®ä¾‹

### åˆ©ç”¨å‡½æ•°å±æ€§ç»™å‡½æ•°æä¾›æ›´å¤šçš„æ–¹æ³•

> ä¿®æ”¹ `makeCounter()` ä»£ç ï¼Œä½¿å¾— counter å¯ä»¥è¿›è¡Œå‡ä¸€å’Œè®¾ç½®å€¼çš„æ“ä½œï¼š
>
> - `counter()` åº”è¯¥è¿”å›ä¸‹ä¸€ä¸ªæ•°å­—ã€‚
> - `counter.set(value)` åº”è¯¥å°† `count` è®¾ç½®ä¸º `value`ã€‚
> - `counter.decrease()` åº”è¯¥æŠŠ `count` å‡ 1ã€‚

::: details

```js
function makeCounter() {
  let count = 0
  
  function counter() {
    return count++
  }
  
  counter.set = (value) => count = value
  counter.decrease = () => count--
  
  return counter
}
```

åœ¨å±€éƒ¨å˜é‡ä¸­ä½¿ç”¨ `count`ï¼Œè€Œè¿›è¡ŒåŠ æ³•æ“ä½œçš„æ–¹æ³•æ˜¯ç›´æ¥å†™åœ¨ `counter` ä¸­çš„ã€‚å®ƒä»¬å…±äº«åŒä¸€ä¸ªå¤–éƒ¨è¯æ³•ç¯å¢ƒï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®å½“å‰çš„ `count`ã€‚

:::



### åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡ä»»æ„æ•°é‡æ‹¬å·æ±‚å’Œ

> å†™ä¸€ä¸ªå‡½æ•° `sum`ï¼Œå®ƒæœ‰è¿™æ ·çš„åŠŸèƒ½ï¼š
>
> ```javascript
> sum(1)(2) == 3; // 1 + 2
> sum(1)(2)(3) == 6; // 1 + 2 + 3
> sum(5)(-1)(2) == 6
> sum(6)(-1)(-2)(-3) == 0
> sum(0)(1)(2)(3)(4)(5) == 15
> ```



::: details

```js
function sum(a){
  let currentSum = a
  
  function f(b) {
    currentSum += b
    return f
  }
  
  f.toString() = function () {
    return currentSum
  }
  
  return f
}
```

`sum` å‡½æ•°åªå·¥ä½œä¸€æ¬¡ï¼Œå®ƒè¿”å›äº†å‡½æ•° `f`ã€‚ç„¶åï¼Œæ¥ä¸‹æ¥çš„æ¯ä¸€æ¬¡å­è°ƒç”¨ï¼Œ`f` éƒ½ä¼šæŠŠè‡ªå·±çš„å‚æ•°åŠ åˆ°æ±‚å’Œ `currentSum` ä¸Šï¼Œç„¶å `f` è‡ªèº«ã€‚

æ³¨æ„ï¼Œ**åœ¨ `f` çš„æœ€åä¸€è¡Œæ²¡æœ‰é€’å½’ã€‚** åªæ˜¯è¿”å›äº†å‡½æ•°è‡ªèº«ï¼Œç„¶åå†æŒ‰ç…§éœ€è¦æ‰ä¼šè¢«è°ƒç”¨ã€‚

:::