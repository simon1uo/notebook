---
title: 🪄 JavaScript 函数
date: 2022-03-11 14:14:15
permalink: /pages/d3b2b4/
categories: 
  - 📚 前端笔记
  - 🚶 基础部分
  - 🏃 JavaScript 进阶高级
tags: 
  - JavaScript
author: 
  name: Simon
  link: https://github.com/simon1uo
---

🔗 相关链接：[JavaScript 基础 - 函数](/pages/b51680/#javascript-函数)

## 回调函数

:star: **回调函数的定义**：**被定义的、没有被调用的、但最后它执行了**。

**常见的回调函数有**：

+ DOM 事件回调函数

```js
document.getElementById('btn').onclick = function () {
    alert(this.innerHTML);
}
```

+ 定时器回调函数

```js
setTimeout(function (){
    alert('到点了')
}, 2000)
```

+ AJAX 请求回调函数
+ 生命周期回调函数



## IIEF

全称 *Immediately-Invoed Function Expression*，函数的立即调用。

作用：

+ **隐藏实现**
+ **不会污染外部的（全局）命名空间**（*局部变量）
+ **用来编码 JavaScript 模块**



🌰 例子：

（1）

```js
(function (){
  var a = 3
  cosole.log(a)
})()
```



（2）匿名函数自调用

```js
;(function (){
    var a= 1
    function test() {
        console.log(++a)
    }
    window.$ = function (){
        // 向外暴露一个全局对象
        return {
            test: test
        }
    }
})()

$().test()
```

::: tip

+ `$` 是一个函数
+ `$` 执行返回后的是一个对象

:::





## 函数中的 `this`



分析 🌰 的 `this` ：

```js
function Person(color) {
    console.log(this)
    this.color = color

    this.getColor = function (){
        console.log(this)
        return this.color
    }

    this.setColor = function () {
        console.log(this)
        this.color = color
    }
}
```



```js
Person("RED") // window
```

```js
var p = new Person("yellow") // p
```

```js
p.getColor() // p
```

```js
var obj = {}
p.setColor.call(obj, "black") // obj 
```

```js
var test = p.setColor
test() // window
```



🌰（2）

```js
function fun1(){
  function fun2(){
    cosole.log(this)
  }
}

fun2() // window 
```



❓ `this` 是什么：

+ 任何函数本质上都是**通过某个对象来调用的**，:star: **如果没有制定就是 `window`** 。

+ 所有函数内部都有一个变量 `this` 
+ 它的值是调用函数的当前对象

