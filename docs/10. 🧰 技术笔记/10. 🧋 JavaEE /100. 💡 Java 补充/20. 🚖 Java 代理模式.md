---
title: ğŸš– Java ä»£ç†æ¨¡å¼
date: 2022-03-02 17:34:16
permalink: /pages/f43979/
categories: 
  - ğŸ§‹ JavaEE
  - ğŸ’¡ Java è¡¥å……
tags: 
  - Java
author: 
  name: Simon
  link: https://github.com/simon1uo
---

+ Java ä»£ç†çš„ç‰¹å¾æ˜¯ä»£ç†ç±»ä¸å§”æ‰˜ç±»æœ‰åŒæ ·çš„æ¥å£ï¼Œä»£ç†ç±»ä¸»è¦è´Ÿè´£å§”æ‰˜ç±»é¢„å¤„ç†æ¶ˆæ¯ã€è¿‡æ»¤æ¶ˆæ¯ã€æŠŠæ¶ˆæ¯è½¬å‘ç»™å§”æ‰˜ç±»ï¼Œä»¥åŠäº‹åå¤„ç†æ¶ˆæ¯ç­‰ã€‚

+ ä»£ç†ç±»ä¸å§”æ‰˜ç±»ä¹‹é—´é€šå¸¸ä¼šå­˜åœ¨å…³è”å…³ç³»ï¼Œä¸€ä¸ªä»£ç†ç±»çš„å¯¹è±¡ä¸ä¸€ä¸ªå§”æ‰˜ç±»çš„å¯¹è±¡å…³è”ï¼Œä»£ç†ç±»çš„æœ¬èº«å¹¶ä¸çœŸæ­£å®ç°æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨å§”æ‰˜ç±»çš„å¯¹è±¡çš„ç›¸å…³æ–¹æ³•ï¼Œæ¥æä¾›ç‰¹å®šçš„æœåŠ¡ã€‚



## ä»£ç†æ¨¡å¼

æŒ‰ç…§ä»£ç†çš„åˆ›å»ºæ—¶æœŸï¼Œä»£ç†å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š

+ é™æ€ä»£ç†ï¼šç¨‹åºå‘˜åˆ›å»ºæˆ–è€…ç‰¹å®šå·¥å…·è‡ªåŠ¨ç”Ÿæˆçš„æºä»£ç ï¼Œå†å¯¹å…¶ç¼–è¯‘ã€‚åœ¨ç¨‹åºè¿è¡Œå‰ï¼Œä»£ç†ç±»çš„ `.class` æ–‡ä»¶å°±å·²ç»å­˜åœ¨äº†ã€‚ã€ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‘
+ åŠ¨æ€ä»£ç†ï¼šåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿ç”¨ [åå°„æœºåˆ¶](/pages/e56959/#åå°„çš„ä¸‰ç§æ–¹å¼) åˆ›å»ºè€Œæˆã€‚



> + å…¶ä»–å¯¹è±¡ï¼šç›®æ ‡å¯¹è±¡ï¼Œæƒ³è¦è®¿é—®çš„å¯¹è±¡ï¼Œå¸¸è¢«ç§°ä¸ºè¢«å§”æ‰˜å¯¹è±¡æˆ–è¢«ä»£ç†å¯¹è±¡ã€‚
> + æä¾›ä¸€ç§ä»£ç†ï¼šã€Œ**ä¸€ç§**ã€ä»£è¡¨äº†æŸä¸€ç±»ï¼Œå³ä»£ç†ç±»å’Œè¢«ä»£ç†ç±»å¿…é¡»å®ç°åŒä¸€æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸‹çš„æ‰€æœ‰å®ç°ç±»éƒ½èƒ½è¢«ä»£ç†è®¿é—®åˆ°ï¼Œå…¶å®åªæ˜¯å•çº¯çš„ä¸ºäº†å®ç°ä»£ç†è®¿é—®åŠŸèƒ½ï¼Œä»£ç†ç±»ä¸å®ç°ä»»ä½•æ¥å£ä¹Ÿèƒ½å®Œæˆï¼Œä¸è¿‡é’ˆå¯¹äºé¢å‘æ¥å£çš„ç¼–ç¨‹ï¼Œ**è¿™ç§æ–¹å¼æ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•**ï¼Œä»£ç†ç±»å®ç°æ¥å£ï¼Œä¸ç®¡ç›®æ ‡å¯¹è±¡æ€ä¹ˆæ”¹æˆ–æ”¹æˆè°ï¼Œä»£ç†ç±»ä¸éœ€è¦ä»»ä½•ä¿®æ”¹ï¼Œè€Œä¸”ä»»ä½•ç›®æ ‡å¯¹è±¡èƒ½ä½¿ç”¨çš„åœ°æ–¹éƒ½èƒ½ç”¨ä»£ç†å»æ›¿æ¢ã€‚
> + é€šè¿‡ä»£ç†è®¿é—®ç›®æ ‡å¯¹è±¡ï¼šä»£ç†ç±»éœ€è¦æŒæœ‰ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥é€šè¿‡ä»£ç†ç±»è®¿é—®ç›®æ ‡å¯¹è±¡ï¼Œå®ç°äº†ç”¨æˆ·ä¸ç›®æ ‡å¯¹è±¡çš„è§£è€¦ã€‚
> + è®¿é—®ï¼šè¯´æ˜ä»£ç†å¯¹è±¡çš„ç›®çš„æ˜¯**è®¿é—®è¢«ä»£ç†ç±»**ï¼Œä¸šåŠ¡é€»è¾‘çš„å…·ä½“æ‰§è¡Œä¸å…¶æ— å…³ï¼Œç”±è¢«ä»£ç†å¯¹è±¡å®Œæˆã€‚
> + ä¸ºä»€ä¹ˆè¦é€šè¿‡ä»£ç†æ¥è®¿é—®ï¼š
>   + **è®¾è®¡æ£‹å¼éƒ½æ˜¯ä¸ºäº†è§£å†³æŸä¸€ç±»çš„é—®é¢˜ï¼Œå¯èƒ½ç›®æ ‡å¯¹è±¡ä¸æƒ³è®©è¯¥ç”¨æˆ·è®¿é—®æˆ–è€…æ˜¯è¯¥ç”¨æˆ·æ— æ³•è®¿é—®åˆ°ç›®æ ‡å¯¹è±¡ï¼Œè¿™æ ·å°±éœ€è¦ä¸€ä¸ªç¬¬ä¸‰è€…æ¥å»ºç«‹ä»–ä»¬çš„è”ç³»ã€‚**
>   + ä¾‹å¦‚å¦‚ä»£ç†æœåŠ¡å™¨æƒ…æ™¯ï¼Œè¢«è®¿é—®çš„æœåŠ¡å™¨è®¾ç½®é˜²ç«å¢™è¿‡æ»¤æ‰æŸäº›åœ°å€çš„è®¿é—®ï¼Œè¿™æ—¶ç”¨æˆ·å°±å¯ä»¥é€šè¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æ¥è®¿é—®ç›®æ ‡ï¼Œä½¿å¾—ç›®æ ‡æœåŠ¡å™¨ä¸ç”¨å¯¹å¤–æš´éœ²ç»†èŠ‚ï¼Œç”¨æˆ·ä¹Ÿèƒ½è®¿é—®åˆ°æƒ³è®¿é—®çš„æ•°æ®ã€‚
> + ä»£ç†ç±»åŠŸèƒ½å¢å¼ºï¼šä»£ç†å¯¹è±¡èƒ½ç›´æ¥è®¿é—®åˆ°ç›®æ ‡å¯¹è±¡ï¼Œè¿™æ ·å®ƒå°±èƒ½åœ¨è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æŸä¸ªæ–¹æ³•ä¹‹å‰åšä¸€ä¸ªé¢„å¤„ç†ï¼Œ**åœ¨è°ƒç”¨æ–¹æ³•ä¹‹åè¿›è¡Œä¸€äº›ç»“å°¾å·¥ä½œ**ï¼Œ**è¿™æ ·å°±å¯¹ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œäº†å¢å¼º**ã€‚ä½†æ˜¯ï¼Œä¸èƒ½è¯´ä»£ç†æ¨¡å¼æä¾›å¯¹è±¡åŠŸèƒ½çš„å¢å¼ºï¼Œå®ƒçš„è®¾è®¡åˆè¡·æ˜¯å¯¹ä»£ç†å¯¹è±¡æ–½åŠ æ§åˆ¶ï¼Œåªæ˜¯è¿™ç§è®¾è®¡æ€è·¯èƒ½è¾¾åˆ°åŠŸèƒ½å¢å¼ºçš„ç›®çš„ã€‚



### é™æ€ä»£ç†

ğŸŒ° ä¾‹å­ï¼š

+ ç¼–å†™æ¥å£ `Developer`ï¼š

```java
interface Developer {
    public void writeCode();
}
```

+ æ¥å£çš„å®ç°ç±» `DeveloperImpl` ï¼š

```java
class DeveloperImpl implements Developer {
    private String name;

    public DeveloperImpl(String name) {
        this.name = name;
    }

    @Override
    public void writeCode() {
        System.out.println("Developer " + name + " writes code");
    }
}
```

+ æµ‹è¯•ï¼šåˆ›å»ºä¸€ä¸ª `Developer` çš„å®ä¾‹ï¼š

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }"
::: tab java 

```java
public static void main(String[] args) {
  DeveloperImpl developer = new DeveloperImpl("Simon");
  developer.writeCode();
}
```

:::
::: tab result 

```
Developer Simon writes code
```

:::
::::

+ :star: ç°åœ¨æƒ³è®©ç¨‹åºå‘˜å†™ä»£ç å‰æ‰“å¡ä¸Šç­ï¼Œå†™ä»£ç åæ‰“å¡ä¸‹ç­ï¼Œåˆä¸æƒ³ä¿®æ”¹ç¨‹åºå‘˜ `Developer` ç±»ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª**é™æ€ä»£ç†** `DeveloperProxy` ï¼š

```java
class DeveloperProxy implements Developer{
    private Developer developer;

    public DeveloperProxy(Developer developer) {
        this.developer = developer;
    }

    @Override
    public void writeCode() {
        System.out.println("begin");
        this.developer.writeCode();
        System.out.println("end");
    }
}
```

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }"
::: tab java 

```java
public static void main(String[] args) {
  Developer developer = new DeveloperImpl("Simon");
  // developer.writeCode();
  
  DeveloperProxy developerProxy = new DeveloperProxy(developer);
  developerProxy.writeCode();
}
```

:::
::: tab result 

```
begin
Developer Simon writes code
end
```

:::
::::



**é™æ€ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹ï¼š**

+ æ˜“äºç†è§£å’Œå®ç°ã€‚
+ ä»£ç†ç¾å’ŒçœŸå®ç±»çš„å…³ç³»æ˜¯ç¼–è¯‘æœŸé™æ€å†³å®šçš„ï¼Œå’ŒåŠ¨æ€ä»£ç†æ¯”è¾ƒèµ·æ¥ï¼Œæ‰§è¡Œæ—¶æ²¡æœ‰ä»»ä½•é¢å¤–å¼€é”€ã€‚

**é™æ€ä»£ç†æ¨¡å¼çš„ç¼ºç‚¹ï¼š**

+ **æ¯ä¸€ä¸ªçœŸå®ç±»éƒ½éœ€è¦ä¸€ä¸ªåˆ›å»ºæ–°çš„ä»£ç†ç±»ã€‚**
  + æ¯”å¦‚ä¸Šé¢ä¾‹å­ ğŸŒ°ï¼Œå¯¹æµ‹è¯•å·¥ç¨‹å¸ˆ `Tester` ä¹Ÿæå‡ºäº†æ–°çš„è¦æ±‚ï¼Œè®©æµ‹è¯•å·¥ç¨‹å¸ˆæ¯æ¬¡æµ‹å‡º bug æ—¶ï¼Œä¹Ÿè¦åŠæ—¶è®¡ç®—æµ‹è¯•çš„è€—æ—¶ã€‚é‚£ä¹ˆ é‡‡ç”¨é™æ€ä»£ç†çš„æ–¹å¼ï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆçš„å®ç°ç±» `Tester` ä¹Ÿå¾—åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ `TesterProxy` ç±»ã€‚

+ **é™æ€ä»£ç†çš„æ¯ä¸€ä¸ªä»£ç†ç±»åªèƒ½ä¸ºä¸€ä¸ªæ¥å£æœåŠ¡**ã€‚æ‰€ä»¥ç¨‹åºå¼€å‘ä¸­å¿…ç„¶ä¼šäº§ç”Ÿè¿‡å¤šçš„ä»£ç†ï¼Œè€Œä¸”æ‰€æœ‰çš„ä»£ç†æ“ä½œé™¤äº†è°ƒç”¨çš„æ–¹æ³•ä¸ä¸€æ ·ä»¥å¤–ï¼Œå…¶ä»–æ“ä½œä¸€æ ·ï¼Œæ­¤æ—¶ä»£ç æœ‰é‡å¤ã€‚

  ğŸŒ°ä¾‹å­ï¼šåŠ ä¸Šæµ‹è¯•å·¥ç¨‹å¸ˆçš„éƒ¨åˆ†ï¼š

  ```java
  interface Tester {
      public void doTesting();
  }
  
  class TesterImpl implements Tester {
      private String name;
  
      public TesterImpl(String name) {
          this.name = name;
      }
  
      @Override
      public void doTesting() {
          System.out.println("Tester " + name + "is testing code");
      }
  }
  
  class TesterProxy implements Tester{
      private Tester tester;
  
      public TesterProxy(Tester tester) {
          this.tester = tester;
      }
  
      @Override
      public void doTesting() {
          System.out.println("begin");
          this.tester.doTesting();
          System.out.println("end");
      }
  }
  
  ```

  :::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }" 

  ::: tab java 

  ```java
  public static void main(String[] args) {
    Tester tester = new TesterImpl("tester");
    TesterProxy testerProxy = new TesterProxy(tester);
    testerProxy.doTesting();
  }
  ```

  ::: 

  ::: tab result 

  ```
  begin
  Tester testeris testing code
  end
  ```

  ::: 

  ::::

è§£å†³é™æ€ä»£ç†çš„é‡å¤é—®é¢˜ï¼Œæœ€å¥½çš„åšæ³•æ˜¯é€šè¿‡ä¸€ä¸ªä»£ç†ç±»å®Œæˆå…¨éƒ¨çš„ä»£ç†åŠŸèƒ½ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨**åŠ¨æ€ä»£ç†**å®Œæˆï¼š

### åŠ¨æ€ä»£ç†

`InvocationHandler` æ¥å£ï¼š

```java
public interface InvocationHandler{
  public Object invoke(Object proxy, Methodmethod, Object[] args) throws Throwable;
}
// proxy è¢«ä»£ç†çš„å¯¹è±¡
// Method è¦è°ƒç”¨çš„æ–¹æ³•
// args æ–¹æ³•è°ƒç”¨æ‰€éœ€è¦çš„å‚æ•°
```



+ åŠ¨æ€ä»£ç† `EngineerProxy`:

```java
class EngineerProxy implements InvocationHandler {
    private Object object;

    public Object bind(Object object) {
        this.object = object;
        return Proxy.newProxyInstance(object.getClass().getClassLoader(), object.getClass().getInterfaces(), this);
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("begin");
        Object res = method.invoke(object, args);
        System.out.println("end");
        return null;
    }
}
```

+ æµ‹è¯•ç”¨ä¸€ä¸ªåŠ¨æ€ä»£ç†å®Œæˆï¼š

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }" 

::: tab java 

```java
public static void main(String[] args) {
  Developer zhangsan = new DeveloperImpl("zhangsan");
  Developer zhangsanProxy = (Developer) new EngineerProxy().bind(zhangsan);
  zhangsanProxy.writeCode();
  
  Tester lisi = new TesterImpl("lisi");
  Tester lisiProxy = (Tester) new EngineerProxy().bind(lisi);
  lisiProxy.doTesting();
}
```

::: 

::: tab result 

```
begin
Developer zhangsan writes code
end
begin
Tester lisiis testing code
end
```

::: 

::::

