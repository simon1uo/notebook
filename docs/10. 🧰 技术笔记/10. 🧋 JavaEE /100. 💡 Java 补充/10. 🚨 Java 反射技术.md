---
title: ğŸš¨ Java åå°„æŠ€æœ¯
date: 2022-03-02 11:11:51
permalink: /pages/e56959/
categories: 
  - JavaEE
  - MyBatis
tags: 
  - Java
author: 
  name: Simon
  link: https://github.com/simon1uo
---
Java åå°„ï¼šåœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªç±»ï¼Œå¯ä»¥çŸ¥é“è¿™ä¸ªç±»çš„æ–¹æ³•å’Œå±æ€§ï¼›å¯¹äºä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨å®ƒçš„æ–¹æ³•å’Œå±æ€§ã€‚è¿™ç§åŠ¨æ€è·å–å¯¹è±¡ä¿¡æ¯å’Œè°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½æˆä¸ºã€Œåå°„æœºåˆ¶ã€ã€‚

+ åå°„å…¶å®æ˜¯è·å–ç±»çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ `.class` æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ `Class` ç±»çš„å¯¹è±¡è·å–ã€‚

+ æ­¤å‰åœ¨ JDBC ä¸­ï¼ŒåŠ è½½æ•°æ®åº“ JDBC é©±åŠ¨

  ```java
  Class.forName(â€œcom.mysql.jdbc.Driverâ€)
  ```

   ä¸­å°±æ˜¯ä½¿ç”¨äº† Java åå°„çš„æœºåˆ¶ã€‚



`Class` ç±»ï¼š

+ `Class` ç±»çš„å®ä¾‹è¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ Java åº”ç”¨ç¨‹åºä¸­çš„**ç±»æ¥å£**ã€‚å³ JVM ä¸­çš„å®ä¾‹æ¯ä¸ªç±»éƒ½æœ‰è¯¥ Class å¯¹è±¡ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼‰ã€‚
+ `Class` ç±»æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚`Class` å¯¹è±¡æ˜¯åœ¨åŠ è½½ç±»æ—¶ç”± Java è™šæ‹Ÿæœºä»¥åŠé€šè¿‡è°ƒç”¨ç±»åŠ è½½å™¨ä¸­çš„ `defineClass` æ–¹æ³•è‡ªåŠ¨æ„é€ çš„ã€‚å³ä¸éœ€è¦å»å¤„ç†åˆ›å»ºï¼ŒJVM ä¼šåˆ›å»ºã€‚
+ **æ³¨æ„åœ¨è¿è¡ŒæœŸé—´ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ª `Class` å¯¹è±¡äº§ç”Ÿã€‚**

![image-20220302143034619](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/4xn0bp.png)

**åå°„çš„æœ¬è´¨ç†è§£ï¼šå¾—åˆ° `Class` å¯¹è±¡åï¼Œåå‘è·å–è¯¥å¯¹è±¡çš„å„ç§ä¿¡æ¯ã€‚**



## åå°„çš„ä¸‰ç§æ–¹å¼

1. `Object` -> `getClass()`ï¼šä½¿ç”¨`Object` ç±»ä¸­çš„ `getClass()` æ–¹æ³•ï¼Œ è€Œæ‰€æœ‰ç±»éƒ½ç»§æ‰¿äº† `Object` ç±»ã€‚ä½†å·²ç»æœ‰äº†å®ä¾‹å¯¹è±¡ï¼Œæ²¡æœ‰åå°„çš„å¿…è¦ï¼Œæ‰€ä»¥å‡ ä¹ä¸ç”¨è¯¥æ–¹æ³•ã€‚

   ğŸŒ° ä¾‹å­ï¼š

   ```java
   Student stu = new Student();
   Class stuClass1 = stu.getClass();
   ```

2. ä»»ä½•çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼‰éƒ½æœ‰ä¸€ä¸ªã€Œé™æ€ã€çš„ `class` å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥æ®æ­¤è·å¾—ã€‚ä½†æ˜¯**éœ€è¦å¯¼å…¥ç±»çš„åŒ…**ï¼Œä¾èµ–å¤ªå¼ºï¼Œæ‰€ä»¥è¾ƒå°‘ç”¨ã€‚

   ğŸŒ° ä¾‹å­ï¼š

   ```java
   Class stuClass2 = Student.class;
   System.out.println(stuClass2);
   ```

3. :star: é€šè¿‡ `Class` ç±»çš„é™æ€æ–¹æ³• `forName(String)`ï¼Œä¸€èˆ¬å¸¸ç”¨è¿™ç§æ–¹æ³•ï¼Œå‚æ•°å¯ä»¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…é…ç½®æ–‡ä»¶ã€‚

   ğŸŒ° ä¾‹å­ï¼š

   ```java
   Class stuClass3 = Class.forName("Student");
   System.out.println(stuClass3);
   ```



### è·å–æ„é€ æ–¹æ³•

é€šè¿‡ åå°„è·å–æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨ï¼š

+ æ‰¹é‡è·å–æ„é€ æ–¹æ³•ï¼š

  + `public Constructor[] getConstructors()` ï¼šè·å–æ‰€æœ‰ã€Œ**å…¬æœ‰**ã€æ„é€ æ–¹æ³•ï¼›

  + `public Constructor[] getDeclaredConstructors()` ï¼šè·å–æ‰€æœ‰çš„æ„é€ æ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰ç±»å‹ï¼‰ã€‚

ğŸŒ° ä¾‹å­ï¼š

```java
Constructor[] constructors = stuClass1.getConstructors();
for(Constructor c : constructors){
  System.out.println(c);
}
```

+ è·å¾—å•ä¸ªåˆ¶å®šçš„æ„é€ æ–¹æ³•ï¼š
  + `public Constructor getConstructor(parameter Types)`ï¼šè·å–å–å•ä¸ªçš„ã€Œå…¬æœ‰ã€æ„é€ æ–¹æ³•ã€‚
  + `public Constructor getDeclaredConstructor(parameterTypes)`ï¼šè·å–æŸä¸ªåˆ¶å®šçš„ç±»å‹çš„æ„é€ æ–¹æ³•ã€‚

ğŸŒ° ä¾‹å­ï¼š

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }"
::: tab java 
```java
Constructor con1 = stuClass1.getConstructor();
Object obj1 = con1.newInstance();
System.out.println(obj1.toString());

Constructor con2 = stuClass1.getConstructor(String.class, int.class);
Object obj2 = con2.newInstance("Simon", 22);
System.out.println(obj2.toString());
```
:::
::: tab result
```
Student{name='null', age=0}
Student{name='Simon', age=22}
```
:::
::::

> `newInstance` æ˜¯ `Constructor` ç±»çš„æ–¹æ³•ï¼ˆç®¡ç†æ„é€ å‡½æ•°çš„ç±»ï¼‰ï¼Œä½¿ç”¨æ­¤æ–¹æ³•æ¥åˆ›å»ºè¯¥æ„é€ æ–¹æ³•çš„å£°æ˜ç±»çš„æ–°å®ä¾‹ï¼Œå¹¶ç”¨åˆ¶å®šçš„åˆå§‹åŒ–å‚æ•°åˆå§‹åŒ–è¯¥å®ä¾‹ã€‚



### è·å–ä½¿ç”¨æˆå‘˜å˜é‡

+ è·å–æ‰¹é‡/å•ç‹¬çš„æˆå‘˜å˜é‡ï¼š
  + `public Field[] getFields()`ï¼šè·å–æ‰€æœ‰**å…¬æœ‰çš„**æˆå‘˜å˜é‡ã€‚
  + `public Field[] getDeclaredFields()`ï¼šè·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ã€‚
  + `public Field[] getField()`ï¼šè·å–æˆå‘˜å˜é‡ã€‚
  + `public Field[] getDeclaredField()`ï¼šè·å–ç‰¹å®šæˆå‘˜å˜é‡ã€‚

ğŸŒ° ä¾‹å­ï¼š

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }"
::: tab java 
```java
Field[] declaredFields = stuClass1.getDeclaredFields();
for (Field declaredField : declaredFields) {
  System.out.println(declaredField);
}
```
```java
Field name = stuClass1.getDeclaredField("name");
System.out.println(name);
Object obj = stuClass1.getConstructor().newInstance();
name.setAccessible(true); // æš´åŠ›åå°„ï¼Œæ¥è§¦ç§æœ‰é™å®š
name.set(obj, "Simon");
System.out.println(((Student) obj).getName());
```
:::
::: tab result
```
private java.lang.String Student.name
Simon
```
:::
::::




### è·å¾—ä½¿ç”¨æˆå‘˜æ–¹æ³•

+ è·å–æ‰¹é‡/å•ç‹¬çš„æˆå‘˜æ–¹æ³•ï¼š
  + `public Method[] getMethods()` ï¼šè·å–æ‰€æœ‰å…¬æœ‰æ–¹æ³•ï¼ˆåŒ…å«äº†çˆ¶ç±»çš„æ–¹æ³•ä¹ŸåŒ…å« Object ç±»)
  + `public Method[] getDeclaredMethods()`ï¼šè·å–æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ï¼ˆä¸åŒ…æ‹¬ç»§æ‰¿çš„ï¼‰
  + `public Method[] getMethods(String name, Class<?> --- parameterTypes)`ï¼šè·å–å•ä¸ªæˆå‘˜æ–¹æ³•ã€‚
  + `public Method[] getDeclaredMethods(String fieldName)`ï¼šè·å–ç‰¹å®šæˆå‘˜æ–¹æ³•ã€‚

ğŸŒ° ä¾‹å­ï¼š

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }"
::: tab java 

```java
Method[] methods = stuClass1.getMethods();
for (Method method : methods) {
  System.out.println(method);
}
```
:::
::: tab result 
```
public java.lang.String Student.getName()
public java.lang.String Student.toString()
public void Student.setName(java.lang.String)
public int Student.getAge()
public void Student.setAge(int)
public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException
public final void java.lang.Object.wait() throws java.lang.InterruptedException
public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException
public boolean java.lang.Object.equals(java.lang.Object)
public native int java.lang.Object.hashCode()
public final native java.lang.Class java.lang.Object.getClass()
public final native void java.lang.Object.notify()
public final native void java.lang.Object.notifyAll()
```
:::
::::

ğŸŒ° ä¾‹å­ï¼š

:::: tabs cache-lifetime="5" :options="{ useUrlFragment: false }"

::: tab java

```java
Method setAge = stuClass1.getMethod("setAge", int.class);
System.out.println(setAge);
Object obj = stuClass1.getConstructor().newInstance();
setAge.invoke(obj, 18); // è°ƒç”¨æ–¹æ³•
System.out.println(((Student) obj).toString());
```

:::

::: tab result

```
public void Student.setAge(int)
Student{name='null', age=18}
```

:::

::::

> `Object invoke(Object obj, Object .args)`ï¼šæ˜¯ `Method` ç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ï¼Œåé¢å‚æ•°æ˜¯è°ƒç”¨æ–¹å¼æ‰€ä¼ é€’çš„å®å‚ã€‚
