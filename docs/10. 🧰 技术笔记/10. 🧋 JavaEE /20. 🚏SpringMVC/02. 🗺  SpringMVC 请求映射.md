---
title: ğŸ—º  SpringMVC è¯·æ±‚æ˜ å°„
date: 2022-03-17 19:49:58
permalink: /pages/4cd331/
categories: 
  - _pages
  - ğŸ§‹ JavaEE
  - ğŸšSpringMVC
tags: 
  - SpringMVC
author: 
  name: Simon
  link: https://github.com/simon1uo
---


ï¼ˆ **`@RequestingMapping` æ³¨è§£**ï¼‰

### åŠŸèƒ½å’Œä½¿ç”¨

+ åŠŸèƒ½ï¼š`@RequestingMapping` ä½œç”¨ï¼šä»åç§°ä¸Šå¯ä»¥çœ‹å‡ºï¼Œå°†è¯·æ±‚å’Œå¤„ç†çš„**æ§åˆ¶å™¨** Controller æ–¹æ³•å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚

+ `@RequestingMapping` ä½¿ç”¨ä½ç½®ï¼š
  + æ ‡è¯†ä¸€ä¸ªç±»ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯
  + æ ‡è¯†ä¸€ä¸ªæ–¹æ³•ï¼šè®¾ç½®æ˜ å°„è¦æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯

ğŸŒ° ä¾‹å­ï¼š

```java
@Controller
@RequestMapping("/test")
public class RequestMappingController {
    @RequestMapping("/testRequestMapping")
    public String success(){
        return "success";
    }
}
```

::: warning 

å¦‚ä¸Šä¾‹å­ï¼Œè¯·æ±‚æ˜ å°„æ‰€æ˜ å°„çš„è¯·æ±‚è·¯å¾„ä¸º `/test/testRequestMapping` ã€‚

:::

æ³¨è§£ç±»ä¸ºè¯·æ±‚è·¯å¾„åŠ äº†ä¸€å±‚ï¼Œé¿å…å‡ºç°ç›¸åŒçš„è¯·æ±‚è·¯å¾„çš„æƒ…å†µã€‚



> å½“æ§åˆ¶å™¨ä¸­æœ‰**å¤šä¸ªæ–¹æ³•å¯¹åº”åŒä¸€ä¸ªè¯·æ±‚**ï¼šè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œè¦è‡³å°‘å®šä¹‰ä¸¤ä¸ªæ§åˆ¶ç±»ï¼Œå…¶ä¸­å®šä¹‰çš„æ§åˆ¶å™¨æ–¹æ³•ä¸Š`@ReqeustMapping`æŒ‡å®šåŒä¸€è¯·æ±‚è·¯å¾„ï¼š
>
> ğŸŒ° ä¾‹å­ï¼š
> ```java
> @Controller
> public class HelloController {
>     @RequestMapping("/")
>     public String index() {
>         return "index";
>     }
> }
> @Controller
> public class RequestMappingController {
>     @RequestMapping("/")
>     public String index() {
>         return "target";
>     }
> }
> ```
>
> å¦‚æœå­˜åœ¨ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæ§åˆ¶å™¨ï¼Œå…¶ä¸­æ§åˆ¶å™¨çš„æ–¹æ³•æ³¨è§£çš„ `@RequestMapping `ä¸€è‡´ï¼Œå³å¤šä¸ªæ§åˆ¶å™¨æ–¹æ³•è§†å›¾éƒ½æƒ³è¦å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œæ­¤æ—¶ Tomcat ä¼šæŠ›å‡º `BeanCreationException` è¡¨æ˜å·²æœ‰é‡å¤çš„æ§åˆ¶å™¨æ–¹æ³•å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ã€‚æ‰€ä»¥è¦é€šè¿‡åœ¨æ§åˆ¶ç±»ä¸­æ·»åŠ  `@RequestMapping` æ³¨è§£ã€‚

### åˆ†æè¯·æ±‚æ˜ å°„ä¸­çš„å±æ€§

#### :star: `value` å±æ€§

+ é€šè¿‡è¯·æ±‚çš„è¯·æ±‚åœ°å€åŒ¹é…æ˜ å°„ã€‚
+ å½“`value` å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½åŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è¯·æ±‚ã€‚
+ :warning: **`value` å±æ€§å€¼å¿…é¡»è®¾ç½®ï¼Œè‡³å°‘é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚**ã€‚



ğŸŒ° ä¾‹å­ï¼šåŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€çš„ `value` å±æ€§ï¼š

```java
@Controller
public class RequestMappingController {
    @RequestMapping(value = {"/testRequestMapping", "/test"})
    public String success() {
        return "success";
    }
}
```



#### `method` å±æ€§

+ è¡¨ç¤ºé€šè¿‡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼ˆä¾‹å¦‚ï¼Œ`GET` ã€`POST` ï¼‰åŒ¹é…è¯·æ±‚æ˜ å°„ã€‚
+ `method` å±æ€§å€¼ç±»å‹æ—¶æ˜¯ä¸€ä¸ª `RequestMethod` ç±»å‹å€¼çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…**å¤šç§è¯·æ±‚æ–¹å¼**çš„è¯·æ±‚ã€‚
+ è‹¥å½“å‰è¯·æ±‚çš„è¯·æ±‚åœ°å€æ»¡è¶³è¯·æ±‚æ˜ å°„çš„ `value` å±æ€§ï¼Œä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸æ»¡è¶³ `method ` å±æ€§ï¼Œåˆ™æµè§ˆå™¨æŠ¥é”™ä»£ç  `405`ï¼ˆRequest method 'â€¦' not supportedï¼‰ã€‚ 

ï¼ˆä¸è®¾ç½® `method`  å±æ€§é»˜è®¤è¯·æ±‚æ–¹å¼ä¸º `GET`ï¼‰

ğŸŒ° ä¾‹å­ï¼š 

```java
@RequestMapping(
        value = {"/testRequestMapping", "/test"},
        method = {RequestMethod.GET, RequestMethod.POST}
)
public String success() {
    return "success";
}
```



::: tip

1. å¯¹äº**æŒ‡å®šè¯·æ±‚æ–¹å¼**çš„æ§åˆ¶å™¨æ–¹å¼ï¼ŒSpringMVC æä¾›äº† `@RequestMapping` æ´¾ç”Ÿæ³¨è§£ï¼š
   + `@GetMapping`ï¼šå¤„ç† `GET` è¯·æ±‚çš„æ˜ å°„ï¼› 
   + `@PostMapping`ï¼šå¤„ç† `POST` è¯·æ±‚çš„æ˜ å°„ï¼› 
   + `@PutMapping`ï¼šå¤„ç† `PUT` è¯·æ±‚çš„æ˜ å°„ï¼› 
   + `@DeleteMapping`ï¼šå¤„ç† `DELETE` è¯·æ±‚çš„æ˜ å°„ï¼› 
2. å¸¸è§çš„è¯·æ±‚æ–¹å¼æœ‰ä¸Šè¿°ï¼Œ:warning: ä½†æ˜¯**ç›®å‰æµè§ˆå™¨åªæ”¯æŒ `GET` å’Œ `POST` ä¸¤ç§è¯·æ±‚æ–¹å¼**ï¼Œè‹¥ä½¿ç”¨å…¶ä»–çš„è¯·æ±‚æ–¹å¼ï¼Œ**åˆ™æŒ‰ç…§é»˜è®¤çš„è¯·æ±‚æ–¹å¼ `GET` å¤„ç†**ã€‚ï¼ˆè‹¥è¦å‘é€ `PUT` æˆ–è€… `DELETE` è¯·æ±‚ï¼Œåˆ™éœ€è¦é€šè¿‡ Spring æä¾›çš„**è¿‡æ»¤å™¨** `HiddenHttpMethodFilter`ï¼ŒæŒ‡è·¯ç›¸å…³é˜…è¯» /Restfulï¼‰ 

:::

ğŸŒ° ä¾‹å­ï¼šä½¿ç”¨ `@GetMapping` æ³¨è§£ï¼š

```java a
@GetMapping("/testGetMapping")
public String testGetMapping(){
    return "success";
}
```



#### `params` å±æ€§ï¼ˆ*äº†è§£ï¼‰

+ é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å‚æ•°åŒ¹é…è¯·æ±‚æ˜ å°„ã€‚

+ å±æ€§å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ˜ å°„åŒ¹é…å…³ç³»ï¼š
  + `param` ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦  `param` è¯·æ±‚å‚æ•°ï¼›
  + `!param` ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦  `param` è¯·æ±‚å‚æ•°ï¼›
  + `param=value` ï¼šè¦æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦  `param` è¯·æ±‚å‚æ•°ä¸” `param=value` ï¼›
  + `param!=value` ï¼šè¦æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦  `param` è¯·æ±‚å‚æ•°ä½†æ˜¯  `param!=value` ã€‚

+ è‹¥å½“å‰è¯·æ±‚æ»¡è¶³ `@RequestingMapping` æ³¨è§£çš„ `value` å’Œ `method` å±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³ `params` å±æ€§ï¼Œæ­¤æ—¶é¡µé¢æŠ¥é”™ä»£ç ä¸º `400` ï¼š

ğŸŒ° ä¾‹å­ï¼š `params` å±æ€§çš„ä½¿ç”¨ï¼š

```java
@RequestMapping(
        value = "/testParamsAndHeaders",
        params = {"username=admin"}
)
public String testParamsAndHeaders(){
    return "success";
}
```

```html
<a th:href="@{/testParamsAndHeaders(username='admin', password='123456')}">
    æµ‹è¯•RequestMappingæ³¨è§£çš„paramså±æ€§
</a>
```

::: tip

thymeleaf åœ¨è¯·æ±‚è·¯å¾„ä¸­æ·»åŠ å‚æ•°å¯ä»¥ä½¿ç”¨ `()` åŒ…å«ã€‚

:::



### `headers` å±æ€§ï¼ˆ*äº†è§£ï¼‰

+ é€šè¿‡è¯·æ±‚çš„**è¯·æ±‚å¤´ä¿¡æ¯**åŒ¹é…è¯·æ±‚æ˜ å°„ã€‚
+ å±æ€§å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»ã€‚
  + `header` ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ `header` è¯·æ±‚å¤´ä¿¡æ¯ã€‚
  + `!header` ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦ `header` è¯·æ±‚å¤´ä¿¡æ¯ã€‚
  + `header=value` ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ `header` è¯·æ±‚å¤´ä¿¡æ¯å¹¶ä¸” `header=value`ã€‚
  + `header!=value` ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ `header` è¯·æ±‚å¤´ä¿¡æ¯ä½†æ˜¯ `headerï¼=value`ã€‚

+ è‹¥å½“å‰è¯·æ±‚æ»¡è¶³ `@RequestingMapping` æ³¨è§£çš„ `value` å’Œ `method` å±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³ `headers` å±æ€§ï¼Œæ­¤æ—¶é¡µé¢æŠ¥é”™ä»£ç ä¸º `404` èµ„æºæœªæ‰¾åˆ° ã€‚

ğŸŒ° ä¾‹å­ï¼š

```java
@RequestMapping(
            value = "/testParamsAndHeaders",
            headers = {"Host=localhost:8081"}
    )
    public String testParamsAndHeaders(){
        return "success";
    }
```



## è·¯å¾„ç›¸å…³

+ SpringMVC æ”¯æŒ ant é£æ ¼çš„è·¯å¾„ï¼ŒåŒ…å«ä»¥ä¸‹è§„åˆ™ï¼š

  + `?`ï¼š è¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦ã€‚
  + `*`ï¼šè¡¨ç¤ºä»»æ„çš„**0ä¸ªæˆ–è€…å¤šä¸ª**å­—ç¬¦ã€‚
  + `**`ï¼šè¡¨ç¤ºä»»æ„çš„ä¸€å±‚æˆ–å¤šå±‚ç›®å½•ã€‚ï¼ˆåªèƒ½ä½¿ç”¨å¦‚ `/**/xxx` çš„æ–¹å¼æ·»åŠ ï¼Œä¸èƒ½åœ¨å­—ç¬¦ä¹‹é—´ï¼Œå¦åˆ™ä¼šè¢«å½“ä½œå•ä¸ª `*` çš„ä½¿ç”¨ï¼‰

  :warning: æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ `?` ä»¥åŠ `/` åˆ°å®é™…è·¯å¾„ã€‚

ğŸŒ° ä¾‹å­ï¼š

```java
//    @RequestMapping("/a?a/testAnt")
//    @RequestMapping("/a?a/testAnt")
@RequestMapping("/**/testAnt")
public String testAnt(){
  return "success";
}
```





+ SpringMVC **æ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦è·å–æ•°æ®**ï¼ˆ:star: é‡ç‚¹ï¼‰ï¼šSpringMVC è·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äº restful çš„é£æ ¼ä¸­ï¼Œå½“è¯·æ±‚è·¯å¾„ä¸­å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„ `@RequestMapping` æ³¨è§£çš„ `value` å±æ€§ä¸­é€šè¿‡å ä½ç¬¦ `(xxx)` è¡¨ç¤ºä¼ è¾“çš„æ•°æ®ï¼Œå†é€šè¿‡ `@PathVariable` æ³¨è§£ï¼Œå°†å ä½ç¬¦è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™**æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚**ã€‚

> + åŸå§‹æ–¹å¼ï¼š`/deleteUser?id=1` 
> + rest æ–¹å¼ï¼š`/deleteUser/1`

ğŸŒ° ä¾‹å­ï¼š

```java
@RequestMapping("/testPath/{id}/{username}")
public String testPath(@PathVariable("id") String id, @PathVariable("username") String username) {
    System.out.println("id: " + id + ", username: " + username);
    return "success";
}
```

```html
<a th:href="@{/testPath/1/admin}">
    æµ‹è¯•RequestMappingè·¯å¾„ä¼ å‚
</a>
```