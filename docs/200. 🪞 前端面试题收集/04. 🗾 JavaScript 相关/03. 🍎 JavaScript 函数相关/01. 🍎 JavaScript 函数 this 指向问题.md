---
title:  ğŸ JavaScript å‡½æ•° this æŒ‡å‘é—®é¢˜
date: 2022-06-26 19:04:23
permalink: /pages/b16ce1/
categories:
  -  ğŸª å‰ç«¯é¢è¯•é¢˜æ”¶é›†
  -  ğŸ—¾ JavaScript ç›¸å…³
  -  ğŸ JavaScript å‡½æ•°ç›¸å…³
tags:
  - 
---
> ç›¸å…³é—®é¢˜ï¼š
>
> + JavaScript ä¸­å¯¹å‡½æ•° `this` çš„ç†è§£ï¼Ÿ



## æ¦‚å¿µ

`this` å…³é”®å­—æ—¶å‡½æ•°è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ª **å†…éƒ¨å¯¹è±¡**ã€‚åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œæ€»æ˜¯æŒ‡å‘ **è°ƒç”¨å®ƒ** çš„å¯¹è±¡ã€‚

ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº† `this` çš„å€¼ï¼ˆè°ƒç”¨æ—¶ç»‘å®šï¼‰ã€‚åŒæ—¶ `this` åœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦è¢«ç¡®å®šäº†å°±ä¸èƒ½å†æ›´æ”¹ã€‚



> `this` æ˜¯ä»€ä¹ˆï¼š
>
> + ä»»ä½•å‡½æ•°æœ¬è´¨ä¸Šéƒ½æ˜¯**é€šè¿‡æŸä¸ªå¯¹è±¡æ¥è°ƒç”¨çš„**ï¼Œ:star: **å¦‚æœæ²¡æœ‰åˆ¶å®šå°±æ˜¯ `window`** ã€‚
>
> + æ‰€æœ‰å‡½æ•°å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªå˜é‡ `this` ï¼›
> + å®ƒçš„å€¼æ˜¯è°ƒç”¨å‡½æ•°çš„å½“å‰å¯¹è±¡ï¼›



## ç»‘å®šè§„åˆ™

æ ¹æ®ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œ`this` ä¼šæœ‰ä¸åŒçš„å€¼ã€‚

### é»˜è®¤ç»‘å®š

å…¨å±€ç¯å¢ƒä¸­å®šä¹‰çš„å˜é‡ï¼Œåœ¨å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ `this` è·å–ã€‚ï¼ˆé’ˆå¯¹ `var` ç”Ÿå‘½çš„å˜é‡ï¼‰

ğŸŒ° ä¾‹å­ï¼š

```js
var name = "Simon"
function person() {
  return this.name
}
console.log(person()) // Simon
```

> è°ƒç”¨ `this` çš„å¯¹è±¡æ˜¯å‡½æ•°ï¼Œè€Œå‡½æ•°æœ¬èº«æ²¡æœ‰ `name` è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥å¾€å¤–æ‰¾ï¼Œæœ€ç»ˆæ‰¾åˆ°æŒ‡å‘ `window`ã€‚
>
> ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸èƒ½è®²å…¨å±€å¯¹è±¡ç”¨äºé»˜è®¤ç»‘å®šï¼Œ `this` ä¼šç»‘å®šåˆ° `undefined`ã€‚

### éšå¼ç»‘å®š

å‡½æ•°è¿˜å¯ä»¥ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œæ­¤æ—¶ `this` æŒ‡å‘çš„å°±æ˜¯è¿™ä¸ªä¸Šçº§å¯¹è±¡ã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
function test() {
  cnsole.log(this.x)
}

var obj = {}
obj.x = 1
obj.m = test
obj.m // 1
```

ç›¸å½“äºï¼š

```js
var obj = {
  x: 1
  m: function() {
    console.log(this.x)
  }
}
obj.m()
```



ğŸŒ° ä¾‹å­ / ç‰¹æ®Šæƒ…å†µï¼š

```js
var o = {
  a: 10,
  b: {
    a: 12,
    fn:function(){
      console.log(this.a); //undefined
      console.log(this); //window
    }
  }
}
var j = o.b.fn;
j();
```

> `this` åœ¨è¿™é‡ŒæŒ‡å‘çš„æ˜¯ `window`ã€‚å› ä¸ºæ— è®ºå¦‚ä½•ï¼Œ`this` æ°¸è¿œæŒ‡å‘æœ€ç»ˆè°ƒç”¨å®ƒçš„å¯¹è±¡ï¼Œå°½ç®¡ `fn` æ˜¯å¯¹è±¡ `b` çš„æ–¹æ³•ï¼Œä½†æ˜¯ `fn` èµ‹å€¼ç»™ `j` çš„æ—¶å€™å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€ä»¥æœ€ç»ˆæŒ‡å‘çš„æ˜¯ `window`ã€‚



### `new` ç»‘å®š

é€šè¿‡æ„é€ å™¨ `new` å…³é”®å­—ç”Ÿæˆä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ­¤æ—¶ `this` æŒ‡å‘è¿™ä¸ªå®ä¾‹å¯¹è±¡ã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
function test() {
  this.x = 1
}

var obj = new test()
obj.x // 1
```

> ä¹‹æ‰€ä»¥ `obj.x` ä¸º `1`ï¼Œæ˜¯å› ä¸º `new` æ”¹å˜äº† `this` çš„æŒ‡å‘ã€‚



ğŸŒ° ä¾‹å­ / ç‰¹æ®Šæƒ…å†µï¼š

```js
function fn() {
  this.user = 'xxx'
  return {}
}
var a = new fn()
console.log(a.user) // undefined
```

> æ­¤æ—¶ `new` çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€ä¸ª `return`ï¼Œæ­¤æ—¶ `this` æŒ‡å‘çš„æ˜¯è¿”å›çš„å¯¹è±¡ã€‚
>
> å½“è¿”å›çš„æ˜¯ä¸€ä¸ªç®€å•ç±»å‹æ—¶ï¼Œ`this` æŒ‡å‘å®ä¾‹å¯¹è±¡ï¼š
>
> ```js
> function fn() {
>   this.user = 'xxx'
>   return 1
> }
> var a = new fn()
> console.log(a.user) // xxx
> ```
>
> å½“è¿”å›çš„æ˜¯ `null` æ—¶ï¼Œè™½ç„¶ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä½†æ˜¯æ­¤æ—¶ `this` æŒ‡å‘å®ä¾‹å¯¹è±¡ã€‚



### æ˜¾å¼ä¿®æ”¹

ä½¿ç”¨ `apply` / `call` / `bind` æ–¹æ³•ã€‚æ”¹å˜å‡½æ•°è°ƒç”¨çš„å¯¹è±¡ï¼Œå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ”¹å˜åè°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ã€‚å› æ­¤ `this` æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚

ğŸŒ° ä¾‹å­ ï¼š

```js
var x = 0
function test() {
  console.log(this.x)
}

var obj = {}
obj.x = 1
obj.m = test
obj.m.apply(obj) // 1
```



### ç»‘å®šçš„ä¼˜å…ˆçº§

+ æ˜¾ç¤ºç»‘å®š  >`new` ç»‘å®š  > éšå¼ç»‘å®š > é»˜è®¤ç»‘å®š



ğŸŒ° ä¾‹å­ / éšå¼ç»‘å®šä¸æ˜¾å¼ç»‘å®šæ¯”è¾ƒï¼š

```js
function foo() {
  console.log(this.a)
}

var obj1 = {
  a: 2,
  foo: foo
}

var obj2 = {
  a: 3,
  foo: foo
}

obj1.foo() // 2
obj2.foo() // 3
obj1.foo.call(obj2) // 3
obj2,foo.call(obj1) // 2
```



ğŸŒ° ä¾‹å­ / `new` ç»‘å®šä¸éšå¼ç»‘å®šæ¯”è¾ƒï¼š

```js
function foo(something) {
  this.a = something
}

var obj1 = {
  foo: foo
}
var obj2 = {}

obj1.foo(2)
console.log(obj1.a) // 2

obj1.foo.call(obj2, 3) // 3
console.log(obj2.a) // 3

var bar = new obj1.foo(4)
console.log(obj1.a) // 2
console.log(bar.a) // 4
```



ğŸŒ° ä¾‹å­ / `new` ç»‘å®šä¸æ˜¾ç¤ºç»‘å®šæ¯”è¾ƒï¼š

```js
function foo(something) {
  this.a = something
}

var obj1 = {}
var bar = foo.bind(obj1)
bar(2)
console.log(obj1.a) // 2

var baz = new bar(3);
console.log(obj1.a) // 2
console.log(baz.a) // 3
```

> `bar`è¢«ç»‘å®šåˆ°obj1ä¸Šï¼Œä½†æ˜¯`new bar(3)` å¹¶æ²¡æœ‰åƒæˆ‘ä»¬é¢„è®¡çš„é‚£æ ·æŠŠ`obj1.a`ä¿®æ”¹ä¸º3ã€‚ä½†æ˜¯ï¼Œ`new`ä¿®æ”¹äº†ç»‘å®šè°ƒç”¨`bar()`ä¸­çš„`this`



## ç®­å¤´å‡½æ•°çš„ `this` æŒ‡å‘

ES6 ä¸­ç®­å¤´å‡½æ•°çš„è¯­æ³•ï¼Œä½¿å¾—å¯ä»¥åœ¨ä»£ç ä¹¦å†™çš„æ—¶å€™å°±å†³å®š `this` çš„æŒ‡å‘ï¼ˆæ„å‘³ç€ç®­å¤´å‡½æ•° `this` æ²¡æœ‰æŒ‡å‘ï¼‰



## å‚è€ƒ

+ [é¢è¯•å®˜ï¼šè°ˆè°ˆthiså¯¹è±¡çš„ç†è§£ | webå‰ç«¯é¢è¯• - é¢è¯•å®˜ç³»åˆ— (vue3js.cn)](https://vue3js.cn/interview/JavaScript/this.html#ä¸€ã€å®šä¹‰)
+ å°šç¡…è°· JavaScript è¿›é˜¶æ•™ç¨‹
+ [this - JavaScript | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this)