> ç›¸å…³é—®é¢˜ï¼š
>
> + å¯¹äº JavaScript ä¸­æ•°ç»„ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ



## æ¦‚å¿µ

ğŸŒ° ä¾‹å­ / å¼•å…¥ï¼š

```js
0.1 + 0.2 === 0.3 // false
```



[ğŸ”¢ JavaScript æ•°å­—ç±»å‹ | notebook (simon1uo.github.io)](https://simon1uo.github.io/notebook/pages/f89962/#javascript-å°æ•°æ•°å­—ç²¾åº¦)



## è§£å†³æ–¹æ¡ˆ

ç†è®ºä¸Šæœ‰é™çš„ç©ºé—´ä¸èƒ½å­˜å‚¨æ— é™çš„å°æ•°ï¼Œå¹¶ä¸”ä¿è¯æ•°å­—çš„ç²¾ç¡®ã€‚ä½†æ˜¯å¯ä»¥å¤„ç†ä¸€ä¸‹å¾—åˆ°æœŸæœ›çš„ç»“æœã€‚

å½“è¦å±•ç¤ºå¦‚ `1.4000000000000001` è¿™æ ·çš„æ•°å­—æ—¶ï¼Œå»ºè®®ä½¿ç”¨ `toPrecision` å‡‘æ•´å¹¶ä¸”ä½¿ç”¨ `parseFloat` è½¬åŒ–æˆæ•°å­—å†æ˜¾ç¤ºã€‚

ğŸŒ° ä¾‹å­ï¼š

```js
parseFloat(1.4000000000000001.toPrecision(12)) === 1.4  // True
```

å°†è¿™ç§æ–¹æ³•å°è£…ä¸ºå‡½æ•°ï¼š

```js
function strip(num, precision = 12) {
  return +parseFloat(num.toPrecision(precision))
}
```



å¯¹äºè¿ç®—ç±»çš„æ“ä½œï¼Œä¾‹å¦‚ åŠ å‡ä¹˜é™¤ï¼Œå°±ä¸èƒ½ä½¿ç”¨ `toPrecision`ã€‚æ­£ç¡®çš„åšæ³•æ˜¯å°†å°æ•°è½¬æ¢æˆæ•´æ•°åå†è¿ç®—ã€‚ä»¥åŠ æ³•ä¸ºä¾‹å­ï¼š
```js
function add(num1, num2) {
  const num1Digits = (num1.toString().split('.')[1] || '').length;
  const num2Digits = (num2.toString().split('.')[1] || '').length;
  const baseNum = Math.pow(10, Math.max(num1Digits, num2Digits))
  return (num1 * baseNum + num2 * baseNum) / baseNum
}
```

æˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œ`Math.js` / `BigDecimal.js`



## å‚è€ƒ

+ [BigInt - JavaScript | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt)