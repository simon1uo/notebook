---
title:  ğŸ JavaScript typeof ä¸ instanceof
date: 2022-06-27 10:51:00
permalink: /pages/d7f372/
categories:
  -  ğŸª å‰ç«¯é¢è¯•é¢˜æ”¶é›†
  -  ğŸ—¾ JavaScript ç›¸å…³
  -  ğŸ JavaScript æ•°æ®ç±»å‹ç›¸å…³
tags:
  - 
---


## æ¦‚å¿µ

### `typeof`

+ è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º**æœªç»è®¡ç®—çš„æ“ä½œæ•°çš„ç±»å‹**ã€‚

+ ä½¿ç”¨è¯­æ³•ï¼š `typeof operand`  / `typeof (operand)`ï¼ˆ`operand` ä¸ºå¯¹è±¡æˆ–è€…åŸå§‹å€¼çš„è¡¨è¾¾å¼ï¼‰



ğŸŒ° ä¾‹å­ï¼š

```js
typeof 1 // 'number'
typeof '1' // 'string'
typeof undefined // 'undefined'
typeof true // 'boolean'
typeof Symbol() // 'symbol'
typeof null // 'object'
typeof [] // 'object'
typeof {} // 'object'
typeof console // 'object'
typeof console.log // 'function'
```

> + `typeof null` æ˜¯ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼Œ`null` æœ¬èº«ä¸æ˜¯å¯¹è±¡ã€‚æ‰€ä»¥ `typeof` ä¸èƒ½åˆ¤æ–­ `null` çš„æƒ…å†µã€‚åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºç©ºï¼Œå¯ä»¥ç›´æ¥åœ¨ `if` è¯­å¥ä¸­åˆ¤æ–­æ˜¯å¦ `===null` å³å¯ã€‚
> + å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ `typeof` åˆ¤æ–­ï¼Œé™¤äº† å‡½æ•° `function`  å¯ä»¥è¢«è¯†åˆ«å‡ºæ¥ç±»å‹ï¼Œå…¶ä»–çš„éƒ½æ˜¯ `object` ç±»å‹ã€‚
>
> + åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ `typeof`ï¼šå¦‚ `typeof a != 'undefined'`ã€‚å¦‚æœç›´æ¥ `if(a)`ï¼Œå½“å˜é‡ä¸ºç©ºæ—¶ä¼šæŠ¥é”™ã€‚



### `instanceof` 

+ `instanceof` è¿ç®—ç¬¦ç”¨äºæ£€æµ‹ æ„é€ å‡½æ•°çš„ `prototype` å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚

  ç†è§£ä¸ºï¼Œå› ä¸ºæ„é€ å‡½æ•°å¯ä»¥é€šè¿‡ `new` ç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œ`instance` åˆ¤æ–­æŸä¸ªå®ä¾‹å¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡ã€‚

+ ä½¿ç”¨è¯­æ³•ï¼š`object instanceof constructor` ï¼ˆ`object` ä¸ºå®ä¾‹å¯¹è±¡ï¼Œ`constructor` ä¸ºæ„é€ å¯¹è±¡ï¼‰ã€‚



ğŸŒ° ä¾‹å­ï¼š

```js
let Car = function() {}
let benz = new Car()
benz instanceof Car // true

let car = new String('xxx')
car instanceof String // true
let str = 'xxx'
str instanceof String // false
```



> `instanceof` çš„å®ç°åŸç†ï¼š
>
> ```js
> fucntion iInstanceof(left, right) {
>   // å¦‚æœå·¦è¾¹ä¸ä¸ºå¯¹è±¡ç±»å‹æˆ–è€…ä¸ºç©ºï¼Œåˆ™è¿”å› false
>   if(typeof left !== 'object' || left === null) return false;
>   
>   let proto = Object.getPrototypeOf(left);
>   while(true) {
>     if(proto === null) return false;
>     if(proto === right.prototype) return true;
>    	proto = Object.getPrototype(proto)
>   }
>   
> }
> ```
>
> é¡ºç€åŸå‹é“¾å»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å› `true` ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å› `false`ã€‚



### ä¸¤è€…çš„åŒºåˆ«

+ ç›¸åŒç‚¹ï¼š`typeof` å’Œ `instanceof` éƒ½ç”¨äºåˆ¤æ–­æ•°æ®çš„ç±»å‹ã€‚
+ ä¸åŒç‚¹ï¼š
  + `typeof` ä¼šè¿”å›ä¸€ä¸ªå˜é‡çš„åŸºæœ¬ç±»å‹çš„å­—ç¬¦ä¸²ï¼›`instanceof` è¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼›
  + `instanceof` å¯ä»¥å‡†ç¡®åˆ¤æ–­ **å¤æ‚å¼•ç”¨æ•°æ®ç±»å‹**ï¼Œä½†æ˜¯ä¸èƒ½å‡†ç¡®åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ï¼›`typeof` è™½ç„¶å¯ä»¥ **å‡†ç¡®åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹**ï¼Œä½†æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ä¸­ï¼Œé™¤äº† `function` ä»¥å¤–ï¼Œå…¶ä»–çš„æ•°æ®ç±»å‹æ— æ³•åˆ¤æ–­ã€‚



å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ç§æ–¹æ³•åˆ¤æ–­æ•°æ®ç±»å‹éƒ½æœ‰å¼Šç«¯ï¼Œå¹¶ä¸èƒ½æ»¡è¶³æ‰€æœ‰çš„åœºæ™¯çš„éœ€æ±‚ã€‚å¦‚æœéœ€è¦é€šç”¨ç›‘æµ‹æ•°æ®ç±»å‹å¯ä»¥é‡‡ç”¨ `Object.prototype.toString` æ–¹æ³•ï¼Œç»Ÿä¸€è¿”å› `[object XXX]` æ ¼å¼ã€‚

ğŸŒ° ä¾‹å­ï¼š
```js
Object.prototype.toString({}) // "[object Object]"
Object.prototype.toString.call({}) // ç»“æœæ¡¶ä¸Šå‡
Object.prototype.toString.call(1)  // "[object Number]"
Object.prototype.toString.call('1')  // "[object String]"
Object.prototype.toString.call(true)  // "[object Boolean]"
Object.prototype.toString.call(function(){})  // "[object Function]"
Object.prototype.toString.call(null)   //"[object Null]"
Object.prototype.toString.call(undefined) //"[object Undefined]"
Object.prototype.toString.call(/123/g)    //"[object RegExp]"
Object.prototype.toString.call(new Date()) //"[object Date]"
Object.prototype.toString.call([])       //"[object Array]"
Object.prototype.toString.call(document)  //"[object HTMLDocument]"
Object.prototype.toString.call(window)   //"[object Window]"

```



å¯ä»¥å°†è¿™ä¸ªæ–¹æ³•å°è£…ä¸ºä¸€ä¸ªå…¨å±€é€šç”¨çš„æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•ï¼š

```js
function getType(obj) {
  let type = typeof obj
  if (type !=== 'ojbect') {
    return type
  }
  return Object.prototype.toString.call(obj).replace(/^\[object (\S+)\]$/, '$1');
}
```

ä½¿ç”¨å¦‚ä¸‹ï¼š
```js
getType([])     // "Array" typeof []æ˜¯objectï¼Œå› æ­¤toStringè¿”å›
getType('123')  // "string" typeof ç›´æ¥è¿”å›
getType(window) // "Window" toStringè¿”å›
getType(null)   // "Null"é¦–å­—æ¯å¤§å†™ï¼Œtypeof nullæ˜¯objectï¼Œéœ€toStringæ¥åˆ¤æ–­
getType(undefined)   // "undefined" typeof ç›´æ¥è¿”å›
getType()            // "undefined" typeof ç›´æ¥è¿”å›
getType(function(){}) // "function" typeofèƒ½åˆ¤æ–­ï¼Œå› æ­¤é¦–å­—æ¯å°å†™
getType(/123/g)      //"RegExp" toStringè¿”å›
```



## å‚è€ƒ

+ [é¢è¯•å®˜ï¼štypeof ä¸ instanceof åŒºåˆ« | webå‰ç«¯é¢è¯• - é¢è¯•å®˜ç³»åˆ— (vue3js.cn)](https://vue3js.cn/interview/JavaScript/typeof_instanceof.html#ä¸‰ã€åŒºåˆ«)
