---
title:  ğŸ JavaScript æ·±æ‹·è´ä¸æµ…æ‹·è´
date: 2022-06-26 18:46:43
permalink: /pages/99b9ce/
categories:
  -  ğŸª å‰ç«¯é¢è¯•é¢˜æ”¶é›†
  -  ğŸ—¾ JavaScript ç›¸å…³
  -  ğŸ JavaScript æ•°æ®ç±»å‹ç›¸å…³
tags:
  - 
---
> å›é¡¾ JavaScript ä¸­ä¸¤å¤§ç±»æ•°æ®ç±»å‹ï¼šåŸºæœ¬æ•°æ®ç±»å‹ä¸å¼•ç”¨æ•°æ®ç±»å‹ã€‚
>
> + åŸºæœ¬ç±»å‹æ•°æ®ä¿å­˜åœ¨ **æ ˆå†…å­˜**ï¼›
> + å¼•ç”¨ç±»å‹æ•°æ®ä¿å­˜åœ¨ **å †å†…å­˜**ã€‚å¼•ç”¨æ•°æ®å˜é‡æ˜¯ä¸€ä¸ªæŒ‡å‘å †å†…å­˜ä¸­ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­å®é™…å¯¹è±¡çš„å¼•ç”¨ã€‚

## æ¦‚å¿µ

+ **æµ…æ‹·è´**ï¼šæŒ‡çš„æ˜¯åˆ›å»ºæ–°çš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æœ‰ç€**åŸå§‹æ•°æ®çš„å±æ€§å€¼**çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚

  å¦‚æœå±æ€§æ˜¯ åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å€¼å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼›

  å¦‚æœå±æ€§æ˜¯ å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å€¼æ˜¯ **å†…å­˜åœ°å€**ï¼›

  ç®€å•åœ°è¯´ï¼Œæµ…æ‹·è´å°±æ˜¯ä¸€å±‚çš„æ‹·è´ï¼Œå¯¹äºæ·±å±‚æ¬¡å¼•ç”¨ç±»å‹ä»…å…±äº«å†…å­˜åœ°å€ã€‚

  + åœ¨`JavaScript`ä¸­ï¼Œå­˜åœ¨æµ…æ‹·è´çš„ç°è±¡æœ‰ï¼š
    - `Object.assign`
    - `Array.prototype.slice()`, `Array.prototype.concat()`
    - ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦å®ç°çš„å¤åˆ¶

ğŸŒ° ä¾‹å­ / `Object.assign` ï¼š

```js
let obj = {
  age: 18,
  name: 'simon'
}

let newObj = Object.assign({}, obj)
console.log(newObj)
```



ğŸŒ° ä¾‹å­ / `Array.prototype.slice()`ï¼š

```js
const arr = ['a', 'b', 'c']
const newArr = arr.slice(0)

newArr[0] = 'd'
console.log(arr) // ["a", "b", "c"]
console.log(newArr) // ["d", "b", "c"]
```

åŒç†ï¼Œæ‹“å±•è¿ç®—ç¬¦ï¼š

```js
const arr = ['a', 'b', 'c']
const newArr = [...arr]

newArr[0] = 'd'
console.log(arr) // ["a", "b", "c"]
console.log(newArr) // ["d", "b", "c"]

```






+ æ·±æ‹·è´ï¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡å±æ€§å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å¯¹åº”ä¸¤ä¸ªä¸åŒçš„å†…å­˜åœ°å€ã€‚æ‰€ä»¥ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚

  å¸¸è§çš„æ·±æ‹·è´æ–¹å¼æœ‰ï¼š

  + `_.cloneDeep()`
  + `jQuery.extend()`
  + `JSON.stringify()`
  + æ‰‹å†™å¾ªç¯é€’å½’



ğŸŒ° ä¾‹å­ / `_.cloneDeep()`ï¼š

```js
const _ = require('lodash');

const obj1 = {
  a: 1,
  b: { f: { g: 1 } },
  c: [1, 2, 3]
};


const obj2 = _.cloneDeep(obj1)
console.log(obj1.b.f === obj2.b.f) // false
```



ğŸŒ° ä¾‹å­ / å¾ªç¯é€’å½’å®ç°æ·±æ‹·è´ï¼š
```js
function deepClone(obj, hash = new WeakMap()) {
  if (obj === null) return obj;
  if (obj instanceof Date) return new Date(obj);
  if (obj instanceof RegExp) return new RegExp(obj);

  // å¦‚æœæ˜¯æ™®é€šçš„å€¼å°±ä¸ç”¨è¿›è¡Œæ·±æ‹·è´
  if (typeof obj !== 'object') return obj;

  // å¦‚æœæ˜¯å¯¹è±¡åˆ™æ·±æ‹·è´
  if (hash.get(obj)) return hash.get(obj);
  let cloneObj = new obj.constructor();
  hash.set(obj, cloneObj);
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      cloneObj[key] = deepClone(obj[key], hash);
    }
  }

  return cloneObj;
}

```






+ æµ…æ‹·è´ä¸æ·±æ‹·è´çš„åŒºåˆ«ï¼š
  + æµ…æ‹·è´å¤åˆ¶å¯¹è±¡æ—¶ï¼Œåªå¤åˆ¶æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡æ˜¯å…±äº«åŒä¸€å—å†…å­˜ï¼Œä¿®æ”¹å¤åˆ¶åçš„å¯¹è±¡å±æ€§ä¼šå½±å“åŸå¯¹è±¡ã€‚
  + æ·±æ‹·è´ä¼šå¦å¤–åˆ›é€ ä¸€ä¸ªä¸åŸå¯¹è±¡ä¸€æ ·çš„å¯¹è±¡ï¼ˆæ–°å¼€æ ˆï¼‰ï¼Œæ–°å¯¹è±¡ä¸åŸå¯¹è±¡ä¸å…±äº«å†…å­˜ï¼Œä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ã€‚

![d9862c00-69b8-11eb-ab90-d9ae814b240d](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/WpNnv3.png)



## ç›¸å…³å®ç°ä¾‹å­

ğŸŒ° ä¾‹å­ / ç®€å•å®ç°æµ…æ‹·è´ï¼š

::: details

```js
function shallowClone(obj) {
  const newObj = {}
  for (let prop in obj) {
    if (obj.hasOwnProperty(prop)) {
      newObj[prop] = obj[prop]
    }
  }
  return newObj
}
```





## å‚è€ƒ

+ [jsæ·±æ‹·è´å’Œæµ…æ‹·è´åŠå…¶å®ç°æ–¹å¼ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000039310119)