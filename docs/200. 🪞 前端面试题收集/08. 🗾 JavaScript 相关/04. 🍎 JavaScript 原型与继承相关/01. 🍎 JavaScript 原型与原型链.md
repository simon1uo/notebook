---
title:  ğŸ JavaScript åŸå‹ä¸åŸå‹é“¾
date: 2022-06-26 19:06:48
permalink: /pages/a78536/
categories:
  -  ğŸª å‰ç«¯é¢è¯•é¢˜æ”¶é›†
  -  ğŸ—¾ JavaScript ç›¸å…³
  -  ğŸ JavaScript åŸå‹ä¸ç»§æ‰¿ç›¸å…³
tags:
  - 
---
> ç›¸å…³é—®é¢˜ï¼š
>
> + è¯´è¯´ä½ å¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£ã€‚
> + åŸå‹æœ‰ä»€ä¹ˆç‰¹ç‚¹ã€‚



## JavaScript åŸå‹

JavaScript çš„æ¯ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚



å¯¹äºå‡½æ•°ï¼š

+ å‡½æ•°å¯ä»¥æ‹¥æœ‰å±æ€§ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ä¸º `prototype` å±æ€§ï¼š
  + æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª `prototype` å±æ€§ï¼Œå®ƒ**é»˜è®¤æŒ‡å‘**ä¸€ä¸ª `Object` **ç©ºå¯¹è±¡**ï¼ˆå³**åŸå‹å¯¹è±¡** ï¼‰ã€‚
  + åŸå‹å¯¹è±¡ä¸­æœ‰ä¸€ä¸ª**å±æ€§ `constructor`** ï¼Œå®ƒ**æŒ‡å‘å‡½æ•°å¯¹è±¡**ã€‚
+ ç»™åŸå‹å¯¹è±¡æ·»åŠ å±æ€§ï¼ˆä¸€èˆ¬ä¸ºæ–¹æ³•ï¼‰ï¼Œ:star: ä½œç”¨ï¼š**å‡½æ•°çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡è‡ªåŠ¨æ‹¥æœ‰åŸå‹ä¸­çš„å±æ€§**ï¼ˆæ–¹æ³•ï¼‰ã€‚



ğŸŒ° ä¾‹å­ï¼š

```js
console.log(Date.prototype, typeof Date.prototype)

function Fun(){
  
}
console.log(Fun.prototype)
console.log(Date.prototype.constructor===Date) // true
console.log(Fun.prototype.constructor===Fun) // true

Fun.prototype.test = function (){
  cosole.log("test()")
}

var fun = new Fun()
fun.test() // "test()"
```

:::



### æ˜¾å¼åŸå‹ä¸éšå¼åŸå‹

+ æ˜¾å¼åŸå‹ï¼šæŒ‡æ¯ä¸ªå‡½æ•° `function` éƒ½æœ‰çš„åŸå‹ `prototype`ï¼ˆå±æ€§ï¼‰ã€‚é»˜è®¤æŒ‡å‘ä¸€ä¸ªç©ºçš„ `Object` å¯¹è±¡ã€‚
+ éšå¼åŸå‹ï¼šæŒ‡**æ¯ä¸ªå®ä¾‹å¯¹è±¡**éƒ½æœ‰ä¸€ä¸ªçš„ `__proto__` ï¼ˆå±æ€§ï¼‰ã€‚

å¯¹è±¡çš„**éšå¼åŸå‹çš„å€¼**ä¸ºå…¶å¯¹åº”**æ„é€ å‡½æ•°çš„æ˜¾æ€§åŸå‹çš„å€¼**ã€‚

::: warning

âš ï¸ åœ¨ ES6 ä¹‹å‰ï¼Œç¨‹åºå‘˜**èƒ½ç›´æ¥æ“ä½œæ˜¾å¼åŸå‹**ï¼Œ**ä½†æ˜¯ä¸èƒ½ç›´æ¥æ“ä½œéšå¼åŸå‹ã€‚**

:::



ğŸŒ° ä¾‹å­ï¼š

```js
function Fn(){
  // ... 
} // å¯ç†è§£ä¸º this.prototype = { ... }

// (1)
console.log(Fn.prototype) // Object
// (2)
var fn = new Fn() // å¯ç†è§£ä¸º this.__proto__ = Fn.prototype
console.log(fn.__proto__) // Object
// (3)
console.log(Fn.prototype==fn.__proto__) // true

Fn.prototype.test = function () {
  console.log("test")
} // ç»™åŸå‹æ·»åŠ æ–¹æ³•
fn.test() // test // å¯ä»¥é€šè¿‡å®ä¾‹è°ƒç”¨åŸå‹çš„æ–¹æ³• 
```

![image-20220314231803704](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/IVholK.png)





## JavaScript åŸå‹é“¾

+ å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œ
  1. å…ˆåœ¨è‡ªèº«çš„å±æ€§ä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åˆ™è¿”å›ï¼›
  2. å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å†æ²¿ç€ `__proto__` è¿™æ¡é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°åˆ™è¿”å›ï¼›
  3. å¦‚æœæœ€ç»ˆæ²¡æ‰¾åˆ°ï¼Œåˆ™è¿”å› `undefined` ã€‚

ä¸Šè¿°æŸ¥æ‰¾è¿‡ç¨‹ä¸ºåŸå‹é“¾ï¼Œåˆç§°ä¸º**éšå¼åŸå‹é“¾**ã€‚

ğŸŒ° ä¾‹å­ï¼š 

```js
function Fn(){
  this.test1 = function (){
    console.log("test1)")
  }
}

Fn.prototype.test2 = function () {
  console.log("test2()")
}

var fn = new Fn()

fn.test1()
fn.test2()
console.log(fn.toString())
fn.test3() // ERROR!
```

![image-20220314233659423](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/1nTjJr.png)

ä½œç”¨ï¼šæŸ¥æ‰¾å¯¹è±¡çš„å±æ€§ï¼ˆæ–¹æ³•ï¼‰

+ æ„é€ å‡½æ•° / åŸå‹ / å®ä¾‹å¯¹è±¡çš„å…³ç³» :one:ï¼š

  ```js
  var o1 = new Object()
  var o2 = {}
  ```

  ![image-20220315230351898](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/ZGIqd3.png)

+ æ„é€ å‡½æ•° / åŸå‹ / å®ä¾‹å¯¹è±¡çš„å…³ç³» :two: ï¼š

  ```js
  function Foo(){ }
  // var Foo = new Function()
  // Function = new Function()
  ```

  ::: warning

  **æ‰€æœ‰å‡½æ•°çš„ `__proto__` éƒ½æ˜¯ä¸€æ ·çš„ã€‚**

  :::

  ![image-20220317110231668](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/VEjEVk.png)



ğŸ”§ **é—®é¢˜è¡¥å……**ï¼š 

::: warning

+ å‡½æ•°çš„æ˜¾å¼åŸå‹æŒ‡å‘çš„å¯¹è±¡æ˜¯æ˜¯ç©ºçš„ `Object` å®ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯ `Object` ä¸æ»¡è¶³ã€‚

  ```js
  console.log(Fn.prototype instanceof Object) // true
  console.log(Object.prototype instanceof Object) // false
  cosole.log(Function.prototype instanceof Object) // true
  ```

  

+ æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ `Function` çš„**å®ä¾‹**ï¼ŒåŒ…æ‹¬ `Function` æœ¬èº«ï¼ˆ`Function` æ˜¯å®ƒè‡ªèº«çš„å®ä¾‹ï¼‰ã€‚

  ```js
  console.log(Function.__proto__===Function.prototype) // true
  ```



+ `Object`  çš„åŸå‹å¯¹è±¡æ˜¯**åŸå‹é“¾çš„å°½å¤´**ã€‚

  ```js
  console.log(Object.prototype.__proto__) // null
  ```

:::



### åŸå‹é“¾çš„å±æ€§é—®é¢˜

+ è¯»å–å¯¹è±¡çš„å±æ€§æ—¶ï¼Œ**ä¼šè‡ªåŠ¨åˆ°åŸå‹é“¾ä¸­æŸ¥æ‰¾**ã€‚
+ è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œâš ï¸ **ä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾**ï¼Œå¦‚æœå½“å‰å¯¹è±¡ä¸­æ²¡æœ‰æ­¤å±æ€§ï¼Œç›´æ¥æ·»åŠ æ­¤å±æ€§å¹¶è®¾ç½®æ­¤å€¼ã€‚
+ **æ–¹æ³•ä¸€èˆ¬å®šä¹‰åœ¨åŸå‹ä¸­ï¼Œå±æ€§ä¸€èˆ¬é€šè¿‡æ„é€ å‡½æ•°å®šä¹‰åœ¨å¯¹è±¡æœ¬èº«ä¸Šã€‚**



ğŸŒ° ä¾‹å­ï¼š

```js
function Fn() {}
Fn.prototype.a = 'xxx'
var fn1 = new Fn()
console.log(fn.a) // 'xxx'

var fn2 = new Fn()
fn2.a = 'yyy'
console.log(fn1.a) // 'xxx'
console.log(fn2.a) // 'yyy' 
//  cosole.log(fn2.__proto__.a) // 'xxx'
```



ğŸŒ° ä¾‹å­ï¼š

```js
function Person(name, age) {
  this.name = name
  this.age =age
}

Person.prototype.setName = function(name) = {
  this.name = name
}

var p1 = new Person('Tom', 12)
p1.setName('Bob')
console.log(p1.name, p1.age) // Bob, 12

var p2 = Person('Sid', 12)
p2.setName('Kat')
console.log(p2.name, p2.age) // Kat, 12
console.log(p1.__proto__==p2.__proto__) // true
```





## `instanceof` 

+ è¡¨è¾¾å¼ï¼š `a instanceof b` 
+ å¦‚æœ `b` å‡½æ•°çš„**æ˜¾ç¤ºåŸå‹å¯¹è±¡**åœ¨ `a` å¯¹è±¡çš„**åŸå‹é“¾**ä¸Šï¼ˆåˆ™ `a` æ˜¯ `b` çš„å®ä¾‹ï¼‰ï¼Œè¿”å› `true` ï¼Œå¦åˆ™è¿”å› `false` ã€‚



ğŸŒ° ä¾‹å­ :one: ï¼š

```js
function Foo() { }
var f1 = new Foo() // å·¦è¾¹å®ä¾‹å¯¹è±¡ï¼Œå³è¾¹æ„é€ å‡½æ•°
console.log(f1 instanceof Foo) // true
console.log(f1 instanceof Object) //* true 
```

![image-20220317141149124](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/RwniS5.png)



ğŸŒ° ä¾‹å­ :two:ï¼š

```js
console.log(Object instanceof Function) // true
console.log(Object instanceof Object) // true
console.log(Function instanceof Function) // true
console.log(Function instanceof Object) // true
```

```js
function Foo() { }
console.log(Object instanceof Foo) // false
```

![image-20220317143213847](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/c8XiVF.png)





## :star: é¢˜ç›¸å…³



:one: 

```js 
function A() { }
A.prototype.n = 1

var b = new A()

A.prototype = {
  n: 2,
  m: 3
}

var c = new A()

console.log(b.n, b.m, c.n, c.m) // 1 undefined 2 3 
```

![image-20220317145444983](https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/uomOEG.png)



:two:

```js
function F() { }
Object.prototype.a = function(){
  console.log('a()')
}
Function.prototype.b = function(){
  console.log('b()')
}

var f = new F()
f.a() // 'a()'
// f.b() // error
F.a() // 'a()'
F.b() // 'b()'
```

