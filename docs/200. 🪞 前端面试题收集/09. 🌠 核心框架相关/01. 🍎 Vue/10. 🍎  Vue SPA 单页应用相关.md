---
title:  🍎  Vue SPA 单页应用相关
date: 2022-06-09 15:52:33
permalink: /pages/31a16b/
categories:
  -  🪞面试题收集
  -  🌠 核心框架相关
  -  🍎 Vue
tags:
  - 
---
> + 说说对 SPA（单页面应用）的理解？优缺点？
> + 如何实现 SPA？



## 概念

SPA（Single-page Application） 单页面应用是一种 **网络应用程序或者网站的模型**；

+ 通过动态重写当前页面与用户交互，避免了页面切换打断用户体验。

+ 在单页面应用中，必要的代码都通过单个页面加载和检索，或者根据需要（响应用户的操作）动态加载适当的资源添加到页面中。

+ 页面在任何时间点都不应该会重新加载，也不会将控制转移到其他页面。

  > 理解例子：看作这个页面应用为一个杯子，杯子中可以装不同的内容，变的始终是杯子中的内容，而不是杯子。

+ 常见的 JavaScript 框架 Vue、React、Angular、ember 都属于 SPA。



MPA（Multi-page Application 多页面应用），意味着应用中有多个页面，每个页面都是一个主页面，当访问另一个页面的时候都需要重新加载 HTML、CSS、JavaScript 代码，公共文件则是按需加载。



SPA 与 MPA 两者对比：

|                  | SPA                | MPA                                  |
| ---------------- | ------------------ | ------------------------------------ |
| 刷新方式         | 局部刷新           | 整页刷新                             |
| URL 模式         | 哈希模式           | 历史模式                             |
| SEO 搜索引擎优化 | 难以实现           | 容易实现                             |
| 数据传递         | 容易               | 通过 URL、Cookie、localStorage       |
| 页面切换         | 速度快，用户体验好 | 需要切换加载资源，速度慢，用户体验差 |
| 维护成本         | 相对容易           | 相对复杂                             |



## SPA 的优缺点分析

优点：

+ 具有桌面应用的即时性、网站的可移植性、可访问性特点；
+ 用户体验好、快速，内容改变不需要重新加载页面；
+ 良好的前后端分离，分工明确；



缺点：

+ 不利于搜索引擎 SEO 优化
+ 首次渲染速度相对较慢



TODO：SPA 实现 搜索引擎 SEO 优化；



> + 如何解决 SPA 首屏加载速度慢；

## SPA 首屏加载

**首屏加载的概念**：浏览器从响应用户输入网址，到首屏内容渲染完成的事件，此时整个网页不一定需要全部渲染完成，但是需要展示当前视窗需要的内容；

计算首屏加载时间：

::: details

两种方法：

通过 `DOMContentLoad` 事件：

```js
document.addEventListener('DOMContentLoaded', (event) => {
  conosole.log('first contentful painting')
})
```



通过 `performance` ：

```js
performance.getEntriesByName("first-contentful-paint")[0].startTime
```

:::



解决单页应用首屏进入加载慢的问题：

> 页面渲染导致加载速度慢的因素有：
>
> + 网络延时；
> + 资源文件体积过大；
> + 资源是否重复发送请求去加载；
> + 加载脚本时，渲染的内容堵塞了；

解决方案：

+ 减小入口文件体积；

  常见手段是路由懒加载，把不同的路由对应不同的组件分割成不同的代码块，待路由被请求的时候会单独打包路由，使得入口文件变小，加载速度大大增加。

  🌰 动态加载路由例子：

  ```js
  routes: [
    path: '/'
    name: 'main',
    component: () => import('@/views/main.vue')
  ]
  ```

  > 函数形式加载路由，可以把各自的路由文件分别打包吗，只有在解析给定的路由时才会加载路由组件。

+ 静态资源本地缓存；

  + 图片资源压缩大小；

+ UI 框架按需加载；（组件按序引用）

+ 组件重复打包问题，避免重复加载组件；

+ 使用 Gzip 压缩；

  需要浏览器支持。

+ 使用 SSR（Server Side）：

   服务器端的渲染，组件或者页面通过服务器生成 HTML 代码，再发送到浏览器。





## 参考

+ [面试官：你对SPA单页面的理解，它的优缺点分别是什么？如何实现SPA应用呢 | web前端面试 - 面试官系列 (vue3js.cn)](https://vue3js.cn/interview/vue/spa.html)
+ [面试官：SPA首屏加载速度慢的怎么解决？ | web前端面试 - 面试官系列 (vue3js.cn)](https://vue3js.cn/interview/vue/first_page_time.html)