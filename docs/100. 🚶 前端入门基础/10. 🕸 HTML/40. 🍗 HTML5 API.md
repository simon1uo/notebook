---
title: ğŸ— HTML5 API
date: 2022-06-08 13:12:18
permalink: /pages/30c725/
categories:
  - ğŸš¶ å‰ç«¯å…¥é—¨åŸºç¡€
  - ğŸ•¸ HTML
tags:
  - HTML
---

## HTML5 åœ°ç†å®šä½

HTML Geolocation API ç”¨äºè·å–ç”¨æˆ·çš„åœ°ç†ä½ç½®ï¼Œåœ¨è·å–ä¹‹å‰éœ€è¦ç”¨æˆ·çš„ç»Ÿä¸€å¼€å¯è·å–åœ°ç†ä½ç½®çš„æƒé™ã€‚

ä½¿ç”¨ `getCurrentPosition()` æ–¹æ³•è·å–ã€‚

ğŸŒ° ä¾‹å­ï¼š

::: demo [vanilla]

```html
<html>
  <p id="geodemo">ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œè·å¾—æ‚¨çš„åæ ‡ï¼š</p>
	<button onclick="getLocation()">è¯•ä¸€ä¸‹</button>
  <script>
  	let demo = document.querySelector("#geodemo")
		
    function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
    
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br />Longitude: " + position.coords.longitude;	
  }
  </script>
</html>
```

:::

> + é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ”¯æŒåœ°ç†å®šä½ï¼Œå¦‚æœæ”¯æŒæ‰è¿è¡Œ `getCurrentPosiiton` æ–¹æ³•ã€‚å¦‚æœä¸æ”¯æŒï¼Œå‘é€ä¸æ”¯æŒçš„æ¶ˆæ¯ï¼›
> + `position.coords.latitude` / `position.coords.longitude` è·å–åœ°ç†ä½ç½®ç»çº¬åº¦ã€‚



æ›´å¤šçš„å±æ€§ï¼š

| å±æ€§                    | æè¿°                   |
| :---------------------- | :--------------------- |
| coords.latitude         | åè¿›åˆ¶æ•°çš„çº¬åº¦         |
| coords.longitude        | åè¿›åˆ¶æ•°çš„ç»åº¦         |
| coords.accuracy         | ä½ç½®ç²¾åº¦               |
| coords.altitude         | æµ·æ‹”ï¼Œæµ·å¹³é¢ä»¥ä¸Šä»¥ç±³è®¡ |
| coords.altitudeAccuracy | ä½ç½®çš„æµ·æ‹”ç²¾åº¦         |
| coords.heading          | æ–¹å‘ï¼Œä»æ­£åŒ—å¼€å§‹ä»¥åº¦è®¡ |
| coords.speed            | é€Ÿåº¦ï¼Œä»¥ç±³/æ¯ç§’è®¡      |
| timestamp               | å“åº”çš„æ—¥æœŸ/æ—¶é—´        |



ä½¿ç”¨ `watchPosition()` ï¼šè¿”å›ç”¨æˆ·å½“å‰çš„ä½ç½®ï¼Œå¹¶ç»§ç»­è¿”å›ç”¨æˆ·ç§»åŠ¨æ—¶æ›´æ–°çš„ä½ç½®ï¼›`clearWatch()` æ–¹æ³•ï¼šåœæ­¢ `watchPosition()` æ–¹æ³•ã€‚

ğŸŒ° ä¾‹å­ï¼š

```html
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.watchPosition(showPosition);
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude +
  "<br />Longitude: " + position.coords.longitude;
  }
</script>
```



## HTML5 æ‹–æ”¾

æ‹–æ”¾ï¼ˆDrag å’Œ Dropï¼‰æ“ä½œæŒ‡çš„æ˜¯ç”¨æˆ·æŠ“å–æŸä¸ªå…ƒç´ å¹¶æ‹–å…¥åˆ°ä¸åŒçš„ä½ç½®ã€‚æ‹–æ”¾æ˜¯ HTML5 æ ‡å‡†ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•å…ƒç´ éƒ½æ˜¯å¯æ‹–æ”¾çš„ã€‚



ğŸŒ° ä¾‹å­ï¼š

<iframe width="100%" height="300" src="//jsfiddle.net/simon1uo/jw834h9y/2/embedded/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe>



## HTML5 åº”ç”¨ç¼“å­˜

HTML5 å¼•å…¥äº†åº”ç”¨ç¨‹åºç¼“å­˜ï¼Œæ„å‘³ç€å¯å¯¹ web åº”ç”¨è¿›è¡Œç¼“å­˜ï¼Œå¹¶å¯åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥æ—¶è¿›è¡Œè®¿é—®ã€‚

> åº”ç”¨ç¨‹åºç¼“å­˜ä¸ºåº”ç”¨å¸¦æ¥ä¸‰ä¸ªä¼˜åŠ¿ï¼š
>
> + ç¦»çº¿æµè§ˆï¼šç”¨æˆ·å¯åœ¨åº”ç”¨ç¦»çº¿æ—¶ä½¿ç”¨å®ƒä»¬ï¼›
> + é€Ÿåº¦ï¼šå·²ç¼“å­˜èµ„æºåŠ è½½å¾—æ›´å¿«ï¼›
> + å‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼šæµè§ˆå™¨å°†åªä»æœåŠ¡å™¨ä¸‹è½½æ›´æ–°è¿‡æˆ–æ›´æ”¹è¿‡çš„èµ„æºï¼›



ğŸŒ° ä¾‹å­ / å¸¦æœ‰ cache manifest çš„ HTML æ–‡æ¡£ï¼Œå¯ä¾›ç¦»çº¿é˜…è¯»ï¼š

```html
<!DOCTYPE HTML>
<html manifest="demo.appcache">

<body>
æ–‡æ¡£å†…å®¹ ......
</body>

</html>
```



å¦‚éœ€å¯ç”¨åº”ç”¨ç¨‹åºç¼“å­˜ï¼Œè¯·åœ¨æ–‡æ¡£çš„ `<html>` æ ‡ç­¾ä¸­åŒ…å« manifest å±æ€§ï¼š

```html
<!DOCTYPE HTML>
<html manifest="demo.appcache">
...
</html>
```

æ¯ä¸ªæŒ‡å®šäº† `manifest` çš„é¡µé¢åœ¨ç”¨æˆ·å¯¹å…¶è®¿é—®æ—¶éƒ½ä¼šè¢«ç¼“å­˜ã€‚å¦‚æœæœªæŒ‡å®š `manifest` å±æ€§ï¼Œåˆ™é¡µé¢ä¸ä¼šè¢«ç¼“å­˜ï¼ˆé™¤éåœ¨ `manifest` æ–‡ä»¶ä¸­ç›´æ¥æŒ‡å®šäº†è¯¥é¡µé¢ï¼‰ã€‚

+ `manifest` çš„æ–‡ä»¶æ‹“å±•åå»ºè®®ä¸º `.appchache`ï¼›
+ `manifest` æ–‡ä»¶éœ€è¦è®¾ç½®æ­£ç¡®çš„ `MIME-type`ï¼Œå³ `text/cache-manifest`ã€‚å¿…é¡»åœ¨ web æœåŠ¡å™¨ä¸Šè¿›è¡Œé…ç½®ã€‚



æ›´æ–°ç¼“å­˜ / ä¸€æ—¦åº”ç”¨è¢«ç¼“å­˜ï¼Œå°±ä¼šä¿å­˜ç¼“å­˜ç›´åˆ°å‘ç”Ÿä¸‹åˆ—æƒ…å†µï¼š

+ ç”¨æˆ·æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜ï¼›
+ `manifest` æ–‡ä»¶è¢«ä¿®æ”¹ï¼›
+ ç”±ç¨‹åºæ¥æ›´æ–°åº”ç”¨ç¼“å­˜ï¼›



å…³äºåº”ç”¨ç¼“å­˜éœ€è¦æ³¨æ„ï¼š

+ ä¸€æ—¦æ–‡ä»¶è¢«ç¼“å­˜ï¼Œæµè§ˆå™¨ä¼šç»§ç»­å±•ç¤ºå·²ç»ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œå³ä½¿ä¿®æ”¹äº†æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼›ä¸ºäº†ç¡®ä¿æµè§ˆå™¨æ›´æ–°ç¼“å­˜ï¼Œéœ€è¦æ›´æ–° `manifest` æ–‡ä»¶ã€‚
+ æµè§ˆå™¨å¯¹ç¼“å­˜æ•°æ®çš„å®¹é‡é™åˆ¶å¯èƒ½ä¸å¤ªä¸€æ ·ï¼›



## HTML5 WebWorkers

Web worker æ˜¯è¿è¡Œåœ¨åå°çš„ JavaScriptï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚ç»§ç»­åšä»»ä½•äº‹æƒ…ï¼šç‚¹å‡»ã€é€‰å–å†…å®¹ç­‰ç­‰ï¼Œè€Œæ­¤æ—¶ web worker è¿è¡Œåœ¨åå°ã€‚

ğŸŒ° ä¾‹å­ï¼š
```html
<!DOCTYPE html>
<html>
<body>

<p>è®¡æ•°: <output id="result"></output></p>
<button onclick="startWorker()">å¼€å§‹ Worker</button> 
<button onclick="stopWorker()">åœæ­¢ Worker</button>
<br /><br />

<script>
var w;

function startWorker()
{
if(typeof(Worker)!=="undefined")
  {
  if(typeof(w)=="undefined")
  {
  w=new Worker("/example/html5/demo_workers.js");
  }
  w.onmessage = function (event) {
    document.getElementById("result").innerHTML=event.data;
    };
  }
else
  {
  document.getElementById("result").innerHTML="Sorry, your browser does not support Web Workers...";
  }
}

function stopWorker()
{ 
w.terminate();
}
</script>

</body>
</html>
```



+ åœ¨ä½¿ç”¨ Web Workers ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒå®ƒã€‚

+ åˆ›å»º Web Worker æ–‡ä»¶ã€‚
