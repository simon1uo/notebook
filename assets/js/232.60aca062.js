(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{701:function(v,_,e){"use strict";e.r(_);var o=e(29),d=Object(o.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h2",{attrs:{id:"vue-的挂载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-的挂载"}},[v._v("#")]),v._v(" Vue 的挂载")]),v._v(" "),e("blockquote",[e("ul",[e("li",[v._v("Vue 实例挂载的过程发生了什么？")])])]),v._v(" "),e("ul",[e("li",[e("code",[v._v("new Vue()")]),v._v("  时，会调用  "),e("code",[v._v("_init()")]),v._v("  方法初始化：\n"),e("ul",[e("li",[v._v("定义  "),e("code",[v._v("$set")]),v._v(" 、 "),e("code",[v._v("$get")]),v._v(" 、 "),e("code",[v._v("$delete")]),v._v(" 、 "),e("code",[v._v("$watch")]),v._v("  等方法；（数据相关）")]),v._v(" "),e("li",[v._v("定义  "),e("code",[v._v("$on")]),v._v(" 、 "),e("code",[v._v("$off")]),v._v(" 、 "),e("code",[v._v("$emit")]),v._v(" 、 "),e("code",[v._v("$off")]),v._v("  等事件；")]),v._v(" "),e("li",[v._v("定义  "),e("code",[v._v("_update")]),v._v(" 、 "),e("code",[v._v("$forceUpdate")]),v._v(" 、 "),e("code",[v._v("$destroy")]),v._v("  生命周期；")])])]),v._v(" "),e("li",[v._v("调用  "),e("code",[v._v("$mount")]),v._v("  进行页面的挂载；\n"),e("ul",[e("li",[v._v("页面的挂载主要通过  "),e("code",[v._v("mountComponent")]),v._v("  方法；")])])]),v._v(" "),e("li",[v._v("定义  "),e("code",[v._v("updateComponent")]),v._v("  更新函数；")]),v._v(" "),e("li",[v._v("执行  "),e("code",[v._v("render")]),v._v("  生成虚拟 DOM；")]),v._v(" "),e("li",[e("code",[v._v("update")]),v._v("  将虚拟 DOM 生成真实 DOM 结构，渲染到页面中；")])]),v._v(" "),e("h2",{attrs:{id:"vue-的生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-的生命周期"}},[v._v("#")]),v._v(" Vue 的生命周期")]),v._v(" "),e("p",[v._v("Vue 的生命周期过程：从 Vue 实例的创建到销毁的过程，即从 ** 创建、初始化数据、编译模版、挂载 DOM → 渲染、更新 → 渲染、卸载 ** 等一系列的过程。")]),v._v(" "),e("blockquote",[e("p",[v._v("可以看作工厂中的一条流水线，每个工人（生命周期）站在各自的岗位，当任务流转到工人身边的时候，工人就开始哦给你做。")])]),v._v(" "),e("blockquote",[e("p",[v._v("Vue 生明周期会自动绑定到  "),e("code",[v._v("this")]),v._v("  上下文实例，因此可以通过  "),e("code",[v._v("this")]),v._v("  访问到数据，对  "),e("code",[v._v("property")]),v._v("  和方法进行运算，但是这意味着不能使用箭头函数定义生命周期方法。")])]),v._v(" "),e("p",[v._v("Vue 个生命周期（Vue 2），包括 （实例）创建前后、挂载前后、更新前后、销毁前后，以及一些特殊的生命周期：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("beforeCreate")]),v._v("  ：组件实例被创建之前；")]),v._v(" "),e("li",[e("code",[v._v("created")]),v._v(" ：组件实例完全创建；")]),v._v(" "),e("li",[e("code",[v._v("beforeMount")]),v._v(" ：组件挂载之前；")]),v._v(" "),e("li",[e("code",[v._v("mounted")]),v._v(" ：组件挂载到实例之后；")]),v._v(" "),e("li",[e("code",[v._v("beforeUpdate")]),v._v(" ：组件数据发生改变，更新之前；")]),v._v(" "),e("li",[e("code",[v._v("updated")]),v._v(" ：组件数据更新之后；")]),v._v(" "),e("li",[e("code",[v._v("beforeDestroy")]),v._v(" ：组件实例销毁之前；")]),v._v(" "),e("li",[e("code",[v._v("destroyed")]),v._v(" ：组件实例销毁之后；")])]),v._v(" "),e("hr"),v._v(" "),e("ul",[e("li",[e("code",[v._v("activated")]),v._v(" ： "),e("code",[v._v("keep-alive")]),v._v("  缓存的组件激活时；")]),v._v(" "),e("li",[e("code",[v._v("deactivated")]),v._v(" ： "),e("code",[v._v("keep-alive")]),v._v("  缓存的组件停用时；")]),v._v(" "),e("li",[e("code",[v._v("errorCaptured")]),v._v(" ：捕获一个来自子孙组件的错误时被调用；")])]),v._v(" "),e("p",[v._v("Vue 生命周期流程：")]),v._v(" "),e("details",{staticClass:"custom-block details"},[e("summary",[v._v("点击查看")])]),v._v(" "),e("p",[v._v("Vue 生命周期具体分析：")]),v._v(" "),e("ul",[e("li",[e("p",[e("code",[v._v("beforeCreate")]),v._v("  →  "),e("code",[v._v("created")]),v._v(" ： 初始化 Vue 实例，进行数据观测；")])]),v._v(" "),e("li",[e("p",[e("code",[v._v("created")]),v._v(" ：")]),v._v(" "),e("ul",[e("li",[v._v("完成数据观测、属性与方法的运算； "),e("code",[v._v("watch")]),v._v(" 、 "),e("code",[v._v("event")]),v._v("  事件回调的配置；")]),v._v(" "),e("li",[v._v("可以调用  "),e("code",[v._v("methods")]),v._v("  中的方法，访问和修改  "),e("code",[v._v("data")]),v._v("  数据触发响应式渲染 DOM，可以通过  "),e("code",[v._v("computed")]),v._v("  和  "),e("code",[v._v("watch")]),v._v("  完成数据计算；")]),v._v(" "),e("li",[v._v("此时  "),e("code",[v._v("vm.$el")]),v._v("  并没有被创建；")])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("created")]),v._v("   →  "),e("code",[v._v("beforeMount")])]),v._v(" "),e("ul",[e("li",[v._v("判断是否存在  "),e("code",[v._v("el")]),v._v(" ：如果不存在则停止编译，直到调用  "),e("code",[v._v("vm.$mount(el)")]),v._v("  才会继续编译；")]),v._v(" "),e("li",[v._v("优先级： "),e("code",[v._v("render")]),v._v("  >  "),e("code",[v._v("template")]),v._v("  >  "),e("code",[v._v("outerHTML")]),v._v(" ；")]),v._v(" "),e("li",[e("code",[v._v("vm.el")]),v._v("  获取到的是 挂载 DOM 的；")])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("beforeMount")]),v._v("  →  "),e("code",[v._v("mounted")]),v._v("  ：")]),v._v(" "),e("ul",[e("li",[v._v("在这个阶段可以获取到  "),e("code",[v._v("vm.el")]),v._v(" ；")]),v._v(" "),e("li",[v._v("在这个阶段虽然  "),e("code",[v._v("vm.el")]),v._v("  完成了 DOM 初始化，即将开始渲染，但并未挂载在  "),e("code",[v._v("el")]),v._v("  选项上。")]),v._v(" "),e("li",[v._v("这个阶段可以修改数据，但是不会触发数据更新相关勾子；")])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("mounted")]),v._v("  ： "),e("code",[v._v("vm.el")]),v._v("  完成了 DOM 的挂载和渲染，数据完成双向绑定，此时打印  "),e("code",[v._v("vm.$el")]),v._v("  发现此前的挂载点以及内容已经被替换成新的 DOM，可以访问 DOM 节点，使用  "),e("code",[v._v("$refs")]),v._v("  对 DOM 操作；")])]),v._v(" "),e("li",[e("p",[e("code",[v._v("beforeUpdate")]),v._v(" ：")]),v._v(" "),e("ul",[e("li",[v._v("更新的数据必须是被渲染在模版上的（ "),e("code",[v._v("el")]),v._v(" 、 "),e("code",[v._v("template")]),v._v(" 、 "),e("code",[v._v("render")]),v._v("  之一）；")]),v._v(" "),e("li",[v._v("此时  "),e("code",[v._v("view")]),v._v("  层还未更新；")]),v._v(" "),e("li",[v._v("若在  "),e("code",[v._v("beforeUpdate")]),v._v("  中再次修改数据，"),e("strong",[v._v("不会再次触发更新方法")]),v._v("；")])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("updated")]),v._v(" ：")]),v._v(" "),e("ul",[e("li",[v._v("完成  "),e("code",[v._v("view")]),v._v("  层的更新；")]),v._v(" "),e("li",[v._v("若在   "),e("code",[v._v("updated")]),v._v("  中在此修改数据，"),e("strong",[v._v("会再次触发更新方法（ "),e("code",[v._v("beforeUpdate")]),v._v(" 、 "),e("code",[v._v("updated")]),v._v(" ）")]),v._v("；")])])]),v._v(" "),e("li",[e("p",[e("code",[v._v("beforeDestroy")]),v._v(" ：实例被销毁之前调用，此时实例属性与方法仍然可以访问；")])]),v._v(" "),e("li",[e("p",[e("code",[v._v("destroyed")]),v._v(" ：")]),v._v(" "),e("ul",[e("li",[v._v("完全销毁一个实例，可以清理它与其他实例的连接，解绑它的全部指令以及事件监听器；")]),v._v(" "),e("li",[v._v("并不能清除 DOM，仅仅销毁实例；")])])])]),v._v(" "),e("p",[e("strong",[v._v("使用场景")]),v._v("：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("beforeCreate")]),v._v(" ：通常用于插件开发中的一些初始化任务（此时组件实例为创建）")]),v._v(" "),e("li",[e("code",[v._v("created")]),v._v(" ：组件实例创建后，可以获取各种数据，通常用于 异步数据的获取；")]),v._v(" "),e("li",[e("code",[v._v("beforeMount")]),v._v(" ：未执行渲染、更新，DOM 未创建；")]),v._v(" "),e("li",[e("code",[v._v("mounted")]),v._v(" ：初始化结束，DOM 已创建；可以用于获取访问数据 和 DOM 元素；")]),v._v(" "),e("li",[e("code",[v._v("beforeUpdate")]),v._v(" ：数据更新之前，可用于获取更新前的各种状态；")]),v._v(" "),e("li",[e("code",[v._v("updated")]),v._v(" ：数据更新之后，所有状态已是最新；")]),v._v(" "),e("li",[e("code",[v._v("beforeDestroy")]),v._v(" ：销毁之前，用于解绑订阅或者定时器；")]),v._v(" "),e("li",[e("code",[v._v("destroyed")]),v._v(" ：完全销毁之后。")])]),v._v(" "),e("blockquote",[e("p",[v._v("数据获取，使用  "),e("code",[v._v("created")]),v._v("  和  "),e("code",[v._v("mounted")]),v._v("  的区别：")]),v._v(" "),e("ul",[e("li",[e("p",[e("code",[v._v("created")]),v._v("  在 "),e("strong",[v._v("组件实例一旦创建完成之后")]),v._v(" 立刻调用，这时 DOM 节点并未生成；")]),v._v(" "),e("p",[e("code",[v._v("mounted")]),v._v("  是在页面 DOM 节点渲染完毕之后立即执行的；")]),v._v(" "),e("p",[v._v("所以触发时机，  "),e("code",[v._v("created")]),v._v("  比  "),e("code",[v._v("mounted")]),v._v("  更早。")])]),v._v(" "),e("li",[e("p",[v._v("两者相同点，都能拿到 "),e("strong",[v._v("实例对象的属性和方法")]),v._v("。")])]),v._v(" "),e("li",[e("p",[v._v("这个问题的本质就是触发的时机，放在  "),e("code",[v._v("mounted")]),v._v("  请求数据有可能导致页面闪动（因为此时 DOM 结构已经渲染完毕），但是如果在页面加载之前完成数据请求就不会发生。建议放在  "),e("code",[v._v("created")]),v._v("  生命周期中。")])])])]),v._v(" "),e("p",[v._v("Vue 生命周期详细流程：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/vTSWjQ.png",alt:"44114780-3aca-11eb-85f6-6fac77c0c9b3"}})]),v._v(" "),e("p",[v._v("Vue 3 中的生命周期：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("setup")]),v._v(" "),e("ul",[e("li",[v._v("替代了  "),e("code",[v._v("beforeCreate")]),v._v("  /  "),e("code",[v._v("created")]),v._v(" 。")])])]),v._v(" "),e("li",[e("code",[v._v("onBeforeMount")]),v._v(" "),e("ul",[e("li",[v._v("此阶段在组件的 DOM 实际渲染和挂载之前触发。所以根源素还没存在。")])])]),v._v(" "),e("li",[e("code",[v._v("onMounted")])]),v._v(" "),e("li",[e("code",[v._v("onBeforeUpdate")])]),v._v(" "),e("li",[e("code",[v._v("onUpdated")])]),v._v(" "),e("li",[e("code",[v._v("onBeforeUnmount")])]),v._v(" "),e("li",[e("code",[v._v("onUnmounted")])]),v._v(" "),e("li",[e("code",[v._v("onErrorCaptured")])])]),v._v(" "),e("hr"),v._v(" "),e("ul",[e("li",[e("code",[v._v("onActivated")])]),v._v(" "),e("li",[e("code",[v._v("onDeactivated")])])]),v._v(" "),e("hr"),v._v(" "),e("p",[v._v("调试时使用钩子：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("onRenderTracked")])]),v._v(" "),e("li",[e("code",[v._v("onRenderTriggered")])])])])}),[],!1,null,null,null);_.default=d.exports}}]);