(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{564:function(v,e,_){"use strict";_.r(e);var t=_(3),o=Object(t.a)({},(function(){var v=this,e=v._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("blockquote",[e("ul",[e("li",[v._v("Vue 中双向绑定数据是什么？")])])]),v._v(" "),e("h2",{attrs:{id:"双向数据绑定的概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#双向数据绑定的概念"}},[v._v("#")]),v._v(" 双向数据绑定的概念")]),v._v(" "),e("blockquote",[e("p",[v._v("从单向数据绑定切入。把  "),e("code",[v._v("Model")]),v._v("  绑定到  "),e("code",[v._v("View")]),v._v(" ，当用 JavaScript 代码 更新  "),e("code",[v._v("Model")]),v._v("  时， "),e("code",[v._v("View")]),v._v("  会自动更新。")])]),v._v(" "),e("p",[v._v("双向数据绑定就是，在单向数据绑定的基础上，用户更新了  "),e("code",[v._v("View")]),v._v("  ， "),e("code",[v._v("Model")]),v._v("  中的数据也会自动更新。")]),v._v(" "),e("p",[v._v("🌰 例子 / 填写表单：")]),v._v(" "),e("p",[v._v("当用户填写表单时， "),e("code",[v._v("View")]),v._v("  的状态就被更新了，如果此时可以自动更新 "),e("code",[v._v("Model")]),v._v("  的状态，那就相当于把  "),e("code",[v._v("Model")]),v._v("  和  "),e("code",[v._v("View")]),v._v("  做了双向绑定。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/zrKWfh.png",alt:"dcc1d4a0-3ac9-11eb-ab90-d9ae814b240d"}})]),v._v(" "),e("h2",{attrs:{id:"双向数据绑定的原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#双向数据绑定的原理"}},[v._v("#")]),v._v(" 双向数据绑定的原理")]),v._v(" "),e("p",[v._v("Vue 是双向绑定数据的框架。双向绑定由三个重要部分组成：")]),v._v(" "),e("ul",[e("li",[v._v("数据层 /  "),e("code",[v._v("Model")]),v._v(" ：应用的数据以及业务逻辑；")]),v._v(" "),e("li",[v._v("视图层 /  "),e("code",[v._v("View")]),v._v(" ：应用的展示效果，各类 UI 组件；")]),v._v(" "),e("li",[e("strong",[v._v("业务逻辑层")]),v._v(" /  "),e("code",[v._v("ViewModel")]),v._v(" ：框架封装的核心，负责将数据与视图关联起来；")])]),v._v(" "),e("p",[v._v("这个分层的架构方案称为 MVVM。核心功能为 "),e("strong",[v._v("数据的双向绑定")]),v._v("。")]),v._v(" "),e("h3",{attrs:{id:"理解-viewmodel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#理解-viewmodel"}},[v._v("#")]),v._v(" 理解  "),e("code",[v._v("ViewModel")])]),v._v(" "),e("p",[v._v("主要职责：")]),v._v(" "),e("ul",[e("li",[v._v("数据发生改变后，更新视图")]),v._v(" "),e("li",[v._v("视图发生改变后，更新数据")])]),v._v(" "),e("p",[v._v("由两个重要的部分组成：")]),v._v(" "),e("ul",[e("li",[v._v("监听器 / Observer ：对所有数据的属性进行监听；")]),v._v(" "),e("li",[v._v("解析器 / Compiler：对每个元素的节点的指令进行扫描和解析，"),e("strong",[v._v("根据指令模版替换数据，以及绑定响应的更新函数")]),v._v("。")])]),v._v(" "),e("h3",{attrs:{id:"实现双向绑定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现双向绑定"}},[v._v("#")]),v._v(" 实现双向绑定")]),v._v(" "),e("p",[v._v("以 Vue 为例，看数据双向绑定的流程：")]),v._v(" "),e("ol",[e("li",[e("code",[v._v("new Vue()")]),v._v("  执行初始化，对  "),e("code",[v._v("data")]),v._v("  执行 "),e("strong",[v._v("响应化处理")]),v._v("。这个过程发生在  "),e("code",[v._v("Observe")]),v._v("  中；")]),v._v(" "),e("li",[v._v("同时对模版执行编译，找到其中动态绑定的数据，从  "),e("code",[v._v("data")]),v._v("  中获取并且初始化试图，这个过程发生在  "),e("code",[v._v("Compiler")]),v._v("  中；")]),v._v(" "),e("li",[v._v("同时定义一个更新函数和  "),e("code",[v._v("Watcher")]),v._v(" ，将来对应数据变化时， "),e("code",[v._v("Watcher")]),v._v("  会调用更新函数；")]),v._v(" "),e("li",[v._v("由于  "),e("code",[v._v("data")]),v._v("  某个  "),e("code",[v._v("key")]),v._v("  在一个视图中可能会出现多次，所以每个  "),e("code",[v._v("key")]),v._v("  都需要一个管家  "),e("code",[v._v("Dep")]),v._v("  管理多个  "),e("code",[v._v("Watcher")]),v._v(" ；")]),v._v(" "),e("li",[v._v("将来  "),e("code",[v._v("data")]),v._v("  中的数据一旦发生变化，首先找到对应的  "),e("code",[v._v("Dep")]),v._v(" ，通知所有的  "),e("code",[v._v("Watcher")]),v._v("  执行更新函数。")])]),v._v(" "),e("p",[v._v("::: details:::")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/simon1uo/image-flow@master/image/4ZsBxc.png",alt:"e5369850-3ac9-11eb-85f6-6fac77c0c9b3"}})]),v._v(" "),e("p",[v._v(":::")]),v._v(" "),e("h2",{attrs:{id:"vue-的双向绑定原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-的双向绑定原理"}},[v._v("#")]),v._v(" Vue 的双向绑定原理")]),v._v(" "),e("p",[v._v("Vue 的双向绑定是通过 数据劫持 结合 发布者 - 订阅者模式 的方式来实现的，利用  "),e("code",[v._v("Object.defineProperty()")]),v._v("  这个方法重新定义了对象获取 属性值 和 设置属性值（ "),e("code",[v._v("getter")]),v._v("  /  "),e("code",[v._v("setter")]),v._v("  ）。")]),v._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[v._v("#")]),v._v(" 参考")]),v._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/1022910821149312/1109527162256416",target:"_blank",rel:"noopener noreferrer"}},[v._v("双向绑定 - 廖雪峰的官方网站 (liaoxuefeng.com)"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=o.exports}}]);